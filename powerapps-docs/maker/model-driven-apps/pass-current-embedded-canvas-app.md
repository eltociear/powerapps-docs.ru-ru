---
title: Передача текущей записи в качестве контекста данных с внедренным приложением на основе холста | MicrosoftDocs
ms.custom: ''
ms.date: 06/25/2019
ms.reviewer: ''
ms.service: powerapps
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: get-started-article
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- PowerApps
author: Aneesmsft
ms.author: matp
manager: kvivek
tags:
- PowerApps maker portal impact
search.audienceType:
- maker
search.app:
- PowerApps
- D365CE
ms.openlocfilehash: 639b8631f1d953408d30a1fdbba9c9ae8161af4d
ms.sourcegitcommit: d9cecdd5a35279d78aa1b6c9fc642e36a4e4612c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "2755150"
---
# <a name="pass-the-current-record-as-data-context-to-an-embedded-canvas-app"></a>Передача текущей записи в качестве контекста данных во внедренное приложение на основе холста
> [!IMPORTANT]
> Приложения на основе холста, внедренные в управляемые моделью формы, теперь вышли из этапа предварительного просмотра и являются общедоступными. Перечисленные ниже шаги устарели и применимы только к общедоступной предварительной версии приложений на основе холста, внедренных в управляемые моделью формы.
> Для получения обновленного списка шагов для последнего выпуска см. раздел: [Добавление внедренного приложения на основе холста на управляемую моделью форму](embedded-canvas-app-add-classic-designer.md)

В этом разделе рассматривается добавление внедренного приложения на основе холста и передача текущей записи (основной формы) в качестве контекста данных во встроенное приложение на основе холста.

Допустим, вы хотите добавить внедренное приложение на основе холста на основной форме организации и передать текущую запись организации во встроенное приложение на основе холста. Для этого выполните следующие шаги. 

1.  Войдите в [PowerApps](https://make.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc) и откройте редактор форм для главной формы сущности, такой как сущность организации. 
2.  Выберите раздел в форме, в которой должно отображаться внедренное приложение на основе холста.
3.  Используя область обозревателя полей, добавьте требуемое поле, такое как **Название организации**.
      > [!IMPORTANT]
      > Всегда используйте обязательное поле, которое гарантировано имеет значение. Если поле не имеет значения, внедренное приложение на основе холста не обновляется в ответ на любое изменение данных в управляемой моделью форме, в которой размещено приложение.
4.  При выбранном поле на вкладке **Домашняя страница** в группе **Правка** выберите **Изменить свойства**.
5.  В диалоговом окне **Свойства поля** выберите вкладку **Элементы управления**.
6.  На вкладке **Элементы управления** выберите **Добавить элемент управления...**.
7.  В диалоговом окне **Добавить элемент управления** в списке доступных элементов управления выберите **Приложение на основе холста**, затем выберите **Добавить**.
8.  В диалоговом окне **Свойства поля** в списке элементов управления выберите **Приложение на основе холста**, затем выберите вариант **Веб**.
9.  В разделе под списком элементов управления отображается список свойств, доступных элементу управления приложения на основе холста.
     - Свойство **Имя сущности** указывает сущность, которое будет предоставлять данные вашему внедренному приложению на основе холста. Для него будет установлена сущность, которая содержит поле, добавленное на более раннем шаге.
         - Обратите внимание, что хотя это свойство выглядит как изменяемое, его изменение не влияет на внедренное приложение на основе холста. Оно служит только для справки.
     - Свойство **Идентификатор приложения** указывает идентификатор внедренного приложения на основе холста. Он автоматически создается и заполняется при создании приложения на основе холста.
         - Обратите внимание, что любое изменение значения параметра **Идентификатор приложения** разрывает связь между управляемой моделью формой и внедренным приложением на основе холста.
10. Выберите **Настроить**, чтобы создать или изменить приложение на основе холста. Откроется PowerApps Studio на новой вкладке.
       > [!NOTE]
       > Если открытие PowerApps Studio заблокировано из-за блокировки всплывающих окон веб-браузера, необходимо вручную включить сайт make.powerapps.com или временно отключить средство блокирования всплывающих окон и затем снова выбрать **Настройка**.
11. В PowerApps Studio обратите внимание, что имеется специальный элемент управления **ModelDrivenFormIntegration** на левой панели. Этот элемент управления не отвечает за перенос контекстных данных из управляемой моделью формы, в которой размещено приложение, во внедренное приложение на основе холста.
12. Выберите элемент управления **Gallery1** и посмотрите, что для свойства **Элементы** задано значение **ModelDrivenFormIntegration.Data**.
      > [!NOTE]
      > Объект ModelDrivenFormIntegration.Data является списком записей. В этом примере он имеет только одну запись. Чтобы напрямую указать запись, можно использовать функцию First. Например, *First(ModelDrivenFormIntegration.Data).Name*.
13. В области свойств справа рядом с полем **Поля** выберите **Изменить**.
14. На панели данных измените поле, сопоставленное элементу управления **Title1**, на поле **Имя** или другое поле, содержащее данные.
15. Обратите внимание, что в галереи отображаются данные, передаваемые в нее из управляемой моделью формы, в которой размещено приложение, через элемент управления ModelDrivenFormIntegration. Закройте панель данных.
16. Выберите вкладку **Файл**, затем выберите **Параметры приложения**.
17. На вкладке **Дополнительные параметры** в разделе **Экспериментальные функции** задайте для параметра **Включить использование внедренного приложения** значение **Вкл.**
18. Нажмите кнопку **Сохранить**. 
19. Выберите вкладку **Облако**. Укажите уникальное название для приложения, затем выберите пункт **Сохранить** в правом нижнем углу. Обратите внимание на следующее: 
    -  При первом сохранении приложения оно автоматически публикуется.
      -  При последующем сохранении выберите **Опубликовать**, затем выберите **Опубликовать эту версию**, чтобы сделать доступными изменения.
20. В меню выберите **Назад**, затем выберите вкладку браузера, в которой открыт редактор форм. Обратите внимание, что свойство **Идентификатор приложения** элемента управления приложения на основе холста имеет автоматически заполненное значение. Обратите внимание на следующее: 
    -   Редактор форм имеет прямую связь с приложением PowerApps Studio, которое было открыто в другой вкладке браузера ранее.
    -   Редактор форм ожидает, пока ему будет отправлен этот **Идентификатор приложения**.
    -   **Идентификатор приложения** отправляется в редактор форм при сохранении приложения.
21. В диалоговом окне **Свойства поля** выберите вкладку **Показать**.
22. Снимите флажок **Отображать подпись** в форме, затем выберите **ОК**.
    -   Если в эту форму уже внедрено приложение на основе холста, отображается сообщение "В форме можно включить только одно приложение на основе холста". Для добавления нового приложения на основе холста необходимо сначала [отключить текущее внедренное приложение на основе холста](embedded-canvas-app-guidelines.md#disable-an-embedded-canvas-app). Затем [включите новое внедренное приложение на основе холста](embedded-canvas-app-guidelines.md#enable-an-embedded-canvas-app).
23. На вкладке **Домашняя страница** выберите **Сохранить**, затем нажмите **Опубликовать**.

После добавления внедренного приложения на основе холста в управляемую моделью форму предоставьте общий доступ к приложению на основе холста другим пользователям. Дополнительные сведения: [Общий доступ к внедренному приложению на основе холста](share-embedded-canvas-app.md).

Когда пользователи открывают управляемое моделью приложение (только единый интерфейс), которое содержит измененную вами форму, они видят внедренное приложение на основе холста в форме. При изменении записи, отображаемой на основной форме, изменяется контекст данных, который передается в форму, и внедренное приложение обновляется для отображения соответствующих данных.

В этом разделе приводятся вводные сведения по внедрению приложений на основе холста в управляемую моделью форму. Можно дополнительно настроить внедренное приложение на основе холста для подключения и передачи в него данных из различных источников данных. Используйте функции фильтрации, поиска и подстановки, а также переданный из управляемой моделью основной формы контекст для фильтрации или поиска определенных записей в этих источниках данных. Используйте WYSIWYG-редактор приложения на основе холста для упрощения разработки интерфейса в соответствии с требованиями.

## <a name="see-also"></a>См. также
[Внедрение приложения на основе холста в управляемую моделью форму](embed-canvas-app-in-form.md) <br />
[Добавление внедренного приложения на основе холста в управляемую моделью форму](embedded-canvas-app-add-classic-designer.md) <br />
[Редактирование приложения на основе холста, внедренного в управляемую моделью форму](embedded-canvas-app-edit-classic-designer.md) <br />
[Настройка размера и ориентации экрана приложения на основе холста, внедренного на управляемую моделью форму](embedded-canvas-app-customize-screen.md) <br />
[Выполнение предопределенных действий в форме узла из внедренного приложения холста](embedded-canvas-app-actions.md) <br />
[Свойства и действия элемента управления ModelDrivenFormIntegration](embedded-canvas-app-properties-actions.md) <br />
[Предоставление общего доступа к внедренному приложению на основе холста](share-embedded-canvas-app.md) <br />
[Рекомендации по работе с внедренными приложениями на основе холста](embedded-canvas-app-guidelines.md) <br />
[Перенос внедренных приложений на основе холста на управляемые моделью формы, созданных с помощью общедоступной предварительной версии, в последнюю версию](embedded-canvas-app-migrate-from-preview.md) <br />
