---
title: Передача списка связанных записей в качестве контекста данных с внедренным приложением на основе холста | MicrosoftDocs
ms.custom: ''
ms.date: 12/17/2018
ms.reviewer: ''
ms.service: powerapps
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: get-started-article
applies_to:
  - Dynamics 365 (online)
  - Dynamics 365 Version 9.x
  - PowerApps
author: Aneesmsft
ms.author: matp
manager: kvivek
tags:
  - PowerApps maker portal impact
search.audienceType:
  - maker
search.app:
  - PowerApps
  - D365CE
---

# <a name="pass-a-list-of-related-records-as-data-context-to-an-embedded-canvas-app"></a>Передача списка связанных записей в качестве контекста данных во внедренное приложение на основе холста

В этом разделе рассматривается добавление внедренного приложения на основе холста и передача списка записей, относящихся к текущей записи (основной формы) в качестве контекста данных во встроенное приложение на основе холста.

> [!NOTE]
> Эта функция в настоящее время доступна для предварительного ознакомления. <br />
> [!INCLUDE [cc-preview-features-definition](../../includes/cc-preview-features-definition.md)]

Допустим, вы хотите добавить внедренное приложение на основе холста на основной форме организации и передать список контактов, связанных с текущей записью организации во встроенное приложение на основе холста. Для этого выполните следующие шаги.

1.  Войдите в [PowerApps](https://web.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc) и откройте редактор форм для главной формы сущности, такой как сущность организации.
2.  Выберите раздел в форме, в которой должно отображаться внедренное приложение на основе холста.
3.  При выбранном разделе на вкладке **Вставка** в группе **Элемент управления** выберите **Вложенная сетка**.
4.  В диалоговом окне **Задать свойства** выберите вкладку **Показать**, затем в поле **Имя** введите имя для элемента управления сетки.
5.  В разделе **Источник данных** выберите **Сущность** и **Представление по умолчанию**, которые соответствуют списку записей, которые требуется передать в виде контекста данных во внедренное приложение на основе холста.
6. Выберите вкладку **Элементы управления**, затем выберите **Добавить элемент управления...**.
7. В диалоговом окне **Добавить элемент управления** в списке доступных элементов управления выберите **Приложение на основе холста**, затем выберите **Добавить**.
8. В диалоговом окне **Задать свойства** в списке элементов управления выберите **Приложение на основе холста**, затем выберите вариант **Веб**.
9. В разделе под списком элементов управления ознакомьтесь со списком свойств, соответствующих элементу управления приложения на основе холста, и обратите внимание на следующее:
     - Свойство **Имя сущности** указывает сущность, которое будет предоставлять данные вашему внедренному приложению на основе холста. Для него будет установлена сущностью, выбранная вами ранее.
         -  Даже хотя это свойство выглядит как изменяемое, его изменение не влияет на внедренное приложение на основе холста. Оно служит только для справки.
     -  Свойство **Имя представления** указывает представление сущности, которое будет использоваться для фильтрации данных, предоставляемых вашему внедренному приложению на основе холста. Для него будет установлено **Представление по умолчанию**, выбранное вами ранее.
         -  Данные (поля и значения), отправляемые во внедренное приложение на основе холста, определяются этим представлением. Используйте только поля в приложении на основе холста, которые включены в представление, или добавьте их к представлению при необходимости. Все поля, которые не включены в представление, отображаются с пустыми значениями во время выполнения.
         -  Условия фильтра для представления не используются во время разработки. Следовательно, данные, которые отображаются при создании внедренных приложений на основе холста, не отфильтрованы, это просто список нескольких первых записей, к которым имеется доступ. Во время выполнения условия фильтра для представления применяются надлежащим образом, и пользователи видят только соответствующие данные.
     -  Свойство **Идентификатор приложения** указывает идентификатор внедренного приложения на основе холста. Он автоматически создается и заполняется при создании приложения на основе холста.
         -  Обратите внимание, что любое изменение значения идентификатора приложения разрывает связь между управляемой моделью формой и внедренным приложением на основе холста.
10. Выберите кнопку **Настроить**, чтобы создать или изменить приложение на основе холста. Откроется PowerApps Studio на новой вкладке браузера.
     > [!IMPORTANT]
     > Если открытие PowerApps Studio заблокировано из-за блокировки всплывающих окон веб-браузера, необходимо вручную включить сайт web.powerapps.com или временно отключить средство блокирования всплывающих окон и затем снова выбрать **Настройка**. 
11. В PowerApps Studio обратите внимание, что имеется специальный элемент управления **ModelDrivenFormIntegration**, расположенный на левой панели. Этот элемент управления не отвечает за перенос контекстных данных из управляемой моделью формы, в которой размещено приложение, во внедренное приложение на основе холста. 
12. Выберите элемент управления **Gallery1** и посмотрите, что для свойства **Элементы** задано значение **ModelDrivenFormIntegration.Data**.
13. В области свойств справа рядом с полем **Поля** выберите **Изменить**.
14. На панели данных измените поле, сопоставленное элементу управления **Title1**, на поле **FullName** или другое поле, содержащее данные.
15. Обратите внимание, что в галереи отображаются данные, передаваемые в нее из управляемой моделью формы, в которой размещено приложение, через элемент управления **ModelDrivenFormIntegration**. Закройте панель данных.
16. Выберите вкладку **Файл** и выберите **Параметры приложения**.
17. На вкладке **Дополнительные параметры** в разделе **Экспериментальные функции** задайте для параметра **Включить использование внедренного приложения** значение **Вкл.**
18. Нажмите кнопку **Сохранить**. 
19. Выберите вкладку **Облако**, укажите уникальное название для приложения, затем выберите пункт **Сохранить** в правом нижнем углу. Обратите внимание на следующее: 
    -  При первом сохранении приложения оно автоматически публикуется. 
      -  При последующем сохранении необходимо выбрать **Опубликовать**, затем **Опубликовать эту версию**, чтобы сделать доступными изменения.
20. Выберите **Назад**, затем выберите вкладку браузера, в которой открыт редактор форм. 
21. Обратите внимание, что свойство **Идентификатор приложения** элемента управления **Приложение на основе холста** имеет автоматически заполненное значение. Обратите внимание на следующее: 
     -  Редактор форм имеет прямую связь с приложением PowerApps Studio, которое было открыто в другой вкладке браузера ранее.
     -  Редактор форм ожидал, пока ему будет отправлен этот идентификатор приложения.
     -  Идентификатор приложения был отправлен, когда приложение было сохранено.
22. В диалоговом окне **Задать свойства** выберите вкладку **Показать**, снимите флажок **Отображать метку в форме**, затем выберите **ОК**.
     - Если в эту форму уже внедрено приложение на основе холста, отображается сообщение "В форме можно включить только одно приложение на основе холста". Для добавления нового приложения на основе холста необходимо сначала [отключить текущее внедренное приложение на основе холста](embedded-canvas-app-guidelines.md#disable-an-embedded-canvas-app). Затем [включите новое внедренное приложение на основе холста](embedded-canvas-app-guidelines.md#enable-an-embedded-canvas-app).
23. На вкладке **Домашняя страница** выберите **Сохранить**, затем нажмите **Опубликовать**.

После добавления внедренного приложения на основе холста в управляемую моделью форму предоставьте общий доступ к приложению на основе холста другим пользователям. Дополнительные сведения: [Общий доступ к внедренному приложению на основе холста](share-embedded-canvas-app.md).

Когда пользователи открывают управляемое моделью приложение (только единый интерфейс), которое содержит измененную вами форму, они видят внедренное приложение на основе холста в форме. При изменении записи, отображаемой на основной форме, изменяется контекст данных, который передается в форму, и внедренное приложение обновляется для отображения соответствующих данных.

В этом разделе приводятся вводные сведения по внедрению приложений на основе холста в управляемую моделью форму. Можно дополнительно настроить внедренное приложение на основе холста для подключения и передачи в него данных из различных источников данных. Используйте функции фильтрации, поиска и подстановки, а также переданный из управляемой моделью основной формы контекст для фильтрации или поиска определенных записей в этих источниках данных. Используйте WYSIWYG-редактор приложения на основе холста для упрощения разработки интерфейса в соответствии с требованиями.

## <a name="see-also"></a>См. также
[Внедрение приложения на основе холста в управляемую моделью форму](embed-canvas-app-in-form.md) <br />
[Передача текущей записи в качестве контекста данных во внедренное приложение на основе холста](pass-current-embedded-canvas-app.md) <br />
[Выполнение предопределенных действий в форме узла из внедренного приложения холста](embedded-canvas-app-actions.md) <br />
[Предоставление общего доступа к внедренному приложению на основе холста](share-embedded-canvas-app.md) <br />
[Рекомендации по работе с внедренными приложениями на основе холста](embedded-canvas-app-guidelines.md)
