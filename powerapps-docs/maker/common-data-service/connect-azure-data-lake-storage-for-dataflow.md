---
title: Подключение Azure Data Lake Storage 2-го поколения для хранения потока данных (предварительная версия) | Документация Майкрософт
description: Узнайте, как подключить Azure Data Lake Storage 2-го поколения для хранения потока данных
ms.custom: ''
ms.date: 09/05/2019
ms.reviewer: ''
ms.service: powerapps
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- powerapps
author: Mattp123
ms.assetid: ''
caps.latest.revision: ''
ms.author: matp
manager: kvivek
tags: ''
search.audienceType:
- maker
search.app:
- PowerApps
- D365CE
ms.openlocfilehash: d7957f048613045a64af0caf5696e540dbb8f883
ms.sourcegitcommit: d9cecdd5a35279d78aa1b6c9fc642e36a4e4612c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "2754798"
---
# <a name="connect-azure-data-lake-storage-gen2-for-dataflow-storage"></a>Подключение Azure Data Lake Storage 2-го поколения для хранения потока данных

[!INCLUDE [cc-beta-prerelease-disclaimer](../../includes/cc-beta-prerelease-disclaimer.md)]

Вы можете настроить потоки данных для хранения данных в учетной записи Azure Data Lake Storage 2 поколения организации. В этой статье описываются общие шаги, необходимые для этого, а также указания и рекомендации. 

Есть несколько преимуществ для настройки потоков данных для хранения их определений и файлов данных в озере данных, включая следующие:
- Azure Data Lake Storage 2 поколения предоставляет масштабируемое хранилище данных.
- Разработчики вашего отдела ИТ могут использовать данные и файлы определений потоков данных для использования служб данных и искусственного интеллекта (AI) Azure, как показано в примерах GitHub из служб данных Azure.
- Это позволяет разработчикам в вашей организации интегрировать данные потоков данных во внутренние приложения и бизнес-решения, используя ресурсы разработчика для потоков данных и Azure.

## <a name="requirements"></a>Требования
Чтобы использовать Azure Data Lake Storage 2 поколения для потоков данных, требуется следующее:
- Среда PowerApps. Любой план PowerApps позволяет создавать потоки данных с Azure Data Lake Storage 2 поколения в качестве места назначения. Вы должны быть авторизованы в среде как разработчик. 
- Подписка Azure. Для использования Azure Data Lake Storage 2 поколения необходима подписка Azure.
- Группа ресурсов. Используйте уже имеющуюся группу ресурсов или создайте новую.
- Учетная запись службы хранилища Azure. Учетная запись хранения должна иметь функцию Data Lake Storage 2 поколения.

> [!TIP]
> Если у вас нет подписки Azure, [создайте бесплатная учетная запись](https://azure.microsoft.com/free/) прежде чем приступить к работе.

## <a name="prepare-your-azure-data-lake-storage-gen2-for-power-platform-dataflows"></a>Подготовка Azure Data Lake Storage 2 поколения для потоков данных Power Platform
Перед настройкой среды с учетной записью Azure Data Lake Storage 2 поколения необходимо создать и настроить учетную запись хранения. Вот требования для потоков данных Power Platform:
1.  Учетная запись хранения необходимо создавать в том же клиенте Azure Active Directory, что и ваш клиент PowerApps.
2.  Рекомендуется создать учетную запись хранения в том же регионе, что и среда PowerApps, в которой вы планируете ее использовать. Чтобы определить расположение среды PowerApps, обратитесь к администратору среды.
3.  Учетная запись хранения должна иметь включенную функцию иерархического пространства имен.
4.  Вам должна быть предоставлена роль Владельца в учетной записи хранения.

В следующих разделах описаны шаги, необходимые для настройки учетной записи Azure Data Lake Storage 2 поколения.

## <a name="create-the-storage-account"></a>Создание учетной записи хранения
Выполните шаги, описанные в разделе [Создание учетная запись хранения Azure Data Lake Storage 2 поколения](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-quickstart-create-account).
1.  Убедитесь, что вы выбрали тот же регион, что и у среды, и задали хранилище как StorageV2 (общего назначения v2).
2.  Убедитесь, что вы включили функцию иерархического пространства имен. 
3.  Рекомендуется установить для параметра репликации значение геоизбыточного хранилища с доступом для чтения (RA-GRS).

## <a name="connect-your-azure-data-lake-storage-gen2-to-powerapps"></a>Подключите Azure Data Lake Storage 2 поколения к PowerApps
После настройки учетной записи Azure Data Lake Storage 2 поколения портале Azure, вы готовы подключить ее к определенному потоку данных или среде PowerApps. Подключение озера данных к среде позволяет другим разработчикам и администраторам в среде создавать потоки данных, которые также хранят свои данные в озере данных организации. 

Чтобы подключить учетную запись Azure Data Lake Storage 2 поколения к потоку данных, выполните следующие действия:
1.  Выполните вход в [PowerApps](https://make.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc), и проверьте, в какой среде вы находитесь. Переключатель среды находится на правой стороне заголовка. 
2. В левой области навигации выберите стрелку вниз рядом с **Данными**.

   ![Вкладка д"Данные" портала разработчика PowerApps](media/powerapps-portal-data.png)

3. В появившемся списке выберите **Потоки данных** а затем в командной строке выберите **Новый поток данных**.

   ![Создать новый поток данных](media/new-dataflow.png) 

4. Выберите требуемые аналитические сущности. Эти сущности отображают какие данные нужно хранить в учетной записи Azure Data Lake Store 2 поколения организации. 

   ![Выберите аналитические сущности](media/select-analytical-entities.png)

## <a name="select-the-storage-account-to-use-for-dataflow-storage"></a>Выберите учетная запись хранения для использования для хранения потока данных
Если учетная запись хранилища еще не была связана со средой, появится диалоговое окно **Связать с озером данных**. Вам потребуется выполнить вход и найти озеро данных, которое вы создали в предыдущих шагах. В этом примере ни одно озеро данных не связано со средой, поэтому возникает запрос на его добавление. 


1. Выберите учетную запись хранилища.

    Открывается экран **Выберите учетную запись хранилища**.
    
    ![Выберите учетную запись хранилища](media/select-storage-account.png)
    
2. Выберите **Идентификатор подписки** учетной записи хранения.
3. Выберите **Имя группы ресурсов**, в которой была создана учетная запись хранения.
4. Введите **Имя учетной записи хранилища**.
5. Нажмите кнопку **Сохранить**.

После того как эти шаги успешно выполнены, ваша учетная запись Azure Data Lake Storage 2-го поколения подключена к потокам данных Power Platform и вы можете продолжить создавать поток данных.

## <a name="considerations-and-limitations"></a>Рекомендации и ограничения
Имеется ряд рекомендаций и ограничений, которые необходимо учитывать при работе с хранилищем потока данных:
- Связывание учетной записи Azure Data Lake Store 2-го поколения для хранилища потока данных не поддерживается в среде по умолчанию.
- После того как местоположение хранилища потока данных настроено для потока данных, его нельзя изменить.
- По умолчанию любой участник среды может получить доступ к данным потока данных с помощью соединителя потоков данных Power Platform. Однако только владельцы потока данных имеют доступ к файлам непосредственно в Azure Data Lake Storage 2-го поколения. Чтобы разрешить дополнительным пользователям доступ к потокам данных непосредственно в озере, необходимо разрешить им доступ к **папке CDM** в озере данных Data Lake или к самому озеру данных Data Lake.
- При удалении потока данных его **папка CDM** в озере также удаляется. 

> [!IMPORTANT]
> Вы не должны изменять файлы, созданные потоками данных в озере организации, или добавлять файлы в **папку CDM** потока данных. Изменение файлов может повредить потоки данных или изменить их поведение и не поддерживается. Потоки данных Power Platform предоставляют только права доступа на чтение к файлам, создаваемым ими в озере. Если вы уполномочиваете других пользователей или сервисы для файловой системе, используемой в потоках данных Power Platform, предоставляйте им только доступ на чтение к файлам или папки в этой файловой системе.

## <a name="frequently-asked-questions"></a>Вопросы и ответы
*Что если я ранее создал потоки данных в Azure Data Lake Storage 2-го поколения моей организации и хотел бы изменить их место хранения?*

   Нельзя менять место хранения потока данных после его создания.

*Когда можно изменить место хранения потока данных среды?*

   Изменение места хранения потока данных среды в настоящее время не поддерживается. 

## <a name="next-steps"></a>Дальнейшие шаги
Эта статья содержит инструкции о том, как подключить учетную запись Azure Data Lake Storage 2-го поколения для хранилища потока данных. 

Дополнительные сведения о потоках данных, Common Data Model и Azure Data Lake Storage 2-го поколения см. в следующих статьях:
- [Самостоятельная подготовка данных с потоками данных](https://go.microsoft.com/fwlink/?linkid=2099972)
- [Создание и использование потоков данных в PowerApps](https://go.microsoft.com/fwlink/?linkid=2100076)
- [Подключение Azure Data Lake Storage 2-го поколения для хранения потока данных](https://go.microsoft.com/fwlink/?linkid=2099973)
- [Добавление данных в сущность в Common Data Service](https://go.microsoft.com/fwlink/?linkid=2100075)

Дополнительные сведения о службе хранилища Azure см. в этой статье:
- [Руководство по безопасности службы хранилища Azure](https://docs.microsoft.com/azure/storage/common/storage-security-guide)

Дополнительные сведения о Common Data Model см. в следующих статьях:
- [Common Data Model — обзор](https://docs.microsoft.com/powerapps/common-data-model/overview) 
- [Папки Common Data Model](https://go.microsoft.com/fwlink/?linkid=2045304)
- [Определение файла модели CDM](https://go.microsoft.com/fwlink/?linkid=2045521)

Можно задавать вопросы в [сообществе PowerApps](https://go.microsoft.com/fwlink/?linkid=2099971).
