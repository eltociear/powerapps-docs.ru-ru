---
title: Настройка ролей подключения | MicrosoftDocs
ms.custom: ''
ms.date: 02/11/2020
ms.reviewer: ''
ms.service: powerapps
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- PowerApps
ms.author: matp
manager: kvivek
author: Mattp123
search.audienceType:
- maker
search.app:
- PowerApps
- D365CE
ms.openlocfilehash: 0827acf9d7699e6bf88374d57a6e5218e3000ef5
ms.sourcegitcommit: 2b34de88c977c149e4c632b23d8e816901c15949
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/12/2020
ms.locfileid: "3040523"
---
# <a name="configure-connection-roles"></a>Настройка ролей подключения

В Common Data Service можно определить **подключения** между записями сущностей, не создавая отношение сущностей. В управляемых моделью приложениях пользователи могут установить связь с именем между записями для создания менее формального отношения, которое не оправдывает создание фактического отношения сущностей. К некоторым примерам относятся *друг*, *брат/сестра*, *супруг(а)*, *участник* и *заинтересованное лицо*. Некоторые подключения также могут быть двусторонними, например *ребенок* и *родитель*, *муж* и *жена* или *доктор* и *пациент*.

Когда пользователь создает подключение между двумя записями, он также может добавить описание и дополнительные сведения, такие как даты начала и окончания отношения. Дополнительные сведения: [Создание подключений для определения и просмотра отношений между записями](/dynamics365/customer-engagement/basics/create-connections-view-relationships-between-records).

Любой пользователь с правами на запись для сущности **Роль подключения** может установить, какие подключения будут доступны для использования пользователями.

> [!IMPORTANT]
> Чтобы сущность была доступна в качестве типа записей для новой или существующей роли подключения, свойство **Включить подключения** должно быть включено для этой сущности. 

## <a name="enable-connection-roles-for-an-entity"></a>Включение ролей подключения для сущности
1. Выполните вход в [Power Apps](https://make.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc). 
2. Разверните **Данные**, затем выберите **Сущности**. 
3. Выберите сущность, которую необходимо включить для ролей подключения, затем на панели команд выберите **Параметры**. 
4. В области **Параметры** разверните область **Совместная работа**, затем выберите **Включить подключения**.
    > [!div class="mx-imgBorder"] 
    > ![Настройка включения подключений](media/enable-connections.png "Настройка включения подключений")

6. Выберите **Готово**. 

## <a name="view-connection-roles"></a>Просмотр ролей подключения

В Common Data Service для приложений уже настроено несколько стандартных ролей подключения.  

1. Войдите в [Power Apps](https://make.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc), затем в левой области выберите **Решения**. 
2. Откройте неуправляемое решение, которое вы хотите. 
3. На панели команд выберите **Добавить существующий**, затем выберите **Роль подключения**. 
   Отображается список доступных ролей подключения. 
4. Выберите **Отмена**, чтобы закрыть диалоговое окно **Добавить существующие роли подключения** без добавления роли подключения к решению.

> [!NOTE]
> - Если необходимо распространить роли подключения с решением, убедитесь, что они включены в решение, которое требуется распространить. Дополнительные сведения: [Добавление ролей подключения в решение](#add-connection-roles-to-a-solution)

### <a name="view-and-edit-connection-roles-using-the-classic-experience"></a>Просмотр и редактирование ролей подключения, используя классический интерфейс

Большинство ролей подключения, которые отображаются в области **Параметры** определены во *внутреннем* **решении по умолчанию** (не путать с **решением по умолчанию служб Common Data Services**). Это внутренне **Решение по умолчанию** содержит все настройки в системе. Чтобы просмотреть **Решение по умолчанию**, выберите представление **Все решения — внутренние**. 

1. Выполните вход в [Power Apps](https://make.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc), затем на панели команд выберите **Параметры** ![Параметры](media/powerapps-gear.png), затем выберите **Дополнительные параметры**.
2. Перейдите в раздел **Параметры** > **Бизнес** > **Управление бизнесом** и выберите **Роли подключения**.

   > [!div class="mx-imgBorder"] 
   > ![Роли подключения в параметрах "Управление бизнесом"](media/navigate-settings-connection-roles.png "Роли подключения в параметрах "Управление бизнесом"")

В этом представлении можно просмотреть все роли подключения, доступные для этой среды, и изменить их.

## <a name="add-connection-roles-to-a-solution"></a>Добавление ролей подключения в решение
Поскольку роли подключения *поддерживают решения*, то есть их можно включить в решение, роли подключения также можно добавить в распространяемое решение.

Обычно не рекомендуется добавлять компоненты во внутреннее **Решение по умолчанию**. В решении, созданном для работы, можно использовать команду **Добавить существующий** в области **Решения**, чтобы добавить любую активную роль подключения в решение.

> [!div class="mx-imgBorder"] 
> ![Добавление существующей роли подключения](media/add-existing-connection-role.png)

После добавления роли подключения в решение ее можно изменить там, где она отображается.

> [!NOTE]
> Состояние роли подключения не включается в роль подключения при ее экспорте из решения. Поэтому, когда решение импортируется в целевую среду, состояние по умолчанию становится активным. 


## <a name="create-a-connection-role"></a>Создание роли подключения

> [!IMPORTANT]
> Если вы планируете распространить решение, включающее новые роли подключения или изменения в существующих ролях подключения, необходимо добавить их в распространяемое решение. Изменение или добавление новых ролей подключения с помощью области **Параметры** приведет к добавлению этих ролей подключения во внутреннее **Решение по умолчанию**, и они не будут включены в распространяемое решение, пока вы сначала не добавите их в свое решение. Дополнительные сведения: [Добавление ролей подключения в решение](#add-connection-roles-to-a-solution)

1. Войдите в [Power Apps](https://make.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc), затем в левой области выберите **Решения**. 
2. Откройте требуемое неуправляемое решение, затем на панели команд выберите **Создать** > **Другое** > **Роль подключения**. 
3. Выполните три шага в форме, чтобы [описать роль подключения](#describe-the-connection-role).

   > [!div class="mx-imgBorder"] 
   > ![Форма "Создание роли подключения"](media/create-connection-role-form.png)

### <a name="describe-the-connection-role"></a>Описание роли подключения

Задайте следующие поля:

|Поле|Описание|
|--|--|
|**Название**|(Обязательно) Текст, описывающий подключение.|
|**Категория роли подключения**|Группа, описывающая категорию подключения. Дополнительные сведения: [Значения категории роли подключения](#connection-role-category-values)|
|**Описание**|Предоставьте определение для роли.|

#### <a name="connection-role-category-values"></a>Значения категории роли подключения

Значения **Категория роли подключения** по умолчанию могут быть следующими:
- Бизнес
- Семья
- Соцсети
- Sales
- Прочее
- Заинтересованное лицо
- Группа продаж
- Сервис

Можно добавлять новые или изменять существующие категории, изменяя глобальный набор параметров **Категория**. Дополнительные сведения: [Создание и изменение глобального набора параметров для Common Data Service (списки выбора)](create-edit-global-option-sets.md)

#### <a name="select-record-types"></a>Выбор типов записей

Выберите, какие типы записей должны быть доступны для подключения.

> [!NOTE]
> Хотя значение **Все** выбрано по умолчанию, убедитесь, что вы знаете, какие типы являются подходящими для добавляемой роли подключения.

#### <a name="matching-connection-roles"></a>Сопоставление ролей подключения

На данном дополнительном шаге можно определить роли, которые будут применяться взаимно. Это не обязательно, но подключения имеют больше смысла, если это определить.

Например, пользователь может установить, что Glen имеет отношение *Друг* для Mary, но значит ли это, что Mary имеет отношение *Friend* для Glen? Мы надеемся на это. Но если Glen имеет отношение *Отец* для Mary, это не значит, что Mary имеет отношение *Отец* для Glen. Для установки правильной взаимозависимости требуется выполнить этот дополнительный шаг.

Когда пользователь задает роль подключения, у которой нет соответствующей роли подключения, роль будет отображаться только при просмотре подключения из записи, к которой применено подключение. При просмотре из связанной записи эта роль будет пуста, если не задать соответствующую роль.

Для определений ролей, таких как *Друг*, *Партнер*, *Коллега* или *Брат/сестра*, рекомендуется назначить соответствующую роль самой себе. Если настроена одна соответствующая роль подключения, одна соответствующая роль подключения будет применена в обоих направлениях.

> [!IMPORTANT]
> Необходимо сохранить новую роль подключения без соответствующей роли подключение, прежде чем можно будет задать соответствующую роль подключения самой себе.

Некоторые роли подключения уже настроены с соответствующими ролями подключения. Роль *Бывший сотрудник* соответствует роли *Бывший работодатель* и наоборот. Этот тип соответствующей роли подключения "один-к-одному" самый распространенный.

Можно настроить несколько соответствующих ролей подключения для описания сложных отношений. Если вы создаете роль подключения, например *Отец*, вы можете настроить еще две роли, такие как *Дочь* и *Сын*, и применить обе роли как соответствующие роли подключения к роли *Отец*. В свою очередь, роли подключения *Дочь* и *Сын* следует сопоставить с ролью *Отец*. Конечно же, затем необходимо настроить эквивалентную роль для роли *Мать*, которая аналогично будет сопоставлена с ролями *Дочь* и *Сын*.

> [!TIP]
> Прежде чем создавать сложный набор ролей подключения, подумайте о создании более простого набора ролей. Например, вместо создания сложного набора ролей подключения, таких как *Отец*, *Мать*, *Сын* и *Дочь*, используйте просто роли *Родитель* и *Ребенок*.

Если настроено несколько соответствующих ролей подключения, эти роли подключения представляют собой единственные допустимые взаимные роли. Первая роль будет применена автоматически как роль по умолчанию. Если значение по умолчанию неправильное, пользователи должны вручную отредактировать подключение и выбрать между допустимыми параметрами, определенными в конфигурации.

### <a name="see-also"></a>См. также
<!-- This is in the basics guide. It needs to be migrated -->
[Создание соединений для определения и просмотра отношений между записями](/dynamics365/customer-engagement/basics/create-connections-view-relationships-between-records)<br />
[Создание и изменение наборов глобальных параметров для Common Data Service (списки выбора)](create-edit-global-option-sets.md)<br />
[Создание и изменение отношений между сущностями](create-edit-entity-relationships.md)


