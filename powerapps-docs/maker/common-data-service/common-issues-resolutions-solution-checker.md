---
title: Общие проблемы и их разрешение для средства проверки решений | Документация Майкрософт
description: " Список общих проблем и их разрешения для средства проверки решений"
keywords: ''
ms.date: 02/11/2019
ms.service: powerapps
ms.custom:
- ''
ms.topic: article
ms.assetid: caa4e3f2-9700-49b8-87ed-8a68e8878b02
author: jowells1
ms.author: jowells
manager: austinj
ms.reviewer: ''
robots: noindex,nofollow
search.audienceType:
- developer
search.app:
- PowerApps
- D365CE
ms.openlocfilehash: cf8fdf1b14ef7bbc503c49fac217bb071bd56305
ms.sourcegitcommit: 4f2e9e8f9bd3204ca9eee9e2a46f797c957c55ec
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2020
ms.locfileid: "3029781"
---
# <a name="common-issues-and-resolutions-for-solution-checker"></a>Общие проблемы и их разрешение для средства проверки решений

В данной статье перечислены некоторые общие проблемы, которые могут возникнуть при использовании средства проверки решений. Где применимо, представлены временные способы решения.

## <a name="youre-unable-to-use-solution-checker-to-run-analysis-or-download-results"></a>Вы не можете использовать средство проверки решений для выполнения анализа или загрузки результатов

Вскоре после отправки запроса средства проверки решения на выполнение анализа или загрузки результатов эта операция не выполняется и появляется сообщение об ошибке, например:

> *"Не удалось выполнить проверку для решения **[Имя решения]**. Попробуйте запустить повторно".*

Если возможно, средство проверки решений пытается вернуть конкретное сообщение об ошибке, содержащее ссылку на сведения о потенциальной причине и шаги по разрешению. Выберите **Подробнее** для получения дополнительных сведений.

![Шкала сообщения об ошибке](media/solution-checker-missing-roles-error.png)

Сбои, которые происходят во время фоновой обработки анализа, происходят со статусом **Не удалось завершить** и возвращают сообщение об ошибке в портал Power Apps, а также отправляют уведомление по электронной почте пользователю, обратившемуся с запросом.

![Статус ошибки](media/solution-checker-exception-status.png)

Выбор уведомления портала связывает с этой страницей общих проблем для дальнейшего устранения неисправностей. Если одна из представленных распространенных проблем проблему не поможет, то также возвращается ссылочный номер. Передайте этот ссылочный номер в службу поддержки Майкрософт для дальнейшего расследования.

![Уведомление о сбое](media/solution-checker-failure-notification.png)

## <a name="solution-checker-fails-due-to-unsupported-version-of-power-apps-checker"></a>Средство проверки решений завершается сбоем из-за неподдерживаемой версии средства проверки Power Apps

Средство проверки решений обеспечивается приложением "Средство проверки Power Apps".  Если установлена версия приложения средства проверки Power Apps до версии **1.0.0.47**, работа средства проверки решений может не завершаться успешно. Необходимо выполнить обновление версии средства проверки Power Apps из [!INCLUDE [pn-dyn-365-admin-center](../../includes/pn-dyn-365-admin-center.md)].

Однако если установлена версия средства проверки Power Apps до версии **1.0.0.45**, рекомендуется удалить решение и установить его снова. В связи с недавними изменения схем обновление средства проверки Power Apps с версий до версии **1.0.0.45** может закончиться неудачей.

Если требуется сохранить прошлые результаты из средства проверки решений, экспортируйте результаты из предыдущих выполнений или экспортируйте все данные средства проверки решений с помощью функции [Экспорт данных в Excel](../../user/export-data-excel.md), чтобы экспортировать данные из следующих сущностей:

- Компонент анализа
- Задание анализа
- Результат анализа
- Подробность результата анализа

### <a name="how-to-uninstall-power-apps-checker"></a>Как удалить средство проверки Power Apps

Чтобы удалить решение средства проверки Power Apps:

1. Как системный администратор или настройщик системы, откройте портал Power Apps, перейдя по адресу https://make.powerapps.com/environments.
2. Выберите **Решения**.
3. Выберите **Средство проверки Power Apps**, затем на панели инструментов решений выберите **Удалить**.

### <a name="how-to-install-power-apps-checker"></a>Как установить средство проверки Power Apps

Чтобы установить средство проверки Power Apps обратно в среду Common Data Service:

1. Как системный администратор или настройщик системы, откройте портал Power Apps, перейдя по адресу https://make.powerapps.com/environments.
2. Выберите **Решения**.
3. На панели инструментов выберите **Средство проверки**, затем выберите **Установить**.

## <a name="solution-checker-cant-access-organizations-in-administration-mode"></a>Средство проверки решений не может получить доступ к организациям в режиме администрирования

Организации, которые были переведены в [режим администрирования](https://docs.microsoft.com/dynamics365/customer-engagement/admin/manage-sandbox-instances#administration-mode), нарочно ограничивают доступ только пользователями с ролями системного администратора или специалиста по настройке системы. Поскольку идентификатору приложения средства проверки Power Apps по умолчанию не назначена ни одна из этих ролей, оно не может получить доступ к организациям, работающим в этом режиме.

Чтобы использовать средство проверки решений в этой организации режим администрирования должен быть отключен.

### <a name="how-to-disable-administration-mode"></a>Отключение режима администрирования

Чтобы отключить режим администрирования для экземпляра организации:

1. Открыть экземпляр Dynamics 365: https://port.crm.dynamics.com/G/Instances/InstancePicker.aspx.
2. Выберите экземпляр организации, имеющий проблемы выполнения средства проверки решений.
3. Выберите **ADMIN**.

![Администратор экземпляра](media/solution-checker-instance-admin.png)

4. Снимите флажок **Включить режим администрирования**, затем выберите **Сохранить**.

![Отключение режима администрирования](media/solution-checker-instance-disable-admin-mode.png)

5. Снова запустите средство проверки решений.

## <a name="solution-checker-fails-due-to-missing-security-roles"></a>Работа средства проверки решений завершается ошибкой из-за отсутствия ролей безопасности

Пользователю приложения для средства проверки решений требуется две назначенные роли безопасности для предоставления необходимых привилегий для связи с организацией Common Data Service. Если одна из этих ролей не назначена пользователю **Средство проверки Power Apps**, попытки выполнить анализ, загрузить результаты и выполнить отмену закончатся неудачей. Так происходит наиболее часто, когда у клиентов действует автоматизация, которая удаляет роли безопасности у неожиданных пользователей. Следующие роли безопасности содержат минимальные необходимые разрешения:

- Экспорт настроек
- Средство проверки решений

### <a name="how-to-assign-missing-security-roles"></a>Назначение отсутствующих ролей безопасности

Чтобы назначить отсутствующие роли безопасности пользователю средства проверки Power Apps:

1. Откройте организацию Common Data Service и перейдите к **Параметры** > **Безопасность** > **Пользователи**.
2. Выберите пользователя **Средство проверки Power Apps** в списке пользователей.
3. Выберите **УПРАВЛЕНИЕ РОЛЯМИ** на панели команд.
4. Установите флажки ролей **"Экспортировать настройки"** и **"Средство проверки решений"**, затем выберите **ОК**.

![Требуемые роли безопасности](media/solution-checker-required-roles.png)

5. Снова запустите средство проверки решений.

## <a name="solution-checker-fails-due-to-restricted-access-mode"></a>Работа средства проверки решений завершается ошибкой из-за режима ограниченного доступа

Пользователю приложения для средства проверки решений требуется режим доступа **"Неинтерактивная"** или **"Чтение и запись"** для связи с этой организацией Common Data Service. Если режим доступа был изменен на другое значение, например **"Административный"**, то попытки выполнить анализ, загрузить результаты и отменить выполнение закончатся неудачей.

Чтобы устранить эту проблему, необходимо обновить пользователя приложения **Средство проверки Power Apps** с режимом доступа "Неинтерактивный".

### <a name="how-to-update-user-access-mode"></a>Как обновить режим доступа пользователей

Чтобы обновить режим доступа для пользователя средства проверки Power Apps:

1. Откройте организацию Common Data Service и перейдите к **Параметры** > **Безопасность** > **Пользователи**.
2. Выберите пользователя **Средство проверки Power Apps** из списка пользователей и дважды щелкните, чтобы открыть форму пользователя.
3. Прокрутите форму до раздела **"Администрирование"** > **"Сведения о клиентской лицензии (CAL)"**.
4. Выберите **"Неинтерактивная"** в раскрывающемся элементе управления **Режим доступа**.

![Режим доступа](media/solution-checker-access-mode.png)

5. Сохраните и закройте форму пользователя.
6. Снова запустите средство проверки решений.

## <a name="solution-checker-fails-due-to-disabled-application-user"></a>Средство проверки решений завершается ошибкой из-за отключенного пользователя приложения

Пользователь приложения средства проверки Power Apps в организации Common Data Service, содержащей решения для анализа, должен быть включен. Если пользователь приложения отключается, запросы на анализ решений в той же организации не будут выполняться. При получении этого сообщения об ошибке сначала убедитесь, что пользователь приложения средства проверки Power Apps действительно отключен. Затем выполните действия по смягчению последствий, приведенные ниже.

![Состояние "пользователь отключен"](media/solution-checker-disabled-application-user.png)

### <a name="how-to-enable-the-power-apps-checker-application-user"></a>Как включить пользователя приложения средства проверки Power Apps

1. В центре администрирования Power Platform выберите среду и перейдите **Параметры** > **Разрешения пользователей**  > **Пользователи**.
2. В представлении **Пользователи приложения** установите флажок рядом с пользователем приложения средства проверки Power Apps.
3. На панели инструментов "Действия" щелкните **Включить**.

![Включить пользователя из представления](media/solution-checker-enable-application-user-view.png)

4. В сообщении **Подтверждение активации пользователя** нажмите **Активировать**.
5. Альтернативный подход — открыть форму пользователя приложения и выбрать состояние **Включено** в нижнем колонтитуле формы. **Сохраните** изменения.

![Включить пользователя из формы](media/solution-checker-enable-application-user-form.png)

## <a name="common-plugin-conditions-that-cause-solution-checker-to-fail"></a>Общие условия подключаемого модуля, которые вызывают сбой средства проверки решения

Когда средство проверки решений получает и обрабатывает запросы на анализ, оно должно вызвать конечную точку Common Data Service для извлечения или обновления соответствующих данных задания и экспорта выбранных решений. Каждое взаимодействие, выполняемое службой средства проверки решений с Common Data Service может потенциально вызвать один или несколько шагов плагина, которые были зарегистрированы в сообщении, отправленном в запросе. Эти подключаемые модули могут, в свою очередь, вводить условия, препятствующие обработке сообщения, как ожидается в Common Data Service, и убрать возможность средства проверки решений обрабатывать запрошенное задание анализа. Подобные ситуации могут возникать при загрузке результатов задания средства проверки решения или отмене выполняемого анализа.

Типичные операции Common Data Service, запрошенные средством проверки решенияоперация:

- Извлечение решения, systemuser и данные сущности организации
- Создание, обновление и извлечение задания анализа, компонента анализа и данных сущности результата анализа
- Экспорт решений

### <a name="plugin-step-registered-to-execute-in-context-of-a-unlicensed-user"></a>Шаг подключаемого модуля, зарегистрированный для выполнения в контексте нелицензированного пользователя

Когда средство проверки решений дает сбой из-за исключения "нелицензированный пользователь", оно часто вызвано триггерным шагом подключаемого модуля, настроенным для выполнения в контексте определенного системного пользователя, который в настоящее время не лицензирован. Убедитесь, что все шаги подключаемого модуля, которые могут быть вызваны средством проверки решения, выполняются в контексте лицензированного пользователя.

>[!IMPORTANT]
>Настоятельно рекомендуется, чтобы шаги подключаемого модуля были сконфигурированы для выполнения в контексте вызывающего пользователя, а не конкретных пользователей, лицензия которых может быть отозвана.

### <a name="plugin-step-performs-operations-that-require-privileges-not-granted-to-power-apps-checker-application-user"></a>Шаг подключаемого модуля выполняет операции, которые требуют привилегий, не предоставленных пользователю приложения средства проверки Power Apps

В случае сбоя средства проверки решения не удается из-за отказа в доступе Common Data Service на основе отсутствующей привилегии, это часто вызывается триггерным шагом подключаемого модуля, который выполняет операции, которые требуют привилегий, которые в данный момент не предоставлены пользователю приложения средства проверки Power Apps. Либо перенастройте шаг подключаемого модуля, чтобы он не выполнялся в операции, вызванной средством проверки решений, либо предоставьте пользователю приложения средства проверки Power Apps необходимые привилегии для выполнения настраиваемого шага подключаемого модулярешение.

### <a name="plugin-step-unexpectedly-interrupts-execution-by-throwing-invalidpluginexecutionexception"></a>Шаг подключаемого модуля неожиданно прерывает выполнение, выдавая InvalidPluginExecutionException

При сбое средства проверки решения из-за ошибки "Прерванный код ISV", был запущен шаг подключаемого модуля, который явно прервал выполнение, вызывая исключение InvalidPluginExcecutionException. Либо переконфигурируйте шаг подключаемого модуля, чтобы он не выполнялся в операции, вызванной средством проверки решения, либо настройте реализацию подключаемого модуля, чтобы не прерывать выполнение в соответствии с условиями, представленными средством проверки решения.

## <a name="solution-checker-fails-due-to-disabled-first-party-application-in-aad"></a>Средство проверки решений завершается ошибкой из-за отключенного приложения первой партии в AAD

Идентификатор корпоративного приложения первой партии, используемый средством проверки решений (PowerApps-Advisor) не должен быть отключен в Azure Active Directory (AAD). Если он отключен, идентификатор не может пройти проверку подлинности при запросе токенов носителя для Common Data Service и других необходимых поставщиков ресурсов от лица запрашивающего пользователя.

Следуйте инструкциям внизу, чтобы проверить, что удостоверение приложения не отключено в AAD и, если необходимо, для включения приложения.

### <a name="how-to-verify-andor-modify-application-enabled-status"></a>Как проверить и/или изменить статус включения приложения

Чтобы проверить и/или изменить статус включения удостоверения приложения предприятия PowerApps-Advisor

1. Получите доступ к клиенту на [портале Azure Active Directory (AAD)](https://aad.portal.azure.com/).
2. Перейдите в раздел **Приложения Enterprise**.
3. Выберите **Все приложение** и выполните поиск **PowerApps-Advisor**.

![Найдите приложение PowerApps-Advisor](media/solution-checker-search-advisor-app.png)

4. Выберите **PowerApps-Advisor**, чтобы просмотреть сведения приложения.
5. Выберите **Свойства**.
6. Проверьте статус **Включен ли вход для пользователей**. Если **"Нет"**, то приложение отключено.

![Отключенное корпоративное приложение](media/solution-checker-disabled-app.png)

7. Выберите переключатель, чтобы переключиться на значение **"Да"**. Это включает приложение.

![Включение приложение PowerApps-Advisor](media/solution-checker-enable-app.png)

8. Нажмите кнопку **Сохранить**. Приложение теперь включено. Может потребоваться подождать несколько минут, пока изменение не распространится.
9. Снова запустите средство проверки решений.

> [!IMPORTANT]
> Необходимо иметь права администратора в Azure Active Directory (AAD) для редактирования приложений предприятия.

## <a name="solution-checker-fails-to-export-solutions-with-draft-business-process-flow-components"></a>Средству проверки решений не удается экспортировать решения с черновиками компонентов последовательности операций бизнес-процесса

Если решение содержит компонент последовательности операций бизнес-процесса в состоянии "черновик", который никогда ранее не была активизирован, средство проверки решений не сможет экспортировать решение для анализа. Эта ошибка не уникальна для средства проверки решений и вызывается тем, что последовательность операций бизнес-процесса имеет зависимости для базового (настраиваемого) компонента сущности, который не создается, пока последовательность операций бизнес-процесса не будет активирована в первый раз. Эта проблема также может возникнуть, если последовательность операций бизнес-процесса активирована в обозревателе решений.

Сведения об этой проблеме и порядке ее устранения см. в [статье базы знаний №4337537: Недопустимый экспорт — отсутствует сущность бизнес-процесса](https://support.microsoft.com/en-hk/help/4337537/invalid-export-business-process-entity-missing).

## <a name="solution-checker-fails-to-export-patched-solutions"></a>Средству проверки решений не удается экспортировать исправленные решения

Если к решению было применено [исправление](https://docs.microsoft.com/powerapps/developer/common-data-service/create-patches-simplify-solution-updates), средство проверки решений не сможет экспортировать решение для анализа. Когда к решению было применено исправление, первоначальное решение будет заблокировано, и его нельзя изменить или экспортировать, если имеются зависимые исправления в организации, которые определяют это решение как родительское решение.

Для исправления этой проблемы клонируйте решение, чтобы все исправления, связанные с решением, были свернуты во вновь созданное решение. Это разблокирует решение и позволит экспортировать решение из системы.  Дополнительные сведения см. в разделе [Клонирование решения](use-segmented-solutions-patches-simplify-updates.md#clone-a-solution).

## <a name="solution-checker-will-not-analyze-empty-solutions"></a>Средство проверки решений не анализирует пустые решения

Если средство проверки решений экспортирует решение, которое не содержит компоненты для анализа, оно прекратит дальнейшую обработку и будет считать выполнение неудачным. Убедитесь, что выбранное решение, отправленное для анализа в средство проверки решений, содержит по крайней мере один компонент.

## <a name="solution-checker-fails-to-export-large-solutions"></a>Средству проверки решений не удается экспортировать большие решения

Основной сценарий для сбоя экспорта большого решения из среды Common Data Service включает исключение истечения времени ожидания для запроса экспорта. Это произойдет, если запрос превышает 20 минут. Большие решения, такие как решение по умолчанию, могут не успеть экспортироваться в течение этого времени, и проверка не завершится успешно. Если средство проверки решений столкнется с истечением времени ожидания во время экспорта, оно выполнит три попытки перед сбоем обработки задания, поэтому вы можете получить уведомление об ошибке только через час или более.

Обходное решение — создать меньшие решения с меньшим числом компонентов, которые требуется проанализировать. Если большой размер файла решения связан с большим числом компонентов подключаемой сборки, см. указания в разделе [Оптимизация разработки пользовательских сборок](../../developer/common-data-service/best-practices/business-logic/optimize-assembly-development.md).

> [!IMPORTANT]
> Чтобы свести к минимуму ложные срабатывания, обязательно добавляйте зависимые настройки. При создании решения и добавлении таких компонентов включайте следующее:
> - При добавлении подключаемых модулей включите шаги обработки сообщения SDKдля подключаемого модуля.
> - При добавлении форм сущностей включите веб-ресурсы JavaScript, прикрепленные к событиям формы.  
> - При добавлении веб-ресурсов JavaScript включите все зависимые веб-ресурсы JavaScript.
> - При добавлении веб-ресурсов HTML включить все зависимые сценарии, которые определены в веб-ресурсе HTML.
> - При добавлении пользовательских бизнес-процессов включите сборку, используемую в бизнес-процессе.

## <a name="line-number-references-for-issues-in-html-resources-with-embedded-javascript-are-not-correct"></a>Ссылки по номерам строк для проблем в ресурсах HTML с внедренным кодом JavaScript неправильные

Когда веб-ресурсы HTML обрабатываются в средстве проверки решений, веб-ресурс HTML обрабатывается отдельно от кода JavaScript в веб-ресурсе HTML. В связи с этим номер строки нарушения, найденного внутри элемента `<script>` веб-ресурса HTML, будет неправильным.

## <a name="web-unsupported-syntax-issue-for-web-resources"></a>Проблема неподдерживаемого в интернете синтаксиса для веб-ресурсов

Версии ECMAScript 6 (2015) или более поздние в настоящее время не поддерживаются для средства проверки решений. Когда средство проверки решений анализируйте JavaScript с использованием ECMAScript 6 или выше, возникает сообщение об ошибке поддерживаемого в интернете синтаксиса для веб-ресурса.  

## <a name="multiple-violations-reported-for-plug-ins-and-workflow-activities-based-on-call-scope"></a>Несколько нарушений, сообщенных для подключаемых модулей и действий бизнес-процессов на основе области вызова

Для подключаемого модуля и правил действия бизнес-процесса, в которых проблема относится только к контексту вызова, средство проверки решения начинает анализ с реализации интерфейса IPlugin и перебирает граф вызовов для обнаружения проблем в рамках области данной реализации.  В некоторых случаях многие пути вызовов могут приводить в одно и то же место, в котором проблема обнаружена.  Поскольку проблема связана с областью вызова, средство может сообщать на основе этой области, чтобы давать лучшую картину влияния, а не просто на основе отдельных мест. Поэтому несколько проблем могут указывать на одно расположение, который должно быть исправлено.

## <a name="see-also"></a>См. также

[Рекомендации и инструкции для Common Data Service](../../developer/common-data-service/best-practices/index.md)

[Рекомендации и советы для управляемых моделью приложений](../../developer/model-driven-apps/best-practices/index.md)
