---
title: Общие проблемы и их разрешение для средства проверки решений | Microsoft Docs
description: ' Список общих проблем и их разрешения для средства проверки решений'
keywords: ''
ms.date: 02/11/2019
ms.service: powerapps
ms.custom:
  - ''
ms.topic: article
ms.assetid: caa4e3f2-9700-49b8-87ed-8a68e8878b02
author: jowells1
ms.author: jowells
manager: austinj
ms.reviewer: null
robots: 'noindex,nofollow'
search.audienceType:
  - developer
search.app:
  - PowerApps
  - D365CE
---
# <a name="common-issues-and-resolutions-for-solution-checker"></a>Общие проблемы и их разрешение для средства проверки решений

В данной статье перечислены некоторые общие проблемы, которые могут возникнуть при использовании средства проверки решений. Где применимо, представлены временные способы решения.

## <a name="youre-unable-to-use-solution-checker-to-run-analysis-or-download-results"></a>Вы не можете использовать средство проверки решений для выполнения анализа или загрузки результатов

Вскоре после отправки запроса средства проверки решения на выполнение анализа или загрузки результатов эта операция не выполняется и появляется сообщение об ошибке, например:

> *"Не удалось выполнить проверку для решения **[Имя решения]**. Попробуйте запустить повторно".*

Если возможно, средство проверки решений пытается вернуть конкретное сообщение об ошибке, содержащее ссылку на сведения о потенциальной причине и шаги по разрешению. Выберите **Подробнее** для получения дополнительных сведений.

![Шкала сообщения об ошибке](media/solution-checker-missing-roles-error.png)

Сбои, которые происходят во время фоновой обработки анализа, происходят со статусом **"Не удалось завершить"** и возвращают сообщение об ошибке в портал PowerApps, а также отправляют уведомление по электронной почте пользователю, обратившемуся с запросом. 

![Статус ошибки](media/solution-checker-exception-status.png)

Выбор уведомления портала связывает с этой страницей общих проблем для дальнейшего устранения неисправностей. Если одна из представленных распространенных проблем проблему не поможет, то также возвращается ссылочный номер. Передайте этот ссылочный номер в службу поддержки Майкрософт для дальнейшего расследования.

![Уведомление о сбое](media/solution-checker-failure-notification.png)

## <a name="solution-checker-fails-due-to-unsupported-version-of-powerapps-checker"></a>Средство проверки решений завершается сбоем из-за неподдерживаемой версии средства проверки PowerApps

Средство проверки решений обеспечивается приложением "Средство проверки PowerApps".  Если установлена версия приложения средства проверки PowerApps до версии **1.0.0.47**, работа средства проверки решений может не завершаться успешно. Необходимо выполнить обновление версии средства проверки PowerApps из [!INCLUDE [pn-dyn-365-admin-center](../../includes/pn-dyn-365-admin-center.md)]. 

Однако если установлена версия средства проверки PowerApps до версии **1.0.0.45**, рекомендуется удалить решение и установить его снова. В связи с недавними изменения схем обновление средства проверки PowerApps с версий до версии **1.0.0.45** может закончиться неудачей.

Если требуется сохранить прошлые результаты из средства проверки решений, экспортируйте результаты из предыдущих выполнений или экспортируйте все данные средства проверки решений с помощью функции [Экспорт данных в Excel](../../user/export-data-excel.md), чтобы экспортировать данные из следующих сущностей:

- Компонент анализа
- Задание анализа
- Результат анализа
- Подробность результата анализа

### <a name="how-to-uninstall-powerapps-checker"></a>Как удалить средство проверки PowerApps

Чтобы удалить решение средства проверки PowerApps:

1. Как системный администратор или настройщик системы, откройте портал PowerApps, перейдя по адресу https://web.powerapps.com/environments.
2. Выберите **Решения**.
3. Выберите **Средство проверки PowerApps**, затем на панели инструментов решений выберите **Удалить**.

### <a name="how-to-install-powerapps-checker"></a>Как установить средство проверки PowerApps

Чтобы установить средство проверки PowerApps обратно в среду Common Data Service:

1. Как системный администратор или настройщик системы, откройте портал PowerApps, перейдя по адресу https://web.powerapps.com/environments.
2. Выберите **Решения**.
3. На панели инструментов выберите **Средство проверки PowerApps**, затем выберите **Установить**.

## <a name="solution-checker-cant-access-organizations-in-administration-mode"></a>Средство проверки решений не может получить доступ к организациям в режиме администрирования

Организации, которые были переведены в [режим администрирования](https://docs.microsoft.com/en-us/dynamics365/customer-engagement/admin/manage-sandbox-instances#administration-mode), нарочно ограничивают доступ только пользователями с ролями системного администратора или специалиста по настройке системы. Поскольку идентификатору приложения средства проверки PowerApps по умолчанию не назначена ни одна из этих ролей, оно не может получить доступ к организациям, работающим в этом режиме.

Чтобы использовать средство проверки решений в этой организации режим администрирования должен быть отключен.

### <a name="how-to-disable-administration-mode"></a>Отключение режима администрирования

Чтобы отключить режим администрирования для экземпляра организации:

1. Откройте средство выбора экземпляра приложений Dynamics 365 for Customer Engagement: https://port.crm.dynamics.com/G/Instances/InstancePicker.aspx.
2. Выберите экземпляр организации, имеющий проблемы выполнения средства проверки решений.
3. Выберите **ADMIN**.<br/>
![Администратор экземпляра](media/solution-checker-instance-admin.png)

4. Снимите флажок **Включить режим администрирования**, затем выберите **Сохранить**.<br/>
![Отключение режима администрирования](media/solution-checker-instance-disable-admin-mode.png)

5. Снова запустите средство проверки решений.

## <a name="solution-checker-fails-due-to-missing-security-roles"></a>Работа средства проверки решений завершается ошибкой из-за отсутствия ролей безопасности

Пользователю приложения для средства проверки решений требуется две назначенные роли безопасности для предоставления необходимых привилегий для связи с организацией Common Data Service. Если одна из этих ролей не назначена пользователю **"Средство проверки PowerApps"**, попытки выполнить анализ, загрузить результаты и выполнить отмену закончатся неудачей. Так происходит наиболее часто, когда у клиентов действует автоматизация, которая удаляет роли безопасности у неожиданных пользователей. Следующие роли безопасности содержат минимальные необходимые разрешения:

- Экспорт настроек
- Средство проверки решений

### <a name="how-to-assign-missing-security-roles"></a>Назначение отсутствующих ролей безопасности

Чтобы назначить отсутствующие роли безопасности пользователю средства проверки PowerApps:

1. Откройте организацию Common Data Service и перейдите к **Параметры** > **Безопасность** > **Пользователи**.
2. Выберите пользователя **"Средство проверки PowerApps"** в списке пользователей.
3. Выберите **УПРАВЛЕНИЕ РОЛЯМИ** на панели команд.
4. Установите флажки ролей **"Экспортировать настройки"** и **"Средство проверки решений"**, затем выберите **ОК**.<br/>
![Требуемые роли безопасности](media/solution-checker-required-roles.png)

5. Снова запустите средство проверки решений.

## <a name="solution-checker-fails-due-to-restricted-access-mode"></a>Работа средства проверки решений завершается ошибкой из-за режима ограниченного доступа

Пользователю приложения для средства проверки решений требуется режим доступа **"Неинтерактивная"** или **"Чтение и запись"** для связи с этой организацией Common Data Service. Если режим доступа был изменен на другое значение, например **"Административный"**, то попытки выполнить анализ, загрузить результаты и отменить выполнение закончатся неудачей.

Чтобы устранить эту проблему, необходимо обновить пользователя приложения **"Средство проверки PowerApps"** с режимом доступа "Неинтерактивный".

### <a name="how-to-update-user-access-mode"></a>Как обновить режим доступа пользователей

Чтобы обновить режим доступа для пользователя средства проверки PowerApps:

1. Откройте организацию Common Data Service и перейдите к **Параметры** > **Безопасность** > **Пользователи**.
2. Выберите пользователя **"Средство проверки PowerApps"** из списка пользователей и дважды щелкните, чтобы открыть форму пользователя.
3. Прокрутите форму до раздела **"Администрирование"** > **"Сведения о клиентской лицензии (CAL)"**.
4. Выберите **"Неинтерактивная"** в раскрывающемся элементе управления **Режим доступа**.<br/>
![Режим доступа](media/solution-checker-access-mode.png)

5. Сохраните и закройте форму пользователя.
6. Снова запустите средство проверки решений.

## <a name="solution-checker-fails-due-to-disabled-first-party-application-in-aad"></a>Средство проверки решений завершается ошибкой из-за отключенного приложения первой партии в AAD

Идентификатор корпоративного приложения первой партии, используемый средством проверки решений (PowerApps-Advisor) не должен быть отключен в Azure Active Directory (AAD). Если он отключен, идентификатор не может пройти проверку подлинности при запросе токенов носителя для Common Data Service и других необходимых поставщиков ресурсов от лица запрашивающего пользователя. 

Следуйте инструкциям внизу, чтобы проверить, что удостоверение приложения не отключено в AAD и, если необходимо, для включения приложения.

### <a name="how-to-verify-andor-modify-application-enabled-status"></a>Как проверить и/или изменить статус включения приложения

Чтобы проверить и/или изменить статус включения удостоверения приложения предприятия PowerApps-Advisor

1. Получите доступ к клиенту на [портале Azure Active Directory (AAD)](https://aad.portal.azure.com/).
2. Перейдите в раздел **Приложения Enterprise**.
3. Выберите **Все приложение** и выполните поиск **"PowerApps-Advisor"**.<br/>
![Найдите приложение PowerApps-Advisor](media/solution-checker-search-advisor-app.png)

4. Выберите **"PowerApps-Advisor"**, чтобы просмотреть сведения приложения.
5. Выберите **Свойства**.
6. Проверьте статус **Включен ли вход для пользователей**. Если **"Нет"**, то приложение отключено.<br/>
![Отключенное корпоративное приложение](media/solution-checker-disabled-app.png)

7. Выберите переключатель, чтобы переключиться на значение **"Да"**. Это включает приложение.<br/>
![Включение приложения PowerApps-Advisor](media/solution-checker-enable-app.png)

8. Нажмите кнопку **Сохранить**. Приложение теперь включено. Может потребоваться подождать несколько минут, пока изменение не распространится.
9. Снова запустите средство проверки решений.

> [!IMPORTANT]
> Необходимо иметь права администратора в Azure Active Directory (AAD) для редактирования приложений предприятия.

## <a name="solution-checker-fails-to-export-solutions-with-draft-business-process-flow-components"></a>Средству проверки решений не удается экспортировать решения с черновиками компонентов последовательности операций бизнес-процесса

Если решение содержит компонент последовательности операций бизнес-процесса в состоянии "черновик", который никогда ранее не была активизирован, средство проверки решений не сможет экспортировать решение для анализа. Эта ошибка не уникальна для средства проверки решений и вызывается тем, что последовательность операций бизнес-процесса имеет зависимости для базового (настраиваемого) компонента сущности, который не создается, пока последовательность операций бизнес-процесса не будет активирована в первый раз. Эта проблема также может возникнуть, если последовательность операций бизнес-процесса активирована в обозревателе решений.

Сведения об этой проблеме и порядке ее устранения см. в [статье базы знаний №4337537: Недопустимый экспорт — отсутствует сущность бизнес-процесса](https://support.microsoft.com/en-hk/help/4337537/invalid-export-business-process-entity-missing).

## <a name="solution-checker-fails-to-export-patched-solutions"></a>Средству проверки решений не удается экспортировать исправленные решения

Если к решению было применено [исправление](https://docs.microsoft.com/powerapps/developer/common-data-service/create-patches-simplify-solution-updates), средство проверки решений не сможет экспортировать решение для анализа. Когда к решению было применено исправление, первоначальное решение будет заблокировано, и его нельзя изменить или экспортировать, если имеются зависимые исправления в организации, которые определяют это решение как родительское решение.

Для исправления этой проблемы клонируйте решение, чтобы все исправления, связанные с решением, были свернуты во вновь созданное решение. Это разблокирует решение и позволит экспортировать решение из системы.  Дополнительные сведения см. в разделе [Клонирование решения](use-segmented-solutions-patches-simplify-updates.md#clone-a-solution).

## <a name="solution-checker-will-not-analyze-empty-solutions"></a>Средство проверки решений не анализирует пустые решения

Если средство проверки решений экспортирует решение, которое не содержит компоненты для анализа, оно прекратит дальнейшую обработку и будет считать выполнение неудачным. Убедитесь, что выбранное решение, отправленное для анализа в средство проверки решений, содержит по крайней мере один компонент.

## <a name="solution-checker-fails-to-export-large-solutions"></a>Средству проверки решений не удается экспортировать большие решения

Основной сценарий для сбоя экспорта большого решения из среды Common Data Service включает исключение истечения времени ожидания для запроса экспорта. Это произойдет, если запрос превышает 20 минут. Большие решения, такие как решение по умолчанию, могут не успеть экспортироваться в течение этого времени, и проверка не завершится успешно. Если средство проверки решений столкнется с истечением времени ожидания во время экспорта, оно выполнит три попытки перед сбоем обработки задания, поэтому вы можете получить уведомление об ошибке только через час или более.

Обходное решение — создать меньшие решения с меньшим числом компонентов, которые требуется проанализировать. Если большой размер файла решения связан с большим числом компонентов подключаемой сборки, см. указания в разделе [Оптимизация разработки пользовательских сборок](../../developer/common-data-service/best-practices/business-logic/optimize-assembly-development.md). 

> [!IMPORTANT]
> Чтобы свести к минимуму ложные срабатывания, обязательно добавляйте зависимые настройки. При создании решения и добавлении таких компонентов включайте следующее:
> - При добавлении подключаемых модулей включите шаги обработки сообщения SDKдля подключаемого модуля.
> - При добавлении форм сущностей включите веб-ресурсы JavaScript, прикрепленные к событиям формы.  
> - При добавлении веб-ресурсов JavaScript включите все зависимые веб-ресурсы JavaScript.
> - При добавлении веб-ресурсов HTML включить все зависимые сценарии, которые определены в веб-ресурсе HTML.
> - При добавлении пользовательских бизнес-процессов включите сборку, используемую в бизнес-процессе.

## <a name="line-number-references-for-issues-in-html-resources-with-embedded-javascript-are-not-correct"></a>Ссылки по номерам строк для проблем в ресурсах HTML с внедренным кодом JavaScript неправильные 

Когда веб-ресурсы HTML обрабатываются в средстве проверки решений, веб-ресурс HTML обрабатывается отдельно от кода JavaScript в веб-ресурсе HTML. В связи с этим номер строки нарушения, найденного внутри элемента `<script>` веб-ресурса HTML, будет неправильным.

## <a name="web-unsupported-syntax-issue-for-web-resources"></a>Проблема неподдерживаемого в интернете синтаксиса для веб-ресурсов

Версии ECMAScript 6 (2015) или более поздние в настоящее время не поддерживаются для средства проверки решений. Когда средство проверки решений анализируйте JavaScript с использованием ECMAScript 6 или выше, возникает сообщение об ошибке поддерживаемого в интернете синтаксиса для веб-ресурса.  

## <a name="multiple-violations-reported-for-plug-ins-and-workflow-activities-based-on-call-scope"></a>Несколько нарушений, сообщенных для подключаемых модулей и действий бизнес-процессов на основе области вызова

Для подключаемого модуля и правил действия бизнес-процесса, в которых проблема относится только к контексту вызова, средство проверки решения начинает анализ с реализации интерфейса IPlugin и перебирает граф вызовов для обнаружения проблем в рамках области данной реализации.  В некоторых случаях многие пути вызовов могут приводить в одно и то же место, в котором проблема обнаружена.  Поскольку проблема связана с областью вызова, средство может сообщать на основе этой области, чтобы давать лучшую картину влияния, а не просто на основе отдельных мест. Поэтому несколько проблем могут указывать на одно расположение, который должно быть исправлено.

## <a name="see-also"></a>См. также
[Рекомендации и инструкции для Common Data Service](../../developer/common-data-service/best-practices/index.md)<br/>
[Рекомендации и советы для управляемых моделью приложений](../../developer/model-driven-apps/best-practices/index.md)<br/>
