---
title: Использование сегментированных решений с Power Apps | MicrosoftDocs
description: Научитесь использовать сегментацию решений для обновления своих решений
ms.custom: ''
ms.date: 02/04/2020
ms.reviewer: ''
ms.service: powerapps
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- powerapps
author: Mattp123
ms.assetid: 5c05f683-e1bd-4885-be23-b6973128773f
caps.latest.revision: 15
ms.author: matp
manager: kvivek
search.audienceType:
- maker
search.app:
- PowerApps
- D365CE
ms.openlocfilehash: 16730151eb6d7ec45fad7a6803eed3e76f68f8d4
ms.sourcegitcommit: 629e47c769172e312ae07cb29e66fba8b4f03efc
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2020
ms.locfileid: "3109470"
---
# <a name="use-segmented-solutions"></a>Использование сегментированных решений 

Используйте сегментацию решения, чтобы включить только те компоненты сущности, которые обновляются при распространении обновлений решения. Сегментация решений позволяет экспортировать обновления решения с выбранными компонентами сущностей — например, полями, формами или представлениями сущностей — а не с целыми сущностями со всеми компонентами. <!-- Depending on the complexity of your app, segmentation of the solution can be as simple as everything in a single solution to segmenting by component type, such as entities in one solution, canvas apps in another, and plugins in a third. --> Чтобы создать сегментированное решение, используйте область **Решения** в Power Apps.  

Вы можете сегментировать решение, выбрав один из следующих параметров, чтобы добавить существующую сущность в решение: 
- Не Включать никакие компоненты. Когда вы не выбираете никакие компоненты или метаданные, в решение добавляется минимальная информация о сущности. Поэтому, кроме понятного имени, атрибутов сущности (метаданных) или компонентов, ничего не будет включено.   
- **Выбрать компоненты**. Вы можете сегментировать решение, индивидуально выбрав каждый компонент, связанный с сущностью, например поля, отношения, бизнес-правила, представления, формы и диаграммы. Используйте этот параметр, чтобы выбрать только те компоненты, которые были добавлены или изменены с помощью этой сущности, например, новое настраиваемое поле или добавление формы.  
- **Включить метаданные сущности**. Эта опция не включает никакие компоненты, такие как связанные сущности, но включает *все* метаданные, связанные с этой сущностью. Метаданные включают атрибуты сущности, такие как аудит, поиск повторяющихся данных или отслеживание изменений. 
- **Включить все компоненты**. Эта опция включает в себя все компоненты *и* метаданные, связанные с сущностью. Она может включать в себя другие сущности или компоненты сущности, такие как последовательности операций бизнес-процесса, отчеты, соединения и очереди. Эту опцию следует использовать только при распространении неуправляемой сущности, которой нет в целевой среде. 

    > [!WARNING]
    > Не добавляйте в свое решение компоненты, которые вы не собирались добавлять. Когда ваше обновление импортируется в целевую среду, решение с непредусмотренными компонентами может вызвать непредвиденное поведение существующих компонентов, которые теперь находятся ниже слоя, который вы создали своим обновлением решения. Например, если вы добавляете представление для сущности, которая не обновлена, и представление в существующем слое имеет настройки, существующие настройки могут стать неактивными. Дополнительные сведения см. в разделе [Слои решения](solution-layers.md).

<!-- The below was from Per but I don't think it fits in this topic that is only about solution segmentation with entities. 
Similar to the planning that goes into how you model the data that goes into your app, planning for segmentation should be considered before you distribute your solution. Segmenting solutions from a single solution into multiple solutions a month or two years after the initial app has been built can be complex and is prone to cause issues.  -->

## <a name="create-a-segmented-solution-with-entity-assets"></a>Создание сегментированного решения с активами сущностей 
 Чтобы создать сегментированное решение, начните с созданием неуправляемого решения и добавьте только обновленные компоненты. Похожая на мастер процедура настройки позволяет по шагам выполнить процесс добавления активов сущностей. 

Например, представьте, что вы создали новую пользовательскую сущность, которая не существует ни в одной другой среде, с именем *Пользовательская сущность*, а также добавили новое поле с именем *topten* для сущности организации. Чтобы создать сегментированное решение, выполните следующие действия. 
  
1. Перейдите на портал Power Apps, затем выберите **Решения**.  
  
2.  Выберите **Создать решение** и создайте решение. Заполните необходимые поля. Выберите **Создать**.  
  
3.  Откройте созданное решение. На панели команд выберите **Добавить существующий**, затем выберите **Сущность**.  
  
4.  На панели **Добавить существующие сущности** выберите одну или несколько сущностей, которые требуется добавить в решение. Например, выберите **Организация** и **Пользовательская сущность**. Выберите **Далее**.  

5.  На панели **Выберите сущности** можно выбрать из активов для включения: 
    - **Включить все компоненты**. Эта опция включает в себя все компоненты *и* метаданные, связанные с сущностью. Она может включать в себя другие сущности или компоненты сущности, такие как последовательности операций бизнес-процесса, отчеты, соединения и очереди. 
    - **Включить метаданные сущности**. Этот параметр включает в себя *только* метаданные, связанные с сущностью. Метаданные включают атрибуты сущности, такие как аудит, поиск повторяющихся данных или отслеживание изменений. 
    - **Выбрать компоненты**. Этот параметр позволяет индивидуально выбирать каждый компонент, связанный с сущностью, например поля, отношения, бизнес-правила, представления, формы и диаграммы. 
    - Не включать никакие компоненты. 

      Для этого примера, потому что *Пользовательская сущность* никогда не была импортирована в целевую среду, рядом с пунктом **Пользовательская сущность** выберите **Включить все компоненты**. В разделе **Организация** выберите **Выбрать компоненты**.  
      > [!div class="mx-imgBorder"] 
      > ![Добавление существующих сущностей](media/add-existing-entities1.png)
  
6.  Так как только настраиваемое поле *topten* является новым для сущности организации, выберите **Топ десять**, затем выберите **Добавить**.  
     > [!div class="mx-imgBorder"] 
     > ![Выберите компоненты сущности](media/add-existing-entities2.png)

7. Выберите **Добавить**, чтобы добавить компоненты в решение. 

### <a name="create-a-segmented-solution-using-solution-explorer"></a>Создание сегментированного решения с помощью обозревателя решений  
Следующие иллюстрации содержат примеры создания сегментированного решения путем выбора активов сущностей `Account`, `Case` и `Contact`.  

> [!NOTE]
> Сущность обращения включена в некоторые приложения Dynamics 365, такие как Dynamics 365 Customer Service. 
  
Начните с открытия неуправляемого решения, которое вы создали. Выберите компонент **Сущность**.  

 > [!div class="mx-imgBorder"] 
 > ![Добавьте существующие ресурсы.](media/solution-segmentation-add-existing-resources-admin.png "Добавьте существующие ресурсы.")  
  
 Затем выберите компоненты решения.  
  
 ![Выберите компоненты решения.](media/solution-segmentation-select-components-admin.png "Выберите компоненты решения.")  
  
 Следуйте указаниям мастера. В шаге 1 выберите активы (упорядочены по алфавиту) для первой сущности — `Account`, как показано ниже.  
  
 ![Запустите мастер.](media/solution-segmentation-wizard-starts-admin.png "Запустите мастер.")  
  
 Откройте вкладку **Поля** и выберите поле **Код организации**.  
  
 ![Выберите активы сущности "Организация".](media/solution-segmentation-select-account-assets-admin.png "Выберите активы сущности "Организация".")  
  
 В шаге 2 для сущности **Обращение** добавьте все активы.  
  
 ![Выберите активы сущности "Обращение".](media/solution-segmentation-select-case-assets-admin.png "Выберите активы сущности "Обращение".")  
  
 В шаге 3 добавьте поле **Годовщина** для сущности **Контакт**.  
  
 ![Выберите активы сущности "Контакт".](media/solution-segmentation-select-contact-assets-admin.png "Выберите активы сущности "Контакт".")  
  
 В результате созданное сегментированное решение содержит три сущности — `Account`, `Case` и `Contact`. Каждая сущность содержит только те активы, которые были выбраны.  
  
 > [!div class="mx-imgBorder"] 
 > ![Решение с сущностями.](media/solution-segmentation-solution-entities-admin.png "Решение с сущностями.")  
  
  
### <a name="see-also"></a>См. также  
 [Обзор решений](solutions-overview.md)


