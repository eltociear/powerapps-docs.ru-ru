---
title: Как объединяются управляемые решения (Common Data Service) | Документация Майкрософт
description: Во избежание взаимного влияния нескольких установленных решений следуйте рекомендациям при создании решения
ms.custom: ''
ms.date: 02/27/2020
ms.reviewer: ''
ms.service: powerapps
ms.topic: article
author: shmcarth
ms.author: jdaly
manager: ryjones
search.audienceType:
- maker
- developer
search.app:
- PowerApps
- D365CE
ms.openlocfilehash: 7b6a5d741179c26799badfd6c7427e06941f5851
ms.sourcegitcommit: a1b54333338abbb0bc3ca0d7443a5a06b8945228
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/13/2020
ms.locfileid: "3124928"
---
# <a name="understand-how-managed-solutions-are-merged"></a>Сведения об объединении управляемых решений

При подготовке управляемого решения к установке помните, что в среде может быть установлено несколько решений, и что в будущем могут быть установлены другие решения. Создайте решение, которое следует рекомендациям, чтобы ваше решение не мешало другим решениям.  
  
Процессы, которые Common Data Service использует для слияния настроек, делают акцент на поддержание функциональности решения. Несмотря на то, что предпринимаются все усилия для сохранения презентации, некоторые несовместимости между настройками могут потребовать, чтобы вычисленное разрешение изменило некоторые детали презентации в пользу сохранения функциональности настройки.  
  
<a name="BKMK_MergingFormCustomizations"></a>   

## <a name="merge-form-customizations"></a>Объединение настроек форм  
 Единственные настройки форм, которые необходимо объединить, — это те, которые выполняются для любых форм сущностей, которые уже находятся в среде. Как правило, это означает, что настройки форм необходимо объединять только тогда, когда ваше решение настраивает формы, которые были включены для сущностей, созданных при установке Common Data Service. Одним из способов избежать слияния форм является предоставление новых форм для любых сущностей Common Data Service. Формы для пользовательских сущностей не требуют слияния, если только вы не создаете решение, которое обновляет или изменяет существующее управляемое решение, которое создало пользовательские сущности и их формы.  
  
 Когда решение упаковано как управляемое решение, определения форм, хранящиеся в FormXML, сравниваются с исходным FormXML, и в управляемое решение включаются только различия. Когда управляемое решение устанавливается в новой среде, различия в настройке формы затем объединяются с FormXML для существующей формы, чтобы создать новое определение формы. Это новое определение формы — это то, что видит пользователь и что может изменить системный настройщик. Когда управляемое решение удаляется, удаляются только те элементы формы, которые находятся в управляемом решении.  
  
 Когда вы добавляете новые элементы в форму, которую нужно объединить, мы рекомендуем вам включить ваши новые элементы в новые элементы-контейнеры (вкладки или разделы). Дополнения к любому контейнеру будут добавлены в конец контейнера. Например, поля, добавленные в раздел, будут расположены в конце раздела. Ожидается, что настройщик, устанавливающий решение, затем изменит форму, чтобы переставить элементы после установки.  
  
 Управляемые решения, содержащие формы, использующие новые роли безопасности, зависят от этих ролей. Вы должны включить эти роли безопасности в ваше управляемое решение. Если есть роли безопасности, связанные с формой, которая не находится в среде, в которой устанавливается управляемое решение, установка не будет завершена сбоем, но формы могут быть не связаны с какими-либо ролями безопасности. При удалении управляемого решения все включенные в него роли безопасности будут удалены. Любые формы за пределами управляемого решения больше не могут быть связаны с этими ролями безопасности.  
  
> [!NOTE]
>  Когда сущность управляемого решения содержит несколько форм, а форма сущности среды также содержит несколько форм, новые формы не добавляются в конец списка доступных форм — они чередуются с исходными формами сущностей.  
  
<a name="BKMK_MergingNavigationCustomizations"></a>   
## <a name="merge-navigation-sitemap-customizations"></a>Объединение настроек навигации (SiteMap)  
 Когда решение упаковано как управляемое, SiteMap XML сравнивается с исходным SiteMap XML и любыми другими настройками, внесенными в SiteMap. Только различия включаются в управляемое решение. Эти различия включают элементы, которые были изменены, перемещены, добавлены или удалены. Когда управляемое решение устанавливается в новой среде, изменения SiteMap объединяются с XML-файлом SiteMap, найденным для среды, в которой устанавливается управляемое решение. Новое определение SiteMap — это то, что видят люди.  
  
 На этом этапе настройщик может экспортировать SiteMap в неуправляемое решение, и это определение SiteMap будет включать все элементы активной SiteMap. Затем настройщик может изменить SiteMap и повторно импортировать его как неуправляемую настройку.  Позже, если управляемое решение будет удалено, ссылка на XML-файл SiteMap, который был импортирован с помощью управляемого решения, будет использоваться для удаления изменений, внесенных этим управляемым решением. Затем рассчитывается новая активная SiteMap.  
  
 Каждый раз, когда новый видимый элемент добавляется в SiteMap, он появляется в нижней части того контейнера, в котором он находится. Например, новая область появляется в нижней части области навигации. Чтобы расположить добавленные элементы, вы должны экспортировать SiteMap, отредактировать его, чтобы установить точное положение, затем снова импортировать его как неуправляемое решение.  
  
> [!NOTE]
>  Между публикациями можно применить только одну настройку SiteMap. Любые неопубликованные настройки SiteMap будут потеряны при импорте нового определения SiteMap.  
  
<a name="BKMK_MergingOptionSetOptions"></a>   
## <a name="merge-option-set-options"></a>Объединение параметров набора параметров  
 Каждый новый параметр набор параметров инициализируется назначенным целочисленным значением, которое включает префикс значения параметра. Префикс значения параметра представляет собой набор из пяти цифр, добавляемых в начало значения параметра. Префикс значения параметра создается на основе префикса настройки издателей решения, но для него можно задать любое значение. Префикс значения параметра помогает отличать новые параметры набора параметров, созданные в контексте определенного издателя решения, и уменьшает вероятность коллизий значений параметров. Использование префикса значения параметра рекомендуется, но не обязательно.  
  
 Управляемое решение обычно обновляет или добавляет параметры для наборов параметров, которые уже находятся в среде, например наборы параметров "Категория" или "Промышленность" для организации. Когда управляемое решение изменяет параметры, доступные в наборе параметров, все параметры, определенные в управляемом решении, становятся доступными в среде. При удалении управляемого решения параметры набора параметров будут возвращены в исходное состояние.  
  
### <a name="see-also"></a>См. также  

[Обзор решений](solutions-overview.md)  <br />
[Экспорт решений](export-solutions.md) <br />
[Создание карты сайта управляемого моделью приложения с использованием конструктора карт сайта](../model-driven-apps/create-site-map-app.md)