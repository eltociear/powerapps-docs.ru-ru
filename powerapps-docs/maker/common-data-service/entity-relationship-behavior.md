---
title: Поведение отношений сущностей (Common Data Service) | Microsoft Docs
description: <Description>
ms.custom: ''
ms.date: 08/01/2018
ms.reviewer: ''
ms.service: powerapps
ms.topic: article
author: Mattp123
ms.author: matp
manager: kvivek
---
# <a name="entity-relationship-behavior"></a>Поведение отношений сущностей

Поведение отношений сущностей важно, поскольку помогает гарантировать целостность данных и может автоматизировать бизнес-процессы компании.

## <a name="preserve-data-integrity"></a>Сохранение целостности данных

Существуют некоторые сущности для поддержки других сущностей. Они не имеют смысл сами по себе. Обычно они содержат обязательное поле для связи с основной сущностью, которую они поддерживают. Что должно произойти при удалении основной записи?

Для определения этого можно использовать поведение отношения согласно правилам вашего предприятия. Два варианта:

- Предотвращение удаления основной сущности, чтобы записи связанной сущности можно было согласовать, возможно, связав их с другой основной сущностью.
- Разрешение автоматическое удаления связанных сущностей при удалении записи основной сущности.

Если связанная сущность не поддерживает основную сущность, можно разрешить удаление основной сущности, при этом значение поиска будет очищено.

## <a name="automate-business-processes"></a>Автоматизация бизнес-процессов
  
Допустим, у вас новый продавец и требуется назначить ему несколько существующих организаций, в данное время назначенных другому продавцу. Каждая запись организации может иметь несколько действий задач, связанных с ней. Можно легко найти активные организации, которые требуется переназначить, и назначить их новому продавцу. Но что произойдет с действиями задач, связанными с организациями? Хотелось бы вам открывать каждую задачу и указывать, должна ли она также быть назначена новому продавцу? Скорее всего, нет. Вместо этого можно разрешить отношению применить некоторые стандартные правила автоматически. Эти правила применяются только к записям задач, связанным с организациями, которые вы переназначаете. Можно выполнить следующие действия:  
  
- Переназначить все активные задачи.  
- Переназначить все задачи. 
- Не переназначать задачи.  
- Переназначить все задачи, которые в данный момент назначены бывшему владельцу организаций.  
  
Отношение может управлять тем, как действия, выполняемые с записью для записи основной сущности, распространяются на все записи связанной сущности.  

## <a name="behaviors"></a>Поведение

Существует несколько видов поведения, которые можно применить при возникновении определенных действий.

|Поведение|Описание|
|--|--|
|**Передавать активным**|Выполнение действия для всех активных записей связанной сущности.|
|**Передавать всем**|Выполнение действия для всех записей связанной сущности.|
|**Не передавать никому**|Никакие действия не выполняются.|
|**Удалить ссылку**|Удаление значения поиска всех связанных записей.|
|**Ограничить**|Блокировка возможности удаления записи основной сущности, если существуют связанные записи сущностей.|
|**Каскад для ответств.**|Выполнение действия для всех записей связанной сущности тем же пользователем, что и пользователь записи основной сущности.|

## <a name="actions"></a>Действия

Ниже представлены действия, которые могут вызывать определенное поведение.

|Поле|Описание|Параметры|
|--|--|--|
|**Назначение**|Что должно произойти, когда запись основной сущности назначается другому пользователю?|Передавать всем<br />Передавать активным<br />Каскад для ответств.<br />Не передавать никому|
|**Переподчинение**|Что должно произойти, когда меняется значение поиска связанной сущности в отношении родительского типа?<br />Дополнительные сведения: [Родительские отношения сущностей](#parental-entity-relationships)|Передавать всем<br />Передавать активным<br />Каскад для ответств.<br />Не передавать никому|
|**Общий доступ**|Что должно произойти при совместном использовании записи основной сущности?|Передавать всем<br />Передавать активным<br />Каскад для ответств.<br />Не передавать никому|
|**Удаление**|Что должно произойти при удалении записи основной сущности?|Передавать всем<br />Удалить ссылку<br />Ограничить|
|**Отмена общего доступа**|Что должно произойти при отмене совместного использования записи основной сущности?|Передавать всем<br />Передавать активным<br />Каскад для ответств.<br />Не передавать никому|
|**Слияние**|Что должно произойти при объединении записи основной сущности?|Передавать всем<br />Не передавать никому|
|**Представление свертки**|Каково требуемое поведение представления свертки, связанного с этим отношением? |Передавать всем<br />Передавать активным<br />Каскад для ответств.<br />Не передавать никому|


## <a name="parental-entity-relationships"></a>Отношения родительской сущности

Каждая пара сущностей, которые могут иметь отношение 1:N, может иметь несколько отношений 1:N между ними. Однако обычно только одно из этих отношений можно рассматривать как родительское отношение сущностей.

Родительское отношение сущностей — это любое отношение сущностей 1:N, где один из каскадных параметров в столбце **Родительское** в следующей таблице имеет значение true.

|Действие|Родительское|Не родительское|  
|------------|--------------|------------------|  
|**Назначение**|Передавать всем<br />Каскад для ответств.<br />Передавать активным|Не передавать никому|  
|**Удаление**|Передавать всем|Удалить ссылку<br />Ограничить|  
|**Переподчинение**|Передавать всем<br />Каскад для ответств.<br />Передавать активным|Не передавать никому|  
|**Общий доступ**|Передавать всем<br />Каскад для ответств.<br />Передавать активным|Не передавать никому|  
|**Отмена общего доступа**|Передавать всем<br />Каскад для ответств.<br />Передавать активным|Не передавать никому|  

Например, если вы создаете новую настраиваемую сущность и добавляете отношение сущностей 1:N с сущностью учетной записи, где настраиваемая сущность является связанной сущностью, можно настроить действия для этого отношения сущностей для использования параметров в столбце **Родительское**. Если позже добавить еще одно отношение сущностей 1:N с настраиваемой сущностью в качестве ссылочной сущности, можно настроить действия только для использования параметров в столбце **Не родительское**.

Обычно это означает, что для каждой пары сущностей существует только одно родительское отношение. В некоторых случаях при поиске в связанной сущности учитывается отношение с несколькими типами сущности.

Например, если в сущности настроен поиск по клиенту, который может ссылаться на сущность контакта или организации. Существует два отдельных родительских отношения сущностей 1:N.

Любая сущность действия имеет похожий набор родительских отношений сущностей для сущностей, которые можно связать с помощью поля поиска "в отношении".

<a name="BKMK_RelationshipBehaviorLimitations"></a>   

## <a name="limitations-on-behaviors-you-can-set"></a>Доступные ограничения поведения
  
Из-за родительских отношений существует ряд ограничений, которые необходимо учитывать при определении отношений сущностей.  
  
- Настраиваемая сущность не может быть основной в каскадном отношении со связанной системной сущностью. Это означает, что между основной настраиваемой сущностью и связанной системной сущностью не может быть отношений с каким-либо из действий со значением **Передавать всем**, **Передавать активным** или **Передавать владельцу**.  
- У новых отношений действие не может иметь значение **Передавать всем**, **Передавать активным** или **Передавать владельцу**, если связанная сущность в этом отношении уже является связанной сущностью в любом другом отношении, действие которого имеет значение **Передавать всем**, **Передавать активным** или **Передавать владельцу**. Это позволяет избежать создания отношений с несколькими родительскими сущностями.  
