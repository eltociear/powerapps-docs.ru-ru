---
title: SetFocus, функция | Документация Майкрософт
description: Справочные сведения, включая синтаксис, для функции SetFocus в PowerApps
author: gregli-msft
manager: kvivek
ms.service: powerapps
ms.topic: reference
ms.custom: canvas
ms.reviewer: tapanm
ms.date: 08/23/2019
ms.author: gregli
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: cdf34c3c4909697b70a105e5145620ab5bd31ea9
ms.sourcegitcommit: 5899d37e38ed7111d5a9d9f3561449782702a5e9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/17/2019
ms.locfileid: "71038155"
---
# <a name="setfocus-function-in-powerapps"></a>Функция SetFocus в PowerApps
Перемещает фокус ввода на конкретный элемент управления. 

## <a name="description"></a>Описание
Функция **SetFocus** обеспечивает управление фокусом ввода.  После этого элемент управления получает нажатия клавиш пользователя, позволяя им вводить данные в элемент управления Text Input или использовать клавишу *Ввод* для выбора кнопки.  Пользователь может также использовать клавишу *Tab* , касание, мышь или другой жест для перемещения фокуса ввода. Поведение клавиши *Tab* регулируется [свойством **TabIndex** ](../controls/properties-accessibility.md).

Используйте функцию **SetFocus** для установки фокуса, когда (каждый с примером ниже):
- вновь предоставленный или включенный элемент управления вводом, позволяющий пользователю выполнить следующие действия и ускорить ввод данных.
- форма проверяется, чтобы сосредоточить и отображать элемент управления вводом, вызывающий неполадки, для быстрого разрешения.
- отображается экран, чтобы сфокусировать первый элемент управления вводом с помощью свойства **OnVisible** [**экрана**](../controls/control-screen.md).

Элемент управления с фокусом может визуально отличаться в зависимости от свойств [**фокуседбордерколор**](../controls/properties-color-border.md) и [**фокуседбордерсиккнесс**](../controls/properties-color-border.md) .

## <a name="limitations"></a>Ограничения

Функция **SetFocus** может использоваться только с:
- Элемент управления [**Button**](../controls/control-button.md)
- [**Значок**](../controls/control-shapes-icons.md) элемента управления
- Элемент управления [**Image**](../controls/control-image.md)
- Элемент управления [**Метка**](../controls/control-text-box.md)
- Элемент управления [**TextInput**](../controls/control-text-input.md)

Нельзя установить фокус на элементы управления, которые находятся в элементе управления " [**коллекция**](../controls/control-gallery.md) ", "изменить элемент управления [**формы**](../controls/control-form-detail.md) " или " [компонент](../create-component.md)".  Функция **SetFocus** может использоваться с элементом управления на экране скроллбале.

Фокус можно задать только для элементов управления на том же экране, что и формула, содержащая вызов **SetFocus** .

Попытка установить фокус на элемент управления, свойство [**DisplayMode**](../controls/properties-core.md) которого имеет значение **disabled** , не оказывает никакого влияния.  Фокус останется там, где он был ранее.

В Apple iOS экранная клавиатура будет отображаться автоматически только в том случае, если функция **SetFocus** была инициирована прямым действием пользователя.  Например, при вызове из свойства **OnSelect** кнопки будет отображаться экранная клавиатура при вызове из **видимого** экрана. 

Функцию **SetFocus** можно использовать только в [формулах поведения](../working-with-formulas-in-depth.md).

## <a name="syntax"></a>Синтаксис
**SetFocus** ( *Элемент управления* )

* *Control* — обязательный аргумент.  Элемент управления для получения фокуса ввода.

## <a name="examples"></a>Примеры

### <a name="focus-on-a-newly-exposed-or-enabled-input-control"></a>Сосредоточьтесь на вновь предоставленном или включенном элементе управления вводом

Многие покупательские корзины позволяют клиенту использовать адрес доставки в качестве адреса для выставления счетов, что позволяет избежать необходимости вводить одну и ту же информацию дважды.  Если требуется другой адрес для выставления счетов, поля ввода адреса для выставления счетов включены, и рекомендуется поставлять клиенту использовать эти новые элементы управления для ускорения ввода данных.  

![Анимация по выбору использования настраиваемого адреса для выставления счетов с перемещением фокуса в элемент управления вводом для выставления счетов в результате отключения автоматической синхронизации с адресами доставки.](media/function-setfocus/shipping-billing.gif)

Здесь можно воспроизвести множество формул, но перемещение фокуса осуществляется по свойству **онунчекк** элемента управления **"флажок** ":

```powerappa-dot
SetFocus( BillingName ) 
```

Клавиша *Tab* также может использоваться для быстрого перемещения фокуса с одного поля на другое.  Для лучшего объяснения клавиша *Tab* не использовалась в анимации.

Чтобы создать этот пример, сделайте следующее:
1. Создайте новое приложение.
1. Добавьте [элементы управления **Label** ](../controls/control-text-box.md) с текстом "адрес доставки", "имя:", "адрес:", "адрес выставления счета", "имя:" и "адрес:" и разместите их, как показано в анимации.
1. Добавьте [элемент управления **Text input** ](../controls/control-text-input.md) и переименуйте его в **шиппингнаме**.
1. Добавьте [элемент управления **Text input** ](../controls/control-text-input.md) и переименуйте его в **шиппингаддресс**.
1. Добавьте [элемент управления **"флажок"** ](../controls/control-check-box.md) и переименуйте его в **синкаддрессес**.
1. Задайте для свойства **Text** этого элемента управления формулу `"Use Shipping address as Billing address"`.
1. Добавьте [элемент управления **Text input** ](../controls/control-text-input.md) и переименуйте его в **биллингнаме**.
1. Задайте в качестве значения свойства **по умолчанию** для этого `ShippingName`элемента управления формулу.
1. Задайте для свойства **DisplayMode** этого элемента управления формулу `If( SyncAddresses.Value, DisplayMode.View, DisplayMode.Edit )`.  Это позволит автоматически включить или отключить этот элемент управления в зависимости от состояния элемента управления "флажок".
1. Добавьте [элемент управления **Text input** ](../controls/control-text-input.md) и переименуйте его в **биллингаддресс**.
1. Задайте в качестве значения свойства **по умолчанию** для этого `ShippingAddress`элемента управления формулу.
1. Задайте для свойства **DisplayMode** этого элемента управления формулу `If( SyncAddresses.Value, DisplayMode.View, DisplayMode.Edit )`.  Это позволит автоматически включить или отключить этот элемент управления в зависимости от состояния элемента управления "флажок".
1. Установите для свойства флажка значение **по умолчанию** для формулы `true`.  По умолчанию адрес выставления счета будет использовать то же значение, что и адрес доставки.
1. Установите в качестве значения свойства **oncheck** флажка формулу `Reset( BillingName ); Reset( BillingAddress )`.  Если пользователь решит синхронизировать адреса доставки и выставления счетов, это приведет к очистке всех вводимых пользователем данных в полях адреса выставления счетов, позволяя свойствам **по умолчанию** для каждого из полей адреса доставки получать значения.
1. Задайте для свойства **онунчекк** флажка значение формула `SetFocus( BillingName )`.  Если пользователь выбирает другой адрес для выставления счетов, он перемещает фокус на первый элемент управления в адресе выставления счета.  Элементы управления уже будут включены из-за их свойств **DisplayMode** .

### <a name="focus-on-validation-issues"></a>Сосредоточьтесь на проблемах проверки

> [!NOTE]
> Хотя этот пример является элементом управления **формы редактирования** **, увы, пока не поддерживается** этим элементом управления.  Вместо этого в этом примере используется прокручиваемый экран для размещения элементов управления вводом.

При проверке формы может быть полезно не только отображать сообщение, если возникла проблема, но также переносить пользователя в поле, вызвавшее ошибку.  Это может быть особенно полезно, если поле в вопросе прокручивается с экрана и не отображается.

![Анимация проверки формы ввода данных и отображение не только сообщения, но и установка фокуса ввода на вызывающий ошибку элемент управления вводом, даже если он прокручивается за пределы экрана.](media/function-setfocus/scrollable-screen.gif)

В этой анимации кнопка проверки будет многократно нажата, пока все поля не будут заполнены должным образом.  Обратите внимание, что указатель мыши не перемещается в верхней части экрана.   Вместо этого функция **SetFocus** переместила фокус ввода на элемент управления, требующий внимания к этой формуле:

```powerapps-dot
If( IsBlank( Name ), 
        Notify( "Name requires a value", Error ); SetFocus( Name ),
    IsBlank( Street1 ), 
        Notify( "Street Address 1 requires a value", Error ); SetFocus( Street1 ),
    IsBlank( Street2 ), 
        Notify( "Street Address 2 requires a value", Error ); SetFocus( Street2 ),
    IsBlank( City ), 
        Notify( "City requires a value", Error ); SetFocus( City ),
    IsBlank( County ), 
        Notify( "County requires a value", Error ); SetFocus( County ),
    IsBlank( StateProvince ), 
        Notify( "State or Province requires a value", Error ); SetFocus( StateProvince ),
    IsBlank( PostalCode ), 
        Notify( "Postal Code requires a value", Error ); SetFocus( PostalCode ),
    IsBlank( Phone ), 
        Notify( "Contact Phone requires a value", Error ); SetFocus( Phone ),
    Notify( "Form is Complete", Success )
)
```

Чтобы создать этот пример, сделайте следующее:
1. Создание нового пустого приложения для телефона.
1. В меню **Вставка** выберите **создать экран**, а затем щелкните **прокручиваемый**.
1. В центральном разделе экрана добавьте элементы управления **вводом текста** и назовите их **Name**, **Street1**, **Street2**, **City**, **округ**, **StateProvince**, **PostalCode**и **Phone**. Добавьте элементы управления **Label** над каждым из них для обозначения полей.  Может потребоваться изменить размер раздела, если он недостаточно длинный для размещения всех элементов управления.
1. Добавьте [элемент управления " **значок** ](../controls/control-shapes-icons.md) флажка" в верхней части экрана, над разделом с прокруткой.  
1. Присвойте свойству **OnSelect** элемента управления Icon указанную выше `If( IsBlank( ...` формулу.

### <a name="focus-when-displaying-a-screen"></a>Фокус при отображении экрана

> [!NOTE]
> Несмотря на то, что этот пример является элементом управления **формы редактирования** , унфорутнатлэй **SetFocus** пока не поддерживается этим элементом управления.  Вместо этого в этом примере используется прокручиваемый экран для размещения элементов управления вводом.

Аналогично доступу к элементу управления вводом при отображении экрана ввода данных полезно сосредоточиться на первом элементе управления вводом для ускорения ввода данных.

![Анимация, показывающая параллельное сравнение использования SetFocus и не использующее его при отображении экрана ввода данных](media/function-setfocus/visible-setfocus.gif)

В этой анимации экран ввода данных слева не использует **SetFocus**.  При отображении элемент управления вводом не имеет фокуса, что требует от пользователя клавиши TAB, сенсорного ввода, мыши или другого способа сосредоточиться на поле **имени** , прежде чем можно будет ввести значение в него.

Справа у нас есть точно такое же приложение со свойством **OnVisible** экрана ввода данных, установленным в этой формуле:

```powerapps-dot
SetFocus( Name )
```

При этом автоматически устанавливается фокус на поле **имя** .  Пользователь может начать вводить и переходить между полями непосредственно без предварительного действия.

Чтобы создать этот пример, сделайте следующее:
1. Создайте приложение "сосредоточиться на проблемах проверки", описанное выше.
1. На этом экране задайте формуле `SetFocus( Name )`для свойства **OnVisible** .
1. Добавьте второй экран.
1. Добавьте [элемент управления **Button** ](../controls/control-button.md).
1. Задайте для свойства **OnSelect** этого элемента управления формулу `Navigate( Screen1 )`.
1. Просмотрите приложение на этом экране.  Нажмите кнопку.  Будет выполнена **Оценка формулы,** и поле " **имя** " будет автоматически отображаться в фокусе.
