---
title: Типы данных | Документация Майкрософт
description: Типы данных в приложениях Canvas
author: gregli-msft
manager: kvivek
ms.service: powerapps
ms.topic: reference
ms.custom: canvas
ms.reviewer: anneta
ms.date: 05/19/2019
ms.author: gregli
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: 10c5ff9eaa709ab950fa3c3f0efce4f859a71dbc
ms.sourcegitcommit: 5899d37e38ed7111d5a9d9f3561449782702a5e9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/17/2019
ms.locfileid: "71037987"
---
# <a name="data-types-in-canvas-apps"></a>Типы данных в приложениях Canvas

Данные проходят через приложение в небольших дискретных значениях, очень похоже на ячейки электронной таблицы. Например, данные в полях « **день рождения** » и « **годовщина** » будут передаваться как значение **даты** , включающее год, месяц и день. Приложение знает, как форматировать эти значения, ограничивать ввод подходящим для каждого из них и использовать их совместно с базой данных. Дни рождения отличаются от юбилеев людьми, но система обрабатывает их точно так же. В этом случае **Дата** является примером [типа данных](https://en.wikipedia.org/wiki/Data_type).

В этой статье приводятся подробные сведения о типах данных, поддерживаемых приложениями Canvas. Когда приложение подключается к внешнему источнику данных, каждый тип данных в этом источнике сопоставляется с типом данных для приложений Canvas.

| Тип данных | Описание | Примеры |
|-----------|-------------|---------|
| **Boolean** | Значение *true* или *false* .  Может использоваться непосредственно в операторе **If**, **Filter** и других функциях без сравнения.  | *true* |
| **Цвет** | Спецификация цвета, включая альфа-канал. | **Color.Red**<br>**Колорвалуе ("#102030")**<br>**RGBA (255, 128, 0, 0,5)** |
| **Валюта** | Значение валюты, хранящееся в числе с плавающей запятой. Значения валют совпадают с числовыми значениями с параметрами форматирования валюты.  | **123**<br>**4,56** |
| **Date** | Дата без времени в часовом поясе пользователя приложения. | **Дата (2019, 5, 16)** |
| **DateTime** | Дата с временем в часовом поясе пользователя приложения. | **Датетимевалуе ("16 мая 2019 1:23:09 PM")** |
| **УСТРОЙСТВА** | [Глобальный уникальный идентификатор](https://en.wikipedia.org/wiki/Universally_unique_identifier). | **GUID ()**<br>**GUID ("123e4567-e89b-12d3-A456-426655440000")** |
| **Ссылка** | Текстовая строка, содержащая гиперссылку. | **"http://powerapps.microsoft.com"** |
| **Изображение** | Текстовая строка [универсального кода ресурса (URI)](https://en.wikipedia.org/wiki/Uniform_Resource_Identifier) для изображения в формате JPEG, PNG, SVG, GIF или другом общем формате веб-изображения. | **MyImage** Добавлено в качестве ресурса приложения<br>**"https://northwindtraders.com/logo.jpg"**<br>**"appres://blobmanager/7b12ffa2..."** |
| **Мультимедиа** | Текстовая строка URI для записи видео или аудио. | **Мивидео** добавлен в качестве ресурса приложения.<br>**"https://northwindtraders.com/intro.mp4"**<br>**"appres://blobmanager/3ba411c..."** |
| **Нумерация** | Число с плавающей запятой. | **123**<br>**— 4,567**<br>**8.903 E121** |
| **Набор параметров** | Выбор из набора параметров с учетом числа. Этот тип данных сочетает локализованную текстовую метку с числовым значением. Метка отображается в приложении, а числовое значение сохраняется и используется для сравнений. | **Сиситем. OrderStatus** |
| **Записать** | Запись значений данных. Этот составной тип данных содержит экземпляры других типов данных, перечисленных в этом разделе. Дополнительные сведения: [Работа с таблицами](../working-with-tables.md). | **Во "Northwind Trader",<br>персонал: 35, <br>неприбыль: false}** |
| **Справочник по записям** | Ссылка на запись в сущности. Такие ссылки часто используются с престановкой с использованием полиморфизма. Дополнительные сведения: [Работа со ссылками](../working-with-references.md).| **First (учетные записи). Владельцев** |
| **Таблица** | Таблица записей.  Все записи должны иметь одинаковые имена для полей с одинаковыми типами данных, и пропущенные поля считаются *пустыми*. Этот составной тип данных содержит экземпляры других типов данных, перечисленных в этом разделе. Дополнительные сведения: [Работа с таблицами](../working-with-tables.md). | **Таблица ({FirstName: "Сиднэй",<br>LastName: "Хига"}, <br>{FirstName: Нэнси,<br>LastName: "Андерсон ("})**
| **Text** | Текстовая строка в Юникоде. | **"Hello, World"** |
| **Time** | Время без даты, в часовом поясе пользователя приложения. | **Время (11, 23, 45)** |
| **Два параметра** | Выбор из набора двух параметров, поддерживаемый логическим значением. Этот тип данных сочетает локализованную текстовую метку с логическим значением. Метка отображается в приложении, а логическое значение сохраняется и используется для сравнений. | **Сиситем. налогооблагаемый** |

Многие из этих типов данных похожи и имеют одно и то же базовое представление, например поле **гиперссылки** , обрабатываемое как **текст**.  Дополнительные типы данных предоставляют улучшенные возможности по умолчанию в формах и других элементах управления.

## <a name="blank"></a>Blank

Все типы данных могут иметь *пустое* значение (иными словами, без значения). Термин "null" часто используется в базах данных для этой концепции.  

Используйте функцию **Blank** с функцией **Set** или **Patch** , чтобы задать *пустое*значение для переменной или поля. Например, **Set (x, Blank ())** удаляет любое значение из глобальной переменной **x**.  

Протестируйте *пустое* значение с помощью функции « [**чистым**](function-isblank-isempty.md) ». Замените возможные *пустые* значения*непустыми* значениями с помощью функции [**объединения**](function-isblank-isempty.md) .

Так как все типы данных поддерживают *пустое*значение, типы данных **Boolean** и **два параметра** фактически имеют три возможных значения.

## <a name="text-hyperlink-image-and-media"></a>Текст, гиперссылка, изображение и мультимедиа

Все четыре из этих типов данных основаны на текстовой строке в [Юникоде](https://en.wikipedia.org/wiki/Unicode) .

### <a name="image-and-media-resources"></a>Ресурсы образа и мультимедиа

В меню **файл** можно добавлять изображения, видео и звуковые файлы в качестве ресурсов приложения. Имя импортированного файла преобразуется в имя ресурса в приложении. На этом рисунке в приложение добавлен логотип Northwind Trader, именуемый **нвиндлого**.

![](media/data-types/nwind-resource.png)

Чтобы использовать этот ресурс в приложении, укажите его в свойстве **Image** элемента управления [**Image**](../controls/control-image.md) :

![](media/data-types/nwind-image.png)

### <a name="uris-for-images-and-other-media"></a>Универсальные коды ресурса (URI) для изображений и других носителей

Можно более подробно изучить последний пример, установив для свойства **Text** элемента управления [**Label**](../controls/control-text-box.md) значение **нвиндлого**. В метке отображается текстовая строка:

![](media/data-types/nwind-text.png)

Приложения Canvas ссылаются на каждое изображение или другой файл мультимедиа, как в облаке, так и в качестве ресурса приложения, с помощью текстовой строки URI.

Например, свойство **Image** элемента управления Image принимает не только ресурсы приложения, но также ссылки на изображения в Интернете, например "https://northwindtraders.com/logo.jpg". Свойство также принимает встроенные изображения, использующие [схему универсального кода ресурса (URI) данных](https://en.wikipedia.org/wiki/Data_URI_scheme), как показано в следующем примере:

```powerapps-dot
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAFAQMAAACtnVQoAAAABlBMVEUAAAB0J3UMNU6VAAAAAXRSTlMAQObYZgAAABRJREFUCNdjUGJgCGVg6GgAkkA2AA8/AffqCEBsAAAAAElFTkSuQmCC"
```

Этот URI отображает уменьшенную версию двух фиолетовых ромбов:

![](media/data-types/double-diamonds.png)

Вы можете отобразить Последнее изображение, захваченное в элементе управления [**камерой**](../controls/control-camera.md) , если для свойства **Image** элемента управления Image задать свойство **Photo** элемента управления Camera. Приложение сохраняет изображение в памяти, а свойство **Photo** элемента управления Camera возвращает ссылку на изображение в виде URI. Например, можно взять изображение, а свойство **Photo** камеры может вернуть значение **«appres://blobmanager/7b12ffa2ea4547e5b3812cb1c7b0a2a0/1»** .

Универсальный код ресурса (URI) используется для ссылки на изображение или на другой файл мультимедиа, хранящийся в базе данных. Таким образом, приложение не будет получать фактические данные, пока не будет действительно требуется. Например, вложение в Common Data Service сущность может возвращать **"appres://DataSources/Contacts/Table/..."** Как и в примере с камерой, это изображение можно отобразить, задав для свойства **Image** элемента управления Image эту ссылку, которая извлекает двоичные данные.

При сохранении в базу данных типа данных мультимедиа, например, изображения, приложение отправляет фактические изображения или данные мультимедиа, а не ссылку на URI.

### <a name="size-limits"></a>Ограничения размера

Как текстовые строки и URI, эти типы данных не имеют предустановленного ограничения на их длину.

Двоичные данные, на которые ссылаются эти типы данных, также не имеют предустановленного ограничения на размер. Например, изображение, захваченное с помощью элемента управления Camera, которое теперь упоминается как **"appres://..."** , может быть как большим, так и высоким разрешением, так как камера устройства может Мустер. Разрешение, частота кадров и другие атрибуты файлов мультимедиа не ограничиваются типом данных, но определенные элементы управления для воспроизведения и записи мультимедиа могут иметь собственные ограничения.

Однако размер данных зависит от объема доступной памяти в приложении. Браузеры, работающие на настольном компьютере, обычно поддерживают более 100 мегабайт данных. Однако объем доступной памяти на устройстве, например на телефоне, может быть далеко меньше, как правило, в диапазоне 30-70 МБ. Чтобы определить, будет ли приложение выполняться в пределах этих ограничений, протестируйте распространенные сценарии на всех устройствах, на которых оно должно выполняться.

Рекомендуется хранить данные в памяти только при необходимости. Отправляйте изображения в базу данных как можно скорее. скачивать изображения только в том случае, если пользователь приложения запрашивает их.

## <a name="number-and-currency"></a>Число и валюта

Типы данных **Number** и **Currency** используют [стандарт с плавающей запятой двойной точности IEEE 754](https://en.wikipedia.org/wiki/IEEE_754). Этот стандарт предоставляет очень большой диапазон чисел для работы, от – 1,79769 x 10<sup>308</sup> до 1,79769 x 10<sup>308</sup>. Наименьшее значение, которое можно представить, — 5 x 10<sup>– 324</sup>.

Приложения Canvas могут точно представлять целые числа (или целые числа) в диапазоне от – 9 007 199 254 740 991 (– (2<sup>53</sup> – 1)) до 9 007 199 254 740 991 (2<sup>53</sup> – 1) включительно. Этот диапазон больше, чем 32-битные (или 4-байтовые) целочисленные типы данных, которые часто используются в базах данных. Однако приложения Canvas не могут представлять типы данных 64-bit (или 8-Byte) целочисленного типа. Может потребоваться сохранить число в текстовом поле или использовать вычисляемый столбец для копирования числа в текстовое поле, чтобы оно сопоставлено с **текстовыми** типами данных в приложении Canvas. Таким образом можно хранить, отображать и вводить эти значения, а также сравнивать их, чтобы определить, равны ли они. Однако в этой форме нельзя выполнять числовые вычисления.

Арифметические операции с плавающей запятой являются приблизительными, поэтому иногда может давать непредвиденные результаты с помощью множества документированных примеров. Можно ожидать, что формула **55/100 * 100** будет возвращать ровно 55 и **(55/100 * 100)-55** , чтобы вернуть ровно ноль. Однако последняя формула возвращает 7,1054 x 10<sup>– 15</sup>, которая очень мала, но не равна нулю. Это небольшая разница обычно не вызывает проблем, и приложение округляет его при отображении результата. Однако небольшие различия могут быть составными в последующих вычислениях и выдавать неверный ответ.

Системы баз данных часто хранят валюты и выполняют вычисления с помощью десятичных математических вычислений, которые обеспечивают меньший диапазон, но лучше контролируют точность. По умолчанию приложения Canvas отображают валюты в значениях с плавающей запятой и из них. Таким образом, результат может отличаться от вычислений, которые выполняются в собственном десятичном типе данных. Если этот тип расхождений вызовет проблемы, может потребоваться работать с этими значениями как с **текстом**, как и с большими целыми числами, описанными выше в этом разделе.

## <a name="date-time-and-datetime"></a>Дата, время и DateTime

### <a name="time-zones"></a>Часовые пояса

Значения даты и времени попадают в следующие категории:

- **Локальная пользователь**: Эти значения хранятся в [формате UTC (всеобщее скоординированное время)](https://en.wikipedia.org/wiki/Coordinated_Universal_Time), но часовой пояс пользователя приложения влияет на отображение этих значений в приложении и о том, как они указываются пользователем приложения. В качестве примера один и тот же момент по-разному отображается для пользователя в Канаде, чем для пользователя в Японии.
- **Независимо от часового пояса**: Приложение показывает эти значения аналогичным образом, и пользователь приложения указывает их одинаковым образом независимо от часового пояса. Этот же момент аналогичен пользователю в Канаде, как это делается для пользователя в Японии. Авторы приложений, которые не хотят, чтобы их приложения выполнялись в разных часовых поясах, используют эти значения, так как они проще всего использовать.

В этой таблице приведены некоторые примеры.

| Тип даты и времени | Значение, хранящееся в базе данных | Отображаемое значение — 7 часов, Западная часть времени в формате UTC | Значение, отображаемое и указанное в течение 4 часов, Восточная часть времени в формате UTC |
|--------------------------|------------------------------|------------------------------|
| **Локальная пользовательская** | Воскресенье,&nbsp;19&nbsp;мая,&nbsp;2019<br>4:00 AM | Суббота,&nbsp;18&nbsp;мая,&nbsp;2019<br>9:00 РМ | Воскресенье,&nbsp;19&nbsp;мая,&nbsp;2019<br>8:00 AM |
| **Независимо от часового пояса** | Воскресенье,&nbsp;19&nbsp;мая,&nbsp;2019<br>4:00 AM | Воскресенье,&nbsp;19&nbsp;мая,&nbsp;2019<br>4:00 AM | Воскресенье,&nbsp;19&nbsp;мая,&nbsp;2019<br>4:00 AM | 

Для **локальных** дат и времени пользователей приложения Canvas используют часовой пояс браузера или устройства, но приложения, управляемые моделями, используют параметр пользователя в Common Data Service. Обычно эти параметры совпадают, но результаты будут отличаться, если эти параметры различаются.

Используйте функции [**DateAdd**](function-dateadd-datediff.md) и [**тимезонеинформатион**](function-dateadd-datediff.md) для преобразования местного времени в формат UTC и обратно.  См. примеры в конце документации по этим функциям.

### <a name="numeric-equivalents"></a>Числовые эквиваленты

Приложения Canvas хранят и вычисляют все значения даты и времени, независимо от того, является ли **пользователь локальным** или **часовым ПОЯСОМ** в формате UTC. Приложение преобразует значения на основе часового пояса пользователя приложения при их отображении, а также при их указании пользователем.

Когда приложение Canvas считывает **независимое от часового пояса** значение из источника данных или записывает такое значение в источник данных, приложение автоматически корректирует это значение, чтобы компенсировать часовой пояс пользователя приложения. Затем приложение интерпретирует это значение как значение времени в формате UTC, которое согласуется со всеми другими значениями даты и времени в приложении. Из-за этой компенсации исходное значение **независимого** часового пояса отображается, когда приложение корректирует значение времени в формате UTC для часового пояса пользователя приложения.

Это поведение можно более точно оценить с помощью функции [**value**](function-value.md) , чтобы получить доступ к базовому числовому значению для значения даты и времени. Эта функция возвращает значение даты и времени в виде числа миллисекунд с 1 января 1970 00:00:00.000 UTC.

Поскольку каждое значение даты и времени удерживается в формате UTC, **значение формулы (Date (1970, 1, 1))** не возвращает ноль в большинстве частей мира, так как функция **Date** возвращает дату в формате UTC. Например, формула возвращает 28 800 000 в часовом поясе со смещением от UTC до восьми часов. Это число отражает количество миллисекунд в восемь часов.

Возврат к нашему примеру из приведенных выше:

| Тип даты и времени | Значение, хранящееся в базе данных | Отображаемое значение — 7 часов, Западная часть времени в формате UTC | Функция **value** возвращает |
|--------------------------|------------------------------|------------------------------|
| **Локальная пользовательская** | Воскресенье,&nbsp;19&nbsp;мая,&nbsp;2019<br>4:00 AM | Суббота,&nbsp;18&nbsp;мая,&nbsp;2019<br>9:00 РМ | 1 558 238 400 000<br> (Воскресенье,&nbsp;19&nbsp;мая,&nbsp;2019<br>4:00 AM (UTC) |
| **Независимо от часового пояса** | Воскресенье,&nbsp;19&nbsp;мая,&nbsp;2019<br>4:00 AM | Воскресенье,&nbsp;19&nbsp;мая,&nbsp;2019<br>4:00 AM |1 558 263 600 000<br> (Воскресенье,&nbsp;19&nbsp;мая,&nbsp;2019<br>11:00 AM (UTC) |

### <a name="converting-unix-times"></a>Преобразование времени Unix

Время UNIX отражает количество секунд с 1 января 1970 00:00:00 в формате UTC. Поскольку приложения Canvas используют миллисекунды вместо секунд, можно выполнить преобразование между двумя путем умножения или деления на 1 000.

Например, в качестве времени Unix отображается 9 сентября 2001 г. в 01:46:40 UTC как 1 000 000 000. Чтобы отобразить это значение даты и времени в приложении Canvas, умножьте это число на 1 000, чтобы преобразовать его в миллисекунды, а затем используйте его в [**текстовой**](function-text.md) функции. Текст формулы **(1000000000 * 1000, DateTimeFormat. UTC)** возвращает строку **2001-09-09T01:46:40.000 z**.

Однако эта функция возвращает **субботу, 8 сентября 2001 18:46:40,** если в часовом поясе используется формат **DateTimeFormat. LongDateTime24** , смещение которого составляет 7 часов по Гринвичу (7 часов, Западная часть времени UTC). Этот результат правильно показывает значение **DateTime** в зависимости от местного часового пояса.

Чтобы преобразовать **значение** в время UNIX, разделите результат на 1 000:
<br>**RoundDown (value (UnixTime)/1000, 0)**

Если требуется время UNIX в значении **даты** для дальнейших вычислений или отображение в PowerApps, используйте следующую формулу:
<br>**DateAdd (Дата (1970, 1, 1), UnixTime, сек.)**

### <a name="sql-server"></a>SQL Server

SQL Server имеет [значения **DateTime**, **Datetime2**и другие типы данных даты-времени](https://docs.microsoft.com/sql/t-sql/functions/date-and-time-data-types-and-functions-transact-sql?view=sql-server-2017) , которые не включают смещение часового пояса и не указывают, в каком часовом поясе они находятся. Приложения Canvas предполагают, что эти значения хранятся в формате UTC и обрабатываются как **Локальные пользователи**. Если значения должны быть независимыми от часового пояса, исправьте их для переводов в формате UTC с помощью функции [**TimeZoneOffset**](function-dateadd-datediff.md#converting-to-utc) .

Приложения Canvas используют включаемые сведения о часовом поясе в полях **DateTimeOffset** при преобразовании значения во внутреннее представление UTC приложения. Приложения всегда используют время в формате UTC в качестве часового пояса (Нулевое смещение часового пояса) при записи данных.

Приложения Canvas считывают и записывают значения типа данных [**time**](https://docs.microsoft.com/sql/t-sql/data-types/time-transact-sql) в SQL Server как текстовые строки в [формате длительности ISO 8601](https://en.wikipedia.org/wiki/ISO_8601#Durations). Например, необходимо проанализировать этот формат строки и использовать функцию [**time**](function-date-time.md) для преобразования текстовой строки **"PT2H1M39S"** в значение **времени** :

```powerapps-dot
First(
    ForAll(
        MatchAll( "PT2H1M39S", "PT(?:(?<hours>\d+)H)?(?:(?<minutes>\d+)M)?(?:(?<seconds>\d+)S)?" ),
        Time( Value( hours ), Value( minutes ), Value( seconds ) )
    )
).Value
```

### <a name="mixing-date-and-time-information"></a>Смешивание сведений о дате и времени

**Дата**, **время** **и Дата и время имеют разные** имена, но все они содержат одни и те же сведения о датах и времени. 

Значение **даты** может включать в себя сведения о времени (обычно это полночь). Значение **времени** может содержать сведения о датах (обычно это 1 января 1970 г.). Common Data Service также хранит сведения о времени с полем **только даты** , но по умолчанию отображает только сведения о дате. Точно так же приложения Canvas могут различать эти типы данных для определения форматов и элементов управления по умолчанию.

Не рекомендуется добавлять и вычитать значения даты и времени напрямую, так как часовой пояс и другие преобразования могут привести к путанице. Либо используйте функцию **value** для преобразования значений даты и времени в миллисекунды, а затем для учета часового пояса пользователя приложения или для добавления или вычитания одного из этих значений с помощью функций [**DateAdd**](function-dateadd-datediff.md) и [**DateDiff**](function-dateadd-datediff.md) .

## <a name="option-sets-and-two-options"></a>Наборы параметров и два параметра

Наборы параметров и два параметра содержат два или более вариантов выбора для пользователя приложения. Например, в наборе параметров **заказа** может быть предложено выбрать **новые**, **отгруженные**, **выставленные счета**и **закрытые**. Тип данных с двумя вариантами предлагает только два варианта.

Оба этих типа данных отображают свои метки в контексте текстовой строки. Например, элемент управления Label показывает один из параметров Order-Status, если для свойства **Text** элемента управления задана формула, ссылающаяся на этот набор параметров. Метки параметров могут быть локализованы для пользователей приложений в разных местах.

Когда пользователь приложения выбирает параметр и сохраняет это изменение, приложение передает данные в базу данных, которая хранит эти данные в представлении, независимом от языка. Параметр в наборе параметров передается и сохраняется как число, а параметр в типе данных с двумя вариантами передается и сохраняется как логическое значение.

Метки предназначены только для экранных целей. Вы не можете выполнять прямые сравнения с метками, так как они относятся к определенному языку. Вместо этого каждый набор параметров имеет перечисление, которое работает с базовым числом или логическим значением. Например, нельзя использовать эту формулу:

`If( ThisItem.OrderStatus = "Active", ...`

Но можно использовать следующую формулу:

`If( ThisItem.OrderStatus = OrderStatus.Active, ...`

Для глобальных наборов параметров (общих сущностей) имя перечисления Option-Set соответствует имени глобального набора параметров. Для локальных наборов параметров (которые находятся в пределах сущности) имя может содержать имя сущности. Такое поведение позволяет избежать конфликтов, если несколько сущностей имеют наборы параметров с одинаковыми именами. Например, сущность **Accounts** может иметь набор параметров **OrderStatus** , а имя может быть **OrderStatus (Accounts)** . Это имя содержит один или несколько пробелов и скобок, поэтому при ссылке на него в формуле необходимо заключить его в одинарные кавычки.

Кроме того, значения двух параметров могут также вести себя как логические значения. Например, значение с двумя вариантами, именуемое **таксстатус** , может иметь наклейки с **налогооблагаемыми** и **неналогооблагаемыми**, которые соответствуют *true* и *false* соответственно. Для демонстрации можно использовать следующую формулу:

`If( ThisItem.Taxable = TaxStatus.Taxable, ...`

Также можно использовать эту эквивалентную формулу:

`If( ThisItem.Taxable, ...`