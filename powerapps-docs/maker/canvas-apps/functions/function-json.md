---
title: Функция JSON | Документация Майкрософт
description: Справочные сведения, включая синтаксис, для функции JSON в PowerApps
author: gregli-msft
manager: kvivek
ms.service: powerapps
ms.topic: reference
ms.custom: canvas
ms.reviewer: tapanm
ms.date: 05/02/2019
ms.author: gregli
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: ba852093da05c3fa69cc47b219a0bef65908c170
ms.sourcegitcommit: 7c1e70e94d75140955518349e6f9130ce3fd094e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "71992624"
ms.PowerAppsDecimalTransform: true
---
# <a name="json-function-in-powerapps"></a>Функция JSON в PowerApps

Создает текстовую строку JSON для таблицы, записи или значения.

## <a name="description"></a>Description

Функция **JSON** возвращает представление НОТАЦИЯ объектов JavaScript (JSON) структуры данных в виде текста, чтобы его можно было хранить или передавать по сети. [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf) и [IETF RFC 8259](https://tools.ietf.org/html/rfc8259) описывают формат, который широко используется JavaScript и другими языками программирования.

Приложения Canvas поддерживают [типы данных](data-types.md) , приведенные в этой таблице, с подробными сведениями о их текстовом представлении:

| Тип данных | Description | Пример результата |
|-----------|-------------|---------|
| **Логическая** | *true* или *false*. | `true` |
| **Цвет** | Строка, содержащая 8-значное шестнадцатеричное представление цвета. В этом представлении используется формат #*ррггббаа*, где *RR* — красный компонент, *GG* — зеленый, *BB* — синий, а *AA* — альфа-канал. Для альфа-канала **00** является полностью прозрачным, а **FF** — полностью непрозрачным. Строку можно передать в функцию [**колорвалуе**](function-colors.md) .  | `"#102030ff"` |
| **Валюта** | Число, использующее соответствующий десятичный разделитель для языка пользователя. При необходимости используется экспоненциальная нотация. | `1,345` |
| **Дата** | Строка, содержащая дату в формате ISO 8601 **гггг-мм-дд** . | `"2019-03-31"` |
| **DateTime** | Строка, содержащая дату и время ISO 8601. Значения даты и времени задаются в формате UTC, а завершающее "Z" означает.  | `"2019-03-31T22:32:06.822Z"`  |
| **УСТРОЙСТВА** | Строка, содержащая значение GUID. Буквы приведены в нижнем регистре. | `"751b58ac-380e-4a04-a925-9f375995cc40"`
| **Изображение, мультимедиа** | Если указан **инклудебинаридата** , файлы мультимедиа кодируются в виде строки. Веб-ссылки, использующие схему HTTP: или HTTPS: URL-адрес, не изменяются. Ссылки на двоичные данные в памяти кодируются с помощью формата ["Data:*MIMEType*; Base64,..."](https://en.wikipedia.org/wiki/Data_URI_scheme) . Данные в памяти включают изображения, захваченные пользователями с помощью элемента управления [**Camera**](../controls/control-camera.md) и других ссылок с схемами URL-адресов аппрес: и BLOB:.| `"data:image/jpeg;base64,/9j/4AA..."` |
| **Нумерация** | Число, использующее соответствующий десятичный разделитель для языка пользователя. При необходимости используется экспоненциальная нотация. | `1,345` |
| **Параметр &nbsp;set** | Числовое значение набора параметров, а не метки, используемой для вывода. Числовое значение используется, так как оно не зависит от языка.  | `1001` |
| **Таймаут** | Строка, содержащая формат ISO 8601 *чч: мм: СС. FFF* .  | `"23:12:49.000"` |
| **Записать** | Разделенный запятыми список полей и их значений между **{** и **}** . Эта нотация похожа на записи в приложениях Canvas, но имя всегда заключено в двойные кавычки. Этот формат не поддерживает записи, основанные на связях "многие к одному".  | `{ "First Name": "Fred"; "Age": 21 }` |
| **Таблица** | Список с разделителями-запятыми (от **[** до **]** ) записей. Этот формат не поддерживает таблицы, основанные на связях "один ко многим".  | `[ { "First Name": "Fred"; "Age": 21 }; { "First Name": "Jean"; "Age": 20 } ]` |
| **Два &nbsp;option** | Логическое значение двух параметров ( *true* или *false*), а не метка, используемая для вывода. Логическое значение используется, так как оно не зависит от языка. | `false` |
| **Гиперссылка, текст** | Строка между двойными кавычками. Функция переключает внедренные двойные кавычки обратной косой чертой, заменяет символы новой строки символом "\n" и делает другие стандартные замены JavaScript. | `"This is a string."` |

Укажите необязательный аргумент *формата* для управления тем, как может быть прочитан результат, а также как обрабатываются неподдерживаемые и двоичные типы данных. По умолчанию выходные данные имеют максимально компактную длину без ненужных пробелов или символов новой строки, а также неподдерживаемые типы данных и двоичные данные не допускаются. Если указан оператор **&** , можно объединить несколько форматов.

| Перечисление JSONFormat | Description |
|-----------------|-------------|
| **Свернут** | Значение по умолчанию.  Выходные данные должны быть как можно более компактными без добавленных пробелов или новых символов новой строки. |
| **индентфаур** | Для повышения удобочитаемости выходные данные содержат символы новой строки для каждого столбца и уровня вложенности и используют четыре пробела для каждого уровня отступа. |
| **инклудебинаридата** | Результат включает в себя столбцы Image, Video и Audio-Clip. Этот формат может значительно увеличить размер результата и снизить производительность приложения. |
| **игноребинаридата** | Результат не включает в себя столбцы Image, Video или Audio-Clip. Если не указать ни **инклудебинаридата** , ни **игноребинаридата**, функция выдаст ошибку при обнаружении двоичных данных. |
| **игнореунсуппортедтипес** | Разрешены неподдерживаемые типы данных, но результат их не будет содержать. По умолчанию неподдерживаемые типы данных выдают ошибку. |

Используйте функции [ **Шовколумнс** и **дропколумнс** ](function-table-shaping.md) для управления данными, включаемыми в результат, и удаления неподдерживаемых типов данных.

Так как **JSON** может быть как памятью, так и вычислительной интенсивностью, эту функцию можно использовать только в [функциях поведения](../working-with-formulas-in-depth.md). Результат из **JSON** можно записать в [переменную](../working-with-variables.md), которую затем можно использовать в потоке данных.

Если столбец содержит и отображаемое имя, и логическое имя, результат содержит логическое имя. Отображаемые имена соответствуют языку пользователя приложения и, следовательно, не подходят для обмена данными с общей службой.

## <a name="syntax"></a>Синтаксис

**JSON**( *Структура структуры* ; *Формат* ])

* Требуется *Структура структуры* . Структура данных для преобразования в формат JSON.  Таблицы, записи и примитивные значения поддерживаются с произвольной вложенностью.
* *Format* — необязательный.  Значение перечисления **JSONFormat** . Значение по умолчанию — **Compact**, что не добавляет символы новой строки или пробелы и блокирует двоичные данные и неподдерживаемые столбцы.

## <a name="examples"></a>Примеры

### <a name="hierarchical-data"></a>Иерархические данные

1. Вставьте элемент управления [ **"Кнопка"** ](../controls/control-button.md) и задайте для его свойства **OnSelect** значение этой формулы.

    ```powerapps-comma
    ClearCollect( CityPopulations;
        { City: "London";    Country: "United Kingdom"; Population: 8615000 };
        { City: "Berlin";    Country: "Germany";        Population: 3562000 };
        { City: "Madrid";    Country: "Spain";          Population: 3165000 };
        { City: "Hamburg";   Country: "Germany";        Population: 1760000 };
        { City: "Barcelona"; Country: "Spain";          Population: 1602000 };
        { City: "Munich";    Country: "Germany";        Population: 1494000 }
    );;
    ClearCollect( CitiesByCountry; GroupBy( CityPopulations; "Country"; "Cities" ) )
    ```

1. Нажмите кнопку, удерживая клавишу ALT.

    Коллекция **Цитиесбикаунтри** создается с помощью этой структуры данных, которую можно отобразить, выбрав пункт **коллекции** в меню **файл** , а затем выбрав имя коллекции.

    > [!div class="mx-imgBorder"]
    > ](media/function-json/cities-grouped.png) коллекции ![Цитиесбикаунтри

    Эту коллекцию также можно отобразить, выбрав **файл**  > **Параметры приложения**  > **Дополнительные параметры**  > **включить представление результатов панели формул**, выбрав имя коллекции в строке формул, а затем выбрав элемент Стрелка вниз рядом с именем коллекции в строке формул.

    > [!div class="mx-imgBorder"]
    > ![коллекции в представлении результатов в строке формул](media/function-json/cities-grouped-resultview.png)

1. Вставьте еще одну кнопку и задайте для ее свойства **OnSelect** следующую формулу:

    ```powerapps-comma
    Set( CitiesByCountryJSON; JSON( CitiesByCountry ) )
    ```

    Эта формула задает для глобальной переменной **Цитиесбикаунтрижсон** представление JSON для **Цитиесбикаунтри**.

1. Нажмите кнопку, удерживая клавишу ALT.

1. Вставьте элемент управления [**Label**](../controls/control-text-box.md) и присвойте его свойству **Text** значение этой переменной.

    ```powerapps-comma
    CitiesByCountryJSON
    ```

    Метка показывает этот результат, все в одной строке без пробелов, подходящих для передачи по сети:

    ```json
    [{"Cities":[{"City":"London","Population":8615000}],"Country":"United Kingdom"},{"Cities":[{"City":"Berlin","Population":3562000},{"City":"Hamburg","Population":1760000},{"City":"Munich","Population":1494000}],"Country":"Germany"},{"Cities":[{"City":"Madrid","Population":3165000},{"City":"Barcelona","Population":1602000}],"Country":"Spain"}]
    ```

1. Измените формулу второй кнопки, чтобы сделать вывод более удобочитаемым.

    ```powerapps-comma
    Set( CitiesByCountryJSON; JSON(CitiesByCountry; JSONFormat.IndentFour ))
    ```

1. Нажмите вторую кнопку, удерживая нажатой клавишу ALT.

    Метка показывает более удобный для чтения результат.

    ```json
    [
        {
            "Cities": [
                {
                    "City": "London",
                    "Population": 8615000
                }
            ],
            "Country": "United Kingdom"
        },
        {
            "Cities": [
                {
                    "City": "Berlin",
                    "Population": 3562000
                },
                {
                    "City": "Hamburg",
                    "Population": 1760000
                },
                {
                    "City": "Munich",
                    "Population": 1494000
                }
            ],
            "Country": "Germany"
        },
        {
            "Cities": [
                {
                    "City": "Madrid",
                    "Population": 3165000
                },
                {
                    "City": "Barcelona",
                    "Population": 1602000
                }
            ],
            "Country": "Spain"
        }
    ]
    ```

### <a name="images-and-media-in-base64"></a>Образы и мультимедиа в Base64

1. Добавление элемента управления [**Image**](../controls/control-image.md) .

    Этот элемент управления переносит **самплеимаже** .

1. Добавьте элемент управления [ **"Кнопка"** ](../controls/control-button.md) и задайте для него в качестве значения свойства **OnSelect** эту формулу.

    ```powerapps-comma
    Set( ImageJSON; JSON( SampleImage; JSONFormat.IncludeBinaryData ) )
    ```

1. Нажмите кнопку, удерживая клавишу ALT.

1. Добавьте метку и присвойте ее свойству **Text** значение этой переменной.

    ```powerapps-comma
    ImageJSON
    ```

1. Измените размер элемента управления и уменьшите размер шрифта, чтобы отобразить большую часть результата.

    Метка показывает текстовую строку, захваченную функцией **JSON** .

    ```json
    "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjxzdmcgdmVyc2lvbj0iMS4xIg0KCSB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczphPSJodHRwOi8vbnMuYWRvYmUuY29tL0Fkb2JlU1ZHVmlld2VyRXh0ZW5zaW9ucy8zLjAvIg0KCSB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjI3MHB4IiBoZWlnaHQ9IjI3MHB4IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNzAgMjcwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCgk8ZyBjbGFzcz0ic3QwIj4NCgkJPHJlY3QgeT0iMC43IiBmaWxsPSIjRTlFOUU5IiB3aWR0aD0iMjY5IiBoZWlnaHQ9IjI2OS4zIi8+DQoJCTxwb2x5Z29uIGZpbGw9IiNDQkNCQ0EiIHBvaW50cz0iMjc3LjksMTg3LjEgMjQ1LDE0My40IDE4OC42LDIwMi44IDc1LDgwLjUgLTQuMSwxNjUuMyAtNC4xLDI3MiAyNzcuOSwyNzIiLz4NCgkJPGVsbGlwc2UgZmlsbD0iI0NCQ0JDQSIgY3g9IjIwMi40IiBjeT0iODQuMSIgcng9IjI0LjQiIHJ5PSIyNC4zIi8+DQoJPC9nPg0KPC9zdmc+"
    ```
