---
title: Функции Collect, Clear и ClearCollect | Документация Майкрософт
description: Справочные сведения о функциях Collect, Clear и ClearCollect в PowerApps, включая описание синтаксиса и примеры
author: gregli-msft
manager: kvivek
ms.service: powerapps
ms.topic: reference
ms.custom: canvas
ms.reviewer: anneta
ms.date: 09/14/2019
ms.author: gregli
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: 2db3d31936329444746620e91e3414be914087d2
ms.sourcegitcommit: 5899d37e38ed7111d5a9d9f3561449782702a5e9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/17/2019
ms.locfileid: "71038194"
---
# <a name="collect-clear-and-clearcollect-functions-in-powerapps"></a>Функции Collect, Clear и ClearCollect в PowerApps

Создание и удаление [коллекций](../working-with-data-sources.md#collections) и добавление [записей](../working-with-tables.md#records) в любом [источнике данных](../working-with-data-sources.md).

## <a name="description"></a>Описание

### <a name="collect"></a>Collect

Функция **Collect** добавляет записи в источнике данных. Возможно добавление следующих элементов:

- Одно значение: Значение помещается в поле **[значения](function-value.md)** новой записи.  Поля всех остальных свойств остаются [пустыми](function-isblank-isempty.md).
- Запись A: Каждое именованное свойство помещается в соответствующее свойство новой записи.  Поля всех остальных свойств остаются пустыми.
- [Таблица](../working-with-tables.md): Каждая запись таблицы добавляется как отдельная запись источника данных, как описано выше. Таблица не добавляется в запись в виде вложенной таблицы. Для выполнения этой задачи сначала перенесите таблицу в запись.

При использовании вместе с коллекцией будут созданы дополнительные [столбцы](../working-with-tables.md#columns), если это необходимо. Столбцы для других источников данных зафиксированы источником данных, и новые столбцы добавить нельзя.  

Если источник данных еще не существует, создается коллекция.

Коллекции иногда используются для хранения глобальных переменных или создания временной копии источника данных. Служба PowerApps основывается на формулах, которые автоматически вычисляются при взаимодействии пользователя с приложением. Для коллекций эта возможность недоступна, а их использование может усложнить как процесс создания, так и структуру самого приложения. Прежде чем использовать коллекцию таким образом, просмотрите раздел о [работе с переменными](../working-with-variables.md).

Можно также использовать функцию **[Patch](function-patch.md)** для создания записей в источнике данных.

Функция **Collect** возвращает измененный источник данных в виде таблицы.  Функция **Collect** может использоваться только в [формуле поведения](../working-with-formulas-in-depth.md).

### <a name="clear"></a>Clear

Функция **Clear** удаляет все записи из коллекции.  Столбцы в коллекции остаются.

Обратите внимание, что функция **Clear** работает только с коллекциями и не работает с источниками данных другого типа.  Для этой цели можно использовать формулу **[RemoveIf](function-remove-removeif.md)( *DataSource*, true )** .  Будьте осторожны, так как это приведет к удалению всех записей из хранилища источника данных и может повлиять на других пользователей.

Можно использовать функцию **[Remove](function-remove-removeif.md)** для выборочного удаления записей.

Функция **Clear** не возвращает никакого значения.  Ее можно использовать только в формуле поведения.

### <a name="clearcollect"></a>ClearCollect

Функция **ClearCollect** удаляет все записи из коллекции, а затем добавляет в эту же коллекцию другой набор записей.  Функция **ClearCollect** сочетает в себе возможности функций **Clear** и **Collect**.

Функция **ClearCollect** возвращает измененную коллекцию в виде таблицы.  Функцию **ClearCollect** можно использовать только в формуле поведения.

## <a name="syntax"></a>Синтаксис

**Collect**( *DataSource*, *Item*, ... )

* *источник_данных* — обязательный аргумент. Это источник данных, в который необходимо добавить данные.  Если он еще не существует, создается новая коллекция.
* *Item(s)*  — обязательный аргумент.  Одна или несколько записей или таблиц, которые необходимо добавить в источник данных.  

**Clear**( *Collection* )

* *Collection* — обязательный аргумент. Коллекция, которую необходимо очистить.

**ClearCollect**( *Collection*, *Item*, ... )

* *Collection* — обязательный аргумент. Коллекция, которую необходимо очистить, а затем добавить в нее данные.
* *Item(s)*  — обязательный аргумент.  Одна или несколько записей или таблиц, которые необходимо добавить в источник данных.  

## <a name="examples"></a>Примеры

### <a name="clearing-and-adding-records-to-a-data-source"></a>Удаление и добавление записей в источнике данных

В этих примерах показано удаление и добавление данных в коллекции под названием **IceCream**. В источнике данных содержится следующее:

![Образец источника данных](media/function-clear-collect-clearcollect/icecream.png)

| Формула | Описание | Возвращаемый результат |
| --- | --- | --- |
| **ClearCollect( IceCream, {&nbsp;Flavor:&nbsp;"Strawberry",&nbsp;Quantity:&nbsp;300&nbsp;} )** |Выполняется удаление всех данных из коллекции **IceCream** и добавляется запись, в которой указано количестве клубничного мороженого. |<style>img {max-width: None}</style> ![Таблица с одной записью](media/function-clear-collect-clearcollect/icecream-clearcollect.png)<br><br>Коллекция **ицекреам** также была изменена. |
| **Collect( IceCream, {&nbsp;Flavor:&nbsp;"Pistachio",&nbsp;Quantity:&nbsp;40&nbsp;}, {&nbsp;Flavor:&nbsp;"Orange",&nbsp;Quantity:&nbsp;200&nbsp;}  )** |Добавляет две записи в коллекцию **ицекреам** , включающую количество фисташковые и оранжевый мороженого. |![Таблица с двумя записями](media/function-clear-collect-clearcollect/icecream-collect.png)<br><br>Коллекция **ицекреам** также была изменена. |
| **Clear( IceCream )** |Выполняется удаление всех записей из коллекции **IceCream**. |![Пустая таблица](media/function-clear-collect-clearcollect/icecream-clear.png)<br><br>Коллекция **ицекреам** также была изменена. |

Пошаговые примеры создания коллекции см. в разделе [Создание и обновление коллекции](../create-update-collection.md).

### <a name="records-and-tables"></a>Записи и таблицы

В этих примерах рассматриваются способы обработки и **клеарколлект** аргументов **записи и таблицы** .

| Формула | Описание | Результат |
| --- | --- | --- |
| **Клеарколлект (ицекреам, {&nbsp;разновидность&nbsp;: "шоколад"&nbsp;, Quantity&nbsp;:&nbsp;100},&nbsp;{флаг&nbsp;: "обычный"&nbsp;, Quantity&nbsp;: 200 &nbsp;}  )** | Очистите все данные, а затем добавляет две записи в коллекцию **ицекреам** , включающую количество шоколадного и обычныйного мороженого.  Добавляемые записи предоставляются как отдельные аргументы функции.| ![Записи шоколадного и Обычныйного добавления в коллекцию](media/function-clear-collect-clearcollect/icecream.png) <br><br>Коллекция **ицекреам** также была изменена. |
| **Клеарколлект (ицекреам, таблица ({&nbsp;разновидность&nbsp;: "шоколад"&nbsp;, Quantity&nbsp;:&nbsp;100},&nbsp;{версия&nbsp;: "обычный"&nbsp;, количество&nbsp; : 200&nbsp;}))** | То же, что и в предыдущем примере, за исключением того, что записи объединяются в таблицу и передаются через один аргумент. Содержимое таблицы извлекается по записи перед добавлением в коллекцию **ицекреам** . | ![Записи шоколадного и Обычныйного добавления в коллекцию](media/function-clear-collect-clearcollect/icecream.png)<br><br>Коллекция **ицекреам** также была изменена. |
| **Клеарколлект (ицекреам,<br>{&nbsp;мифаворитес: Таблица ({&nbsp;флаг:&nbsp;"чокоалте",&nbsp;Quantity:&nbsp;100&nbsp;}, {&nbsp;флаг:&nbsp;"обычный",&nbsp;количество:&nbsp;200&nbsp; } ) } )** | То же, что и в предыдущем примере, за исключением того, что таблица упакована в запись.  Записи таблицы не извлекаются, а вместо этого вся таблица добавляется в качестве подтаблицы записи. | ![Записи шоколадного и Обычныйного добавления в коллекцию](media/function-clear-collect-clearcollect/icecream-myfavorites.png)<br><br>Коллекция **ицекреам** также была изменена. |

