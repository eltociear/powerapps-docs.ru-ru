---
title: Функции SaveData и LoadData | Документация Майкрософт
description: Справочные сведения, включая синтаксис, для функций SaveData и LoadData в Power Apps
author: gregli-msft
manager: kvivek
ms.service: powerapps
ms.topic: reference
ms.custom: canvas
ms.reviewer: tapanm
ms.date: 01/31/2019
ms.author: gregli
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: 11208b68c3ec63f3a762771844adaaf7cd35aec1
ms.sourcegitcommit: 129d004e3d33249b21e8f53e0217030b5c28b53f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2020
ms.locfileid: "78265299"
---
# <a name="savedata-and-loaddata-functions-in-power-apps"></a>Функции SaveData и LoadData в Power Apps
Сохраняет и повторно загружает [коллекцию](../working-with-data-sources.md#collections) с локального устройства.

## <a name="description"></a>Описание
Функция **SaveData** сохраняет коллекцию под определенным именем для дальнейшего использования.  

Функция **LoadData** загружает коллекцию с определенным именем, сохраненную ранее с помощью функции **SaveData**. С помощью этой функции нельзя загрузить коллекцию из другого источника.  

Используйте эти функции, чтобы повысить производительность при запуске приложений путем кэширования данных в формуле **[app. OnStart](../controls/control-screen.md#additional-properties)** при первом выполнении, а затем повторной загрузке локального кэша при последующих запусках. Эти функции также можно использовать для добавления в приложение [простых автономных возможностей](../offline-apps.md) .

Эти функции нельзя использовать в браузере при создании приложения в Power Apps Studio или при запуске приложения в веб-проигрывателе. Чтобы протестировать приложение, запустите его в Power Apps Mobile на устройстве iPhone или Android.

Эти функции ограничены объемом доступной памяти приложения, так как они работают с коллекцией в памяти. Объем доступной памяти зависит от устройства и операционной системы, объема памяти, используемого проигрывателем Power Apps, и сложности приложения с точки зрения экранов и элементов управления. Если вы храните более нескольких мегабайт данных, протестируйте приложение с ожидаемыми сценариями на устройствах, на которых ожидается запуск приложения. Обычно следует рассчитывать от 30 до 70 МБ доступной памяти.  

Эти функции зависят от коллекции, неявно определенной при наличии вызова функции **[сбора](function-clear-collect-clearcollect.md)** или **[клеарколлект](function-clear-collect-clearcollect.md)** в любой формуле в приложении.  Нет необходимости вызывать метод **сбора** или **клеарколлект** для загрузки данных в коллекцию, чтобы определить их, что является общим случаем при использовании **LoadData** после предыдущего **SaveData**.  Все, что требуется, — это наличие этих функций в формуле для неявного определения структуры коллекции.  Дополнительные сведения см. в разделе [Создание и удаление переменных](../working-with-variables.md#create-and-remove-variables).

Загруженные данные будут добавлены в коллекцию. Используйте функцию **[clear](function-clear-collect-clearcollect.md)** перед вызовом **LoadData** , если хотите начать с пустой коллекции.

Встроенные средства изолированного приложения устройства используются для изоляции сохраненных данных от других приложений.  Устройство также может шифровать данные, или можно использовать средство управления мобильными устройствами, например [Microsoft Intune](https://www.microsoft.com/en-us/microsoft-365/enterprise-mobility-security/microsoft-intune) для шифрования при необходимости.

## <a name="syntax"></a>Синтаксис
**SaveData**(*коллекция*, *имя*)<br>**LoadData**( *коллекция*, *имя* [, *IgnoreNonexistentFile* ])

* *коллекция* — обязательный аргумент.  Коллекция, которую требуется сохранить или загрузить.
* *имя* — обязательный аргумент.  Название хранилища. Для сохранения и загрузки одного набора данных необходимо использовать одинаковое имя. Пространство имен не используется совместно с другими приложениями и пользователями.
* *IgnoreNonexistentFile* — необязательный параметр. Логическое значение, указывающее, что делать, если файл еще не существует.  Используйте *значение false* (по умолчанию), чтобы вернуть ошибку, и *значение true* , чтобы подавить ошибку.   

## <a name="examples"></a>Примеры

| Формула | Описание | Возвращаемый результат |
| --- | --- | --- |
| **SaveData (Локалкаче, "Микаче")** | Сохраните коллекцию **локалкаче** на устройстве пользователя под именем "микаче", которое подходит для **LoadData** для последующего получения. | Данные сохраняются на локальном устройстве. |
| **LoadData (Локалкаче, "Микаче")** | Загружает коллекцию **локалкаче** с устройства пользователя под именем "микаче", которое ранее хранилось с помощью вызова **SaveData**.  | Данные загружаются с локального устройства. |   

### <a name="simple-offline-example"></a>Простой пример автономной работы

Этот очень простой пример фиксирует и сохраняет имена и рисунки ежедневных элементов в автономном режиме.  Она хранит сведения в локальном хранилище устройства для последующего использования, позволяя закрыть приложение или перезапускать устройство без потери данных.  

Для работы с этим примером необходимо иметь устройство, так как в нем используются функции **LoadData** и **SaveData** , не работающие в веб-браузере.

1. Создание пустого приложения Canvas с макетом планшета.  Дополнительные сведения см. в статье [Создание приложения на основе шаблона](../get-started-test-drive.md) и выбор **макета планшета** в поле **пустое приложение**.  

1. Добавьте элемент управления [**Ввод текста**](../controls/control-text-input.md) и элемент управления " [**Камера**](../controls/control-camera.md) " и расположите их примерно так, как показано ниже.
    > [!div class="mx-imgBorder"]  
    > ![текстового ввода и элемента управления камеры, добавленного на пустой экран](media/function-savedata-loaddata/simple-text-camera.png)

1. Добавьте элемент управления [**Button**](../controls/control-button.md) .

2. Дважды щелкните элемент управления "Кнопка", чтобы изменить текст кнопки, чтобы **Добавить элемент** (или изменить свойство **Text** ).

3. Задайте для свойства **онсилкт** элемента управления "Кнопка" эту формулу, которая добавит элемент в коллекцию:
    ```powerapps-dot
    Collect( MyItems, { Item: TextInput1.Text, Picture: Camera1.Photo } )
    ```
    > [!div class="mx-imgBorder"] 
    > ![Добавление элемента управления "Кнопка" с текстом "добавить элемент" и набором свойств "OnSelect"](media/function-savedata-loaddata/simple-additem.png)

1. Добавьте еще один элемент управления **"Кнопка"** .

2. Дважды щелкните элемент управления "Кнопка", чтобы изменить текст кнопки, чтобы **сохранить данные** (или изменить свойство **Text** ).

3. Задайте для свойства **онсилкт** элемента управления "Кнопка" эту формулу, чтобы сохранить коллекцию на локальном устройстве:
    ```powerapps-dot
    SaveData( MyItems, "LocalSavedItems" )
    ```
    > [!div class="mx-imgBorder"] 
    > ![Добавление элемента управления "Кнопка" с текстом "сохранить данные" и набором свойств "OnSelect"](media/function-savedata-loaddata/simple-savedata.png)

    Это позволяет протестировать кнопку и не будет ничего делать, если вы хотите попробовать, но при разработке в веб-браузере появится сообщение об ошибке.  Сначала необходимо сохранить приложение и открыть его на устройстве, прежде чем можно будет протестировать эту формулу.

1. Добавьте третий элемент управления **"Кнопка"** .

2. Дважды щелкните элемент управления "Кнопка", чтобы изменить текст кнопки, чтобы **загрузить данные** (или изменить свойство **Text** ).

3. Задайте для свойства **онсилкт** элемента управления "Кнопка" эту формулу, чтобы загрузить коллекцию с локального устройства:
    ```powerapps-dot
    LoadData( MyItems, "LocalSavedItems" )
    ``` 
    > [!div class="mx-imgBorder"] 
    > ![Добавление элемента управления "Кнопка" с текстом "Загрузка данных" и набором свойств OnSelect](media/function-savedata-loaddata/simple-loaddata.png)

1. Добавление элемента управления " [**Галерея**](../controls/control-gallery.md) " с вертикальным макетом, включающим в себя рисунки и текстовые области: 
    > [!div class="mx-imgBorder"] 
    > ![широкий выбор коллекции, "вертикальный" выбран с областями изображения и текста](media/function-savedata-loaddata/simple-gallery-add.png)

1. При появлении запроса выберите коллекцию **митемс** в качестве источника данных для этой коллекции.  Будет установлено свойство **Items** элемента управления " **коллекция** ": 
    > [!div class="mx-imgBorder"] 
    > ![выбор коллекции источника данных](media/function-savedata-loaddata/simple-gallery-collection.png) элемент управления "изображение" в шаблоне коллекции должен по умолчанию иметь свойство **Image** в **сиситем. Picture** , а элементы управления метками — как по умолчанию **сиситем. Item**.  Проверьте эти формулы, если после добавления элементов в следующих шагах вы не видите ничего в галерее. 

1. Разместите элемент управления справа от других элементов управления: 
    > [!div class="mx-imgBorder"] 
    > ![коллекции перемещается справа от экрана](media/function-savedata-loaddata/simple-gallery-placed.png)

1. Сохраните приложение.  Если она была впервые сохранена, нет необходимости публиковать ее. Если нет, также опубликуйте приложение.

1. Откройте приложение на устройстве, например на телефоне или планшете.  **SaveData** и **LoadData** нельзя использовать в студии или в веб-браузере.  Обновить список приложений если приложение не отображается немедленно, может потребоваться несколько секунд, чтобы приложение отображалось на устройстве.  Выход и возврат в учетную запись может помочь.
    > [!div class="mx-imgBorder"] 
    > ![приложение выполняется без добавления элементов](media/function-savedata-loaddata/simple-mobile.png) после загрузки приложения можно отключиться от сети и запустить приложение в автономном режиме.

1. Введите имя и сделайте снимок элемента.

2. Нажмите кнопку **Добавить элемент** .  Повторите Добавление элементов несколько раз, чтобы загрузить коллекцию.
    > [!div class="mx-imgBorder"] 
    > ![приложение, выполняемое с тремя добавленными элементами](media/function-savedata-loaddata/simple-mobile-with3.png) 

1. Нажмите кнопку **сохранить данные** .  Данные в коллекции будут сохранены на локальном устройстве.

1. Закройте приложение.  Коллекция в памяти будет потеряна, включая все имена и изображения элементов, но они по-прежнему будут находиться в хранилище устройства.

1. Запустите приложение еще раз.  Коллекция в памяти снова будет отображаться как пустая в коллекции.
    > [!div class="mx-imgBorder"] 
    > Повторное выполнение ![приложения без добавления элементов](media/function-savedata-loaddata/simple-mobile.png) 

1. Нажмите кнопку **загрузить данные** .  Коллекция будет повторно заполнена из сохраненных данных на устройстве, и ваши элементы будут возвращены в коллекцию.  Обратите внимание, что коллекция была пустой до того, как эта кнопка вызывает функцию **LoadData** ; перед загрузкой данных из хранилища не нужно вызывать функцию " **получить** " или " **клеарколлект** ".
    > [!div class="mx-imgBorder"] 
    > ![приложение, выполняемое с тремя элементами, восстановленными после вызова функции LoadData](media/function-savedata-loaddata/simple-mobile-load1.png) 

1. Снова нажмите кнопку **загрузить данные** .  Сохраненные данные будут добавлены в конец коллекции, а в галерее появится полоса прокрутки.  Если вы хотите заменить вместо Append, сначала используйте функцию **clear** , чтобы очистить коллекцию перед вызовом функции **LoadData** .
    > [!div class="mx-imgBorder"] 
    > ![приложение, работающее с шестью элементами, восстановленными после вызова функции LoadData, дважды](media/function-savedata-loaddata/simple-mobile-load2.png) 
 
### <a name="more-advanced-offline-example"></a>Пример расширенной работы в автономном режиме

Подробный пример см. в статье о [простых автономных возможностях](../offline-apps.md).







