---
title: Функции IsMatch, Match и MatchAll | Документация Майкрософт
description: Справочные сведения, включая описание синтаксиса IsMatch, Match и MatchAll функциях в PowerApps
author: gregli-msft
manager: kvivek
ms.service: powerapps
ms.topic: reference
ms.custom: canvas
ms.reviewer: anneta
ms.date: 01/15/2019
ms.author: gregli
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: 7141d3b9a2ba6bf18bffe1756d0d7de048606cad
ms.sourcegitcommit: f5013108140276b3d66a9dce13a061df89609d26
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2019
ms.locfileid: "57798382"
---
# <a name="ismatch-match-and-matchall-functions-in-powerapps"></a>IsMatch, Match и MatchAll функции в PowerApps
Проверяет совпадение или извлекает часть строку текста на основе кода.

## <a name="description"></a>Описание
Функция **IsMatch** проверяет, соответствует ли текстовая строка шаблону, который может содержать обычные символы, предварительно определенные шаблоны или [регулярное выражение](#regular-expressions).  **Соответствия** и **MatchAll** функции возвращают, что обнаружено соответствие, в том числе под-совпадений.  

Используйте **IsMatch**, чтобы проверить, что пользователь ввел в элемент управления **[ввод текста](../controls/control-text-input.md)**. Например, можно проверить, ввел ли пользователь допустимый адрес электронной почты, перед сохранением результата в источник данных. Если запись не соответствует условиям, добавьте другие элементы управления, которые напомнят пользователю, что запись необходимо исправить.

Используйте **соответствует** для извлечения первой текстовой строки, соответствующей шаблону и **MatchAll** для извлечения всех текстовых строк, которые соответствуют. Также можно извлекать подсовпадения для анализа сложных строк.   

**Соответствует** возвращает запись данных для первое соответствие, и **MatchAll** возвращает таблицу записей для каждого соответствия, обнаруженного. Одной или нескольких записей содержат:

| Столбец | Тип | Описание |
|----|----|----|
| *с именем sub&#8209;соответствует или sub&#8209;соответствует* | Text | Каждый именованный доллар получат свой собственный столбец. Создать именованный вложенных сопоставления с помощью **(?&lt; *имя*&gt;**... **)** в регулярном выражении. Если именованный доллар имеет то же имя, что один из предопределенных столбцов (см. ниже), один доллар имеет приоритет, и выдается предупреждение. Чтобы устранить это предупреждение, переименуйте один доллар. |
| **FullMatch** | Text | Все строки текста, который может быть сопоставлен. |
| **StartMatch** | Номер | Начальная позиция совпадения в строке ввода текста. Первый символ строки возвращает значение 1. | 
| **Подстроки соответствия** | Таблица с одним столбцом текста (столбец **значение**) | Таблица именованные и неименованные под-совпадений в порядке, в котором они появляются в регулярном выражении. Как правило именованные под-совпадений гораздо проще работать с и рекомендуется. Используйте [ **ForAll** ](function-forall.md) функции или [ **последнего**](function-first-last.md)( [ **FirstN**](function-first-last.md)() **...**  )) функции для работы с отдельными доллар. Если совпадений нет вложенных определены в регулярном выражении, эта таблица будет присутствовать, но пустой. |

Эти функции поддерживают [ **MatchOptions**](#match-options). По умолчанию: 
- Эти функции выполняют совпадение с учетом регистра. Используйте **IgnoreCase** для выполнения соответствия без учета регистра.    
- **IsMatch** соответствует всей строки текста (**завершить** MatchOption), хотя **соответствует** и **MatchAll** поиск совпадения в любом месте в текстовой строке ( **Содержит** MatchOption). Используйте **завершить**, **Contains**, **начинается с**, или **EndsWith** соответствующим образом для вашего сценария.

Если текстовая строка соответствует шаблону, **IsMatch** возвращает значение *true*, в противном случае — *false*. **Соответствует** возвращает *пустой* Если совпадений не найдено, можно протестировать с помощью [ **IsBlank** ](function-isblank-isempty.md) функции. **MatchAll** возвращает пустую таблицу, если совпадений не найдено, можно протестировать с помощью [ **IsEmpty** ](function-isblank-isempty.md) функции.

Если вы используете **MatchAll** для разбиения строки текста, рассмотрите возможность использования **[разбиения](function-split.md)** функцию, которая проще в использовании и быстрее.

## <a name="patterns"></a>Шаблоны
Ключом к использованию этих функций является описание шаблон для сравнения. Опишите шаблон в текстовой строке в виде следующей комбинации:

* Обычные символы, такие как **abc** или **123**.
* Предопределенные шаблоны, такие как **Letter**, **MultipleDigits** или **Email**. (Эти шаблоны определяет перечисление **Match**.)
* Коды регулярных выражений, такие как **«\d+\s+\d+»** или **«[a-z] +»**.

Эти элементы можно сочетать с помощью [оператор объединения строк **&** ](operators.md). Например, **"abc" & Digit & "\s+"** является допустимым шаблоном, который соответствует символам "a", "b" и "c" с последующей цифрой от 0 до 9, за которой следует по крайней мере один пробел.

### <a name="ordinary-characters"></a>Обычные символы
Самый простой шаблон — это последовательность из обычных символов, которые должны точно совпадать.

Например, при использовании с **IsMatch** функции, строки «Hello» соответствует шаблону **«Hello»** точно. И никак иначе. Строка "hello!" не соответствует шаблону из-за восклицательного знака в конце и так как неправильный вариант для буквы «h». (Способы изменения этого поведения см. в разделе [Параметры поиска совпадения](#match-options).)

В языке шаблона некоторые символы зарезервированы для особых целей. Чтобы использовать эти символы, либо используйте перед знаком с **\\** (обратная косая черта), чтобы указать, что символ должен восприниматься буквально, или используйте один из предопределенных шаблонов, описанных далее в этом разделе. В следующей таблице перечислены специальные символы.

| Специальный символ | Описание |
| --- | --- |
| **.** |точка |
| **?** |вопросительный знак |
| **&#42;** |звездочка |
| **\+** |плюс |
| **( )** |Круглые скобки |
| **[ ]** |квадратные скобки |
| **{ }** |фигурные скобки |
| **^** |знак вставки |
| **$** |знак доллара |
| **\|** |вертикальная черта |
| **\\** |обратная косая черта |

Например, можно сопоставить "Hello?" с помощью шаблона **Hello\\?** с обратной косой чертой перед вопросительным знаком.

### <a name="predefined-patterns"></a>Предопределенные шаблоны
Предопределенные шаблоны предоставляют простой способ для сопоставления из набора символов, либо последовательность нескольких символов. Используйте [оператор объединения строк **&** ](operators.md) объединить собственные текстовые строки с членами **соответствия** перечисления:

| Совпадение enum | Описание | Регулярное выражение |
| --- | --- | --- |
| **Any** |Соответствует любому символу. |`.` |
| **Comma** |Соответствует запятой. |`,` |
| **Digit** |Соответствует числу (от 0 до 9). |`\d` |
| **Email** |Соответствует адресу электронной почты, который содержит символ \@ и имя домена с точкой (".") |`.+\@.+\\.[^\\.]{2,}` |
| **Hyphen** |Соответствует дефису. |`\-` |
| **LeftParen** |Соответствует левой круглой скобке "(". |`\(` |
| **Letter** |Соответствует букве. |`\p{L}` |
| **MultipleDigits** |Соответствует одной или нескольких цифр. |`\d+` |
| **MultipleLetters** |Соответствует одной или нескольким буквам. |`\p{L}+` |
| **MultipleNonSpaces** |Соответствует один или несколько символов, которые не добавляют пробел (не места, табуляции или новой строки). |`\S+` |
| **MultipleSpaces** |Соответствует один или несколько символов, которые добавляют пробел (пробел, табуляции или новой строки). |`\s+` |
| **NonSpace** |Соответствует одному знаку, который не добавляет пробел. |`\S` |
| **OptionalDigits** |Соответствует отсутствующей, одной или нескольким цифрам. |`\d*` |
| **OptionalLetters** |Соответствует отсутствующей, одной или нескольким буквам. |`\p{L}*` |
| **OptionalNonSpaces** |Соответствует отсутствующему, одному или нескольким символам, которые не добавляют пробел. |`\S*` |
| **OptionalSpaces** |Соответствует отсутствующему, одному или нескольким символам, которые добавляют пробел. |`\s*` |
| **Period** |Соответствует точке ("."). |`\.` |
| **RightParen** |Соответствует правой круглой скобке ")". |`\)` |
| **Space** |Соответствует символу, который добавляет пробел. |`\s` |

Например, шаблон **"A" & MultipleDigits** будет соответствовать букве "A", за которой следует одна или несколько цифр.  

### <a name="regular-expressions"></a>Регулярные выражения
Шаблон, эти функции используют [регулярное выражение](https://en.wikipedia.org/wiki/Regular_expression). Обычные символы и предварительно определенные шаблоны, описанные ранее в этом разделе справки создания регулярных выражений.  

Регулярные выражения очень эффективны и доступны во многих языках программирования для использования в самых разных целях. Они также часто может выглядеть случайную последовательность из знаков препинания. В этой статье не описываются все аспекты регулярных выражений, но массу информации, руководства и справочники по и средства доступны в Интернете.  

Могут помочь регулярные выражения в различные диалекты и PowerApps используется вариант диалекта JavaScript. См. в разделе [синтаксис регулярных выражений](http://msdn.microsoft.com/library/1400241x.aspx) введение в синтаксис. Поддерживаются именованные под-совпадений (иногда называется именованные группы записи):

- С именем под-совпадений: **(?&lt; *имя* &gt; ...)**
- Именованные обратные ссылки:  **\\k&lt;*имя*&gt;**

В **соответствия** enum таблице ранее в этом разделе отображается каждое условие в той же строке, что его соответствующее регулярное выражение.

## <a name="match-options"></a>Параметры сопоставления
Поведение этих функций можно изменить, указав один или несколько параметров, которые можно комбинировать с помощью оператора объединения строк (**&amp;**).  

| Параметры сопоставления | Описание | Влияние на регулярное выражение |
| --- | --- | --- |
| **BeginsWith** |Шаблон должен совпадать с самого начала текста. |Добавляет **^** в начало регулярного выражения. |
| **Complete** |По умолчанию для **IsMatch**. Шаблон должен соответствовать всю строку текста, от начала до конца. |Добавляет **^** к началу и **$** в конец регулярного выражения. |
| **Contains** |По умолчанию для **соответствия** и **MatchAll**. Шаблон должен присутствовать где-нибудь в тексте, но не обязательно в начале или в конце. |Не изменяет регулярного выражения. |
| **EndsWith** |Шаблон должен соответствовать конец строки текста. |Добавляет **$** в конец регулярного выражения. |
| **IgnoreCase** |Обрабатывает прописные и строчные буквы, как идентичные. По умолчанию при поиске совпадения учитывается регистр. |Не изменяет регулярного выражения. Этот параметр является эквивалентом модификатора standard «i» регулярных выражений.  |
| **Multiline** |Выполняет сопоставление по нескольким строкам. |Не изменяет регулярного выражения. Этот параметр является эквивалентом модификатора standard «m» регулярных выражений. |

С помощью **MatchAll** равнозначно использованию модификатор standard «g» для регулярных выражений.

## <a name="syntax"></a>Синтаксис
**IsMatch**( *текст*, *шаблон* [, *параметры* ] )

* *Текст* — требуется. Текстовая строка для проверки.
* *Шаблон* — требуется. Шаблон для проверки в виде текстовой строки. Связывает предопределенные шаблоны, **соответствия** перечисления определяет, или введите регулярное выражение. *Шаблон* должно быть константное формуле без все переменные, источники данных или других динамических ссылок этого изменения во время выполнения приложения.
* *Параметры* — необязательно. Текстовая строка сочетание **MatchOptions** значения перечисления. По умолчанию используется **MatchOptions.Complete**.

**Совпадение**( *текст*, *шаблон* [, *параметры* ])

* *текст* — обязательный аргумент. Текстовая строка для сопоставления.
* *Шаблон* — требуется. Шаблон для сравнения в виде текстовой строки. Связывает предопределенные шаблоны, **соответствия** перечисления определяет, или введите регулярное выражение. *Шаблон* должно быть константное формуле без все переменные, источники данных или других динамических ссылок этого изменения во время выполнения приложения.
* *Параметры* — необязательно. Текстовая строка сочетание **MatchOptions** значения перечисления. По умолчанию **MatchOptions.Contains** используется.

**MatchAll**( *текст*, *шаблон* [, *параметры* ])

* *текст* — обязательный аргумент. Текстовая строка для сопоставления.
* *Шаблон* — требуется. Шаблон для сравнения в виде текстовой строки. Связывает предопределенные шаблоны, **соответствия** перечисления определяет, или введите регулярное выражение. *Шаблон* должно быть константное формуле без все переменные, источники данных или других динамических ссылок этого изменения во время выполнения приложения.
* *Параметры* — необязательно. Текстовая строка сочетание **MatchOptions** значения перечисления. По умолчанию **MatchOptions.Contains** используется.

## <a name="ismatch-examples"></a>Примеры IsMatch
### <a name="ordinary-characters"></a>Обычные символы
Представьте, что приложение содержит элемент управления **ввода текста** с именем **TextInput1**. Пользователь вводит значения в этот элемент управления для сохранения в базе данных.   

Пользователь вводит в элемент **TextInput1** **Hello world**.

| Формула | Описание | Возвращаемый результат |
| --- | --- | --- |
| `IsMatch( TextInput1.Text, "Hello world" )` |Тесты ли введенные пользователем, точно соответствуют строке «Hello world». |**true** |
| `IsMatch( TextInput1.Text, "Good bye" )` |Тесты ли введенные пользователем, точно соответствуют строке «Good bye». |**false** |
| `IsMatch( TextInput1.Text, "hello", Contains )` |Проверяет, является ли ввод пользователя со словом «hello» (с учетом регистра). |**false** |
| `IsMatch( TextInput1.Text, "hello", Contains & IgnoreCase )` |Проверяет, содержат ли введенные данные слово "hello" (без учета регистра). |**true** |

### <a name="predefined-patterns"></a>Предопределенные шаблоны

|                                                            Формула                                                            |                                                                Описание                                                                |  Возвращаемый результат   |
|-------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|-----------|
| `IsMatch( "123-45-7890", Digit & Digit & Digit & Hyphen & Digit & Digit & Hyphen & Digit & Digit & Digit & Digit )` |                                              Соответствует номеру социального страхования США.                                               | **true**  |
|                                           `IsMatch( "joan@contoso.com", Email )`                                            |                                                         Соответствует адресу электронной почты.                                                          | **true**  |
|                              `IsMatch( "123.456", MultipleDigits & Period & OptionalDigits )`                               |                                   Соответствует последовательности цифр, за которыми следует точка, а затем отсутствующая цифра или другие цифры.                                   | **true**  |
|                                `IsMatch( "123", MultipleDigits & Period & OptionalDigits )`                                 | Соответствует последовательности цифр, за которыми следует точка, а затем отсутствующая цифра или другие цифры. Период не отображается в тексте для сопоставления, поэтому нет соответствия с помощью этого шаблона. | **false** |

### <a name="regular-expressions"></a>Регулярные выражения

|                                                                              Формула                                                                              |                                                                                                                                  Описание                                                                                                                                   |  Возвращаемый результат   |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------|
|                                                                    `IsMatch( "986", "\d+" )`                                                                   |                                                                                                                    Соответствует целым числом больше нуля.                                                                                                                     | **true**  |
|                                                               `IsMatch( "1.02", "\d+(\.\d\d)?" )`                                                              |                                        Обозначает положительную денежную сумму. Если входные данные содержат десятичный разделитель, входные данные, также должен содержать две цифры после десятичной запятой. Например, 3.00 является допустимым значением, а 3.1 — нет.                                         | **true**  |
|                                                            `IsMatch( "-4.95", "(-)?\d+(\.\d\d)?" )`                                                             |                                                        Обозначает положительную или отрицательную денежную сумму. Если входные данные содержат десятичный разделитель, входные данные, также должен содержать две цифры после десятичной запятой.                                                        | **true**  |
|                                                         `IsMatch( "111-11-1111", "\d{3}-\d{2}-\d{4}" )`                                                        | Соответствует номеру социального страхования США. Проверяет формат, тип и длину указанного поля ввода. Строка, сравниваемая должен состоять из трех цифр, следуют дефис, а затем двух цифр, за которой следует тире и затем четыре цифры. | **true**  |
|                                                         `IsMatch( "111-111-111", "\d{3}-\d{2}-\d{4}" )`                                                         |                                                                                               Аналогично предыдущему примеру, но во входных данных отсутствует один из дефисов.                                                                                               | **false** |
|                                         `IsMatch( "AStrongPasswordNot", "(?!^[0-9]\*$)(?!^[a-zA-Z]\*$)([a-zA-Z0-9]{8,10})" )`                                        |                                        Проверяет надежность пароля, который должен содержать 8, 9 или 10 символов, хотя бы одну цифру и по крайней мере одна буква. Строка не должна содержать специальные символы.                                        | **false** |
| `IsMatch( "<http://microsoft.com>", "(ht&#124;f)tp(s?)\:\/\/\[0-9a-zA-Z\]([-.\w]\*[0-9a-zA-Z])\*(:(0-9)\*)\*(\/?)([a-zA-Z0-9\-\.\?\,\'\/\\\+&%\$#_]\*)?" )` |                                                                                                                     Проверяет URL-адрес HTTP, HTTPS или FTP.                                                                                                                      | **true**  |

## <a name="match-and-matchall-examples"></a>Примеры сопоставления и MatchAll

| Формула | Описание | Возвращаемый результат |
|--------|------------|-----------|
| `Match( "Bob Jones <bob.jones@contoso.com>", "<(?<email>" & Match.Email & ")>"` | Выделяет только адрес электронной почты контактные данные.  | {<br>адрес электронной почты:&nbsp;"bob.jones@contoso.com«,<br>FullMatch:&nbsp;"&lt;bob.jones@contoso.com>»,<br>Подстроки соответствия:&nbsp;[&nbsp;"bob.jones@contoso.com"&nbsp;],<br>StartMatch: 11<br>}  
| `Match( "Bob Jones <InvalidEmailAddress>", "<(?<email>" & Match.Email & ")>"` | Выделяет только адрес электронной почты контактные данные. Найден не юридический адрес (отсутствует знак @ не), поэтому функция возвращает *пустой*. | *пустое значение* |  
| `Match( Language(), "(<language>\w{2})(?:-(?<script>\w{4}))?(?:-(?<region>\w{2}))?" )` | Извлекает части язык, язык, скрипт и регион тег, который **[языка](function-language.md)** возврата функции. Эти результаты отражают США; см. в разделе [ **языка** документации по функции](function-language.md) Дополнительные примеры.  **(?:** Оператор групп символов без создания другой один доллар. | {<br>язык: «en»,<br>сценарий: *пустой*, <br>Регион: «США»,<br>FullMatch: «en US», <br>Подстроки соответствия: [«en», «», «США»], <br>StartMatch: 1<br>} 
| `Match( "PT2H1M39S", "PT(?:(<hours>\d+)H)?(?:(?<minutes>\d+)M)?(?:(?<seconds>\d+)S)?" )` | Извлекает часы, минуты и секунды из значения длительности ISO 8601. Извлеченные номера все еще находятся в текстовой строке; Используйте [ **значение** ](function-value.md) функцию для преобразования в число этих прежде, чем на нем выполняются математические операции.  | {<br> часы: "2",<br>минут: "1",<br>секунд: "39",<br>FullMatch: «PT2H1M39S»,<br>SubMatches:&nbsp;[&nbsp;"2",&nbsp;"1",&nbsp;"39"&nbsp;],<br>StartMatch: 1<br>} |

Давайте подробнее рассмотрим последнего примера. Если вы хотите преобразовать эту строку в значение даты и времени с помощью **[время](function-date-time.md)** функцию, необходимо передать в именованный под-совпадений по отдельности. Чтобы сделать это, можно использовать **[ForAll](function-forall.md)** функции, работающие с первой записи, **MatchAll** возвращает:

``` powerapps-dot
First( 
    ForAll( 
        MatchAll( "PT2H1M39S", "PT(?:(?<hours>\d+)H)?(?:(?<minutes>\d+)M)?(?:(?<seconds>\d+)S)?" ), 
        Time( Value( hours ), Value( minutes ), Value( seconds ) )
    )
).Value
```

Эти примеры, добавьте [кнопку](../controls/control-button.md) , назначьте его **OnSelect** свойства для этой формулы, а затем выберите кнопку:

``` powerapps-dot
Set( pangram, "The quick brown fox jumps over the lazy dog." )
```
 
| Формула | Описание | Возвращаемый результат |
|---------|-------------|--------|
| `Match( pangram, "THE", IgnoreCase )` | Поиск всех вхождений «» в тексте-строка, **pangram** содержит переменную. Строка содержит два совпадения, но возвращается только первый, так как вы используете **соответствия** и не **MatchAll**. Столбец подстрок соответствия пуст, так как были определены под-совпадений.  | {<br>FullMatch: «»<br>Подстроки соответствия: [&nbsp;],<br>StartMatch: 32<br>} |
| `MatchAll( pangram, "the" )` | Поиск всех вхождений «» в текстовой строке **pangram** содержит переменную. Тест чувствительно к регистру, только найти со вторым экземпляром «». Столбец подстрок соответствия пуст, так как были определены под-совпадений.  | <style> img { max-width: none } </style> ![](media/function-ismatch/pangram-the-one.png) |
| `MatchAll( pangram, "the", IgnoreCase )` | Поиск всех вхождений «» в текстовой строке **pangram** содержит переменную. В этом случае тест регистр не учитывается, таким образом, чтобы оба экземпляра слова являются. Столбец подстрок соответствия пуст, так как были определены под-совпадений.  | <style> img { max-width: none } </style> ![](media/function-ismatch/pangram-the-two.png) |
| `MatchAll( pangram, "\b\wo\w\b" )` | Находит все слова трехбуквенный с «o» в середине. Обратите внимание на то, что «brown» исключен, так как он не является слово из трех букв и, таким образом, не удается сопоставить «\b» (границе слова).  | <style> img { max-width: none } </style> ![](media/function-ismatch/pangram-fox-dog.png) |
| `Match( pangram, "\b\wo\w\b\s\*(?<between>\w.+\w)\s\*\b\wo\w\b" )` | Соответствует всем символам между «лиса» и «dog». | {<br>между:&nbsp;«переходит&nbsp;над&nbsp;&nbsp;отложенной»,<br>FullMatch:&nbsp;«fox&nbsp;переходит&nbsp;над&nbsp;&nbsp;отложенной&nbsp;dog»,<br>Подстроки соответствия: [«перескакивает через поток модуля»],<br>StartMatch: 17<br> } |

Чтобы просмотреть результаты его **MatchAll** в коллекции:

1. Вставьте в пустом экране пустая, вертикальная **[коллекции](../controls/control-gallery.md)** элемента управления.

2. Укажите для ее **элементы** свойства **MatchAll (pangram, «\w+»)** или **MatchAll (pangram MultipleLetters)**.

    ![](media/function-ismatch/pangram-gallery1.png)

3. Выберите «Добавить элемент из вкладки «Вставка»» середине элемент управления галереи можно выбрать шаблон из коллекции. 

5. Добавить **[метка](../controls/control-text-box.md)** управления шаблона коллекции.  

4. Задание метки **текст** свойства **ThisItem.FullMatch**.  
 
    Коллекции заполняется каждое слово в нашем примере текст.  Измените размер шаблона коллекции и элемент управления label, чтобы увидеть все слова на одном экране.

    ![](media/function-ismatch/pangram-gallery2.png)
