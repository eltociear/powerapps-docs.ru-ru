---
title: Приложения на основе холста функции AsType и IsType | Документация Майкрософт
description: Справочные сведения, включая описание синтаксиса и пример, для функций AsType и IsType в приложения на основе холста
author: gregli-msft
manager: kvivek
ms.service: powerapps
ms.topic: reference
ms.custom: canvas
ms.reviewer: anneta
ms.date: 05/06/2019
ms.author: gregli
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: dafffcc148329be81f7544bdc2f0730f307ae4eb
ms.sourcegitcommit: f6c9e525130a03b8c76f0a4b4e90419604c5823c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/10/2019
ms.locfileid: "65526061"
---
# <a name="astype-and-istype-functions-in-canvas-apps"></a>Функции AsType и IsType в приложения на основе холста

Проверяет ссылку на запись для определенного типа сущности и рассматривает как конкретный тип ссылки.

## <a name="description"></a>Описание

Чтение [понять ссылок на записи и полиморфных поиска](../working-with-references.md) широкой введение и Дополнительные сведения.

Поле подстановки обычно относится к записям в конкретную сущность. Так как тип сущности является широко, можно получить доступ к поля поиска с помощью простого точечной нотации. Например **первый (учетные записи). " Основное контактное лицо "." Полное имя "** последовательно из **учетные записи** сущность **основного контактного лица** записей в **контакты** сущности и извлекает **полное имя**  поля.

Common Data Service также поддерживает поля полиморфных подстановки, которые могут ссылаться на записи из набора сущностей, как в следующих примерах:

| Поле подстановки | Может ссылаться на |
|--------------|--------------|
| **Владелец** | **Пользователи** или **команд** |
| **Клиент** | **Учетные записи** или **контактов** |
| **В отношении** | **Учетные записи**, **контакты**, **статьи базы знаний**и т. д. |

В формулах приложений на основе холста записи ссылки можно использовать для работы с полиморфным уточняющих запросов. Так как ссылка записи могут ссылаться на различные сущности, вы не знаете, какие поля будут доступны при написании формулы. *. Поле* нотация не поддерживается. Эти формулы необходимо адаптировать записям, которые приложение обнаруживает, когда оно работает.

**IsType** функция проверяет ли ссылка в записи для определенного типа сущности. Функция возвращает значение типа Boolean *true* или *false*.

**AsType** функция обрабатывает записи ссылку как определенного типа сущности, иногда называют *приведения*. Можно использовать результат, как если бы это был запись сущности и, опять же, использовать *. Поле* нотации для доступа ко всем полей этой записи. Если ссылка не конкретного типа, возникает ошибка.

Используйте эти функции вместе для сначала протестируйте тип сущности записи, а затем считать его записи этого типа, чтобы поля были доступны:

```powerapps-dot
If( IsType( First( Accounts ).Owner, Users ),
    AsType( First( Accounts ).Owner, Users ).'Full Name',
    AsType( First( Accounts ).Owner, Teams ).'Team Name'
)
```

Эти функции нужны только в том случае, если вы обращаетесь к поля ссылки на записи. Например, можно использовать ссылок на записи в [ **фильтра** ](function-filter-lookup.md) работать без **IsType** или **AsType**:

```powerapps-dot
Filter( Accounts, Owner = First( Users ) )
```

Аналогично, можно использовать ссылок на записи с [ **Patch** ](function-patch.md) функции:

```powerapps-dot
Patch( Accounts, First( Accounts ), { Owner: First( Teams ) } )
```  

Если осуществляется в контексте записи, например в [ **коллекции** ](../controls/control-gallery.md) или [ **форма редактирования** ](../controls/control-form-detail.md) элемента управления, может потребоваться использовать [глобального оператор устранения неоднозначности](operators.md#disambiguation-operator) для ссылки на тип сущности. Например, эта формула будет эффективным для коллекции, который отображает список контактов, где **название компании** — **клиента** подстановки.

```powerapps-dot
If( IsType( ThisItem.'Company Name', [@Accounts] ),
    AsType( ThisItem.'Company Name', [@Accounts] ).'Account Name',
    AsType( ThisItem.'Company Name', [@Contacts] ).'Full Name'
)
```

Для обеих функций укажите тип через имя источника данных, подключенного к сущности. По этой формуле для работы необходимо также добавить источник данных в приложение для любых типов, которые требуется протестировать или приведения. Например, необходимо добавить **пользователей** сущности как источник данных, если вы хотите использовать **IsType** и **AsType** с **владельца** подстановки и записи из этой сущности. Можно добавить только те источники данных, которые используются в вашем приложении; не нужно добавить все сущности, которые может ссылаться на уточняющего запроса.

Если ссылка на запись является *пустой*, **IsType** возвращает *false*, и **AsType** возвращает *пустой*. Все поля *пустой* запись будет *пустой*.

## <a name="syntax"></a>Синтаксис

**AsType**( *RecordReference*, *EntityType* )

- *RecordReference* — обязательный. Ссылка записи, часто полем поиска, которое может указывать на запись в любом из нескольких сущностей.
- *EntityType* — обязательный. Определенной сущности, для которого требуется проверить.

**IsType**( *RecordReference*, *EntityType* )

- *RecordReference* — обязательный. Ссылка записи, часто полем поиска, которое может указывать на запись в любом из нескольких сущностей.
- *EntityType* — обязательный. Определенной сущности, к которому следует привести.

## <a name="example"></a>Пример

[Понять ссылок на записи и полиморфных поиска](../working-with-references.md) содержит множество примеров.

1. Создание пустой холст приложения для планшетов.

1. На **представление** выберите **источников данных**, а затем добавьте **контакты** и **учетные записи** сущностей в качестве источников данных.
    > [!div class="mx-imgBorder"]
    > ![Пустое приложение с помощью двух источников данных: учетные записи и контакты](media/function-astype-istype/contacts-add-datasources.png)

1. Вставить **коллекции** управления **пустая, вертикальная** ориентация:

    > [!div class="mx-imgBorder"]
    > ![Вставка элемента управления коллекции с пустым вертикальный макет](media/function-astype-istype/contacts-customer-gallery.png)

1. На **свойства** вкладку правой панели, укажите для ее **элементы** свойства **контакты**.

    > [!div class="mx-imgBorder"]
    > ![Набор элементов с контактами в панели «Свойства»](media/function-astype-istype/contacts-customer-datasource.png)

1. Задать макет коллекции так, **заголовок и подзаголовок**.

    > [!div class="mx-imgBorder"]
    > ![Открыть средство выбора макета на панели свойств](media/function-astype-istype/contacts-customer-layout.png)

    > [!div class="mx-imgBorder"]
    > ![Задать макет в заголовок и подзаголовок](media/function-astype-istype/contacts-customer-flyout.png)

1. В **данных** открытой областью **Title1** , а затем выберите **полное имя**:

    > [!div class="mx-imgBorder"]
    > ![Значение заголовка](media/function-astype-istype/contacts-customer-title.png)

1. Выберите **Subtitle1** метки элемента управления:

    > [!div class="mx-imgBorder"]
    > ![Значение подзаголовок](media/function-astype-istype/contacts-customer-subtitle.png)

1. Задайте **текст** свойство **Subtitle1** следующую формулу:

    ```powerapps-dot
    If( IsBlank( ThisItem.'Company Name' ), "--",
        IsType( ThisItem.'Company Name', [@Accounts] ),
            "Account: " & AsType( ThisItem.'Company Name', [@Accounts] ).'Account Name',
        "Contact: " & AsType( ThisItem.'Company Name', [@Contacts] ).'Full Name'
    )
    ```

    > [!div class="mx-imgBorder"]
    > ![Экран теперь полное отображение учетных записей и контактов, в который включено в коллекции.](media/function-astype-istype/contacts-customer-complete.png)

    Эти значения отображаются подзаголовка в коллекции:
    - «--» Если **«Company Name»** — *пустой*.
    - «Учетная запись: "и затем **имя учетной записи** из **учетные записи** сущности Если **название компании** поле ссылается на учетную запись.
    - «Обратитесь в службу: "и затем **полное имя** из **контакты** сущности Если **название компании** поле относится к контакту.

    Ваши результаты могут отличаться от указанных в этом разделе, так как оно использует образец данных, который был изменен для отображения дополнительных типов результатов.