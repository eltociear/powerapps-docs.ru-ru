---
title: Функции Астипе и Type в приложениях Canvas | Документация Майкрософт
description: Справочные сведения, включая синтаксис и пример, для функций Астипе и IsReference в приложениях Canvas
author: gregli-msft
manager: kvivek
ms.service: powerapps
ms.topic: reference
ms.custom: canvas
ms.reviewer: tapanm
ms.date: 05/17/2019
ms.author: gregli
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: 0ecb30a5a452a6ee092ccf9bc9d47f6182ef60ab
ms.sourcegitcommit: 7c1e70e94d75140955518349e6f9130ce3fd094e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "71992998"
ms.PowerAppsDecimalTransform: true
---
# <a name="astype-and-istype-functions-in-canvas-apps"></a>Функции Астипе и Type в приложениях Canvas

Проверяет ссылку на запись для определенного типа сущности (**тип**) и обрабатывает ссылку как конкретный тип (**астипе**).

## <a name="description"></a>Description

Ознакомьтесь со статьей знакомство со [ссылками на записи и полиморфизмами](../working-with-references.md) для более широкого знакомства и более подробных сведений.

Поле подстановки обычно относится к записям в определенной сущности. Так как тип сущности хорошо установлен, можно получить доступ к полям уточняющего запроса с помощью простой точечной нотации. Например, **First (Accounts). Основной контакт "." Полное имя "** переходит от сущности" **Accounts** "к **основной записи Contact** в сущности" **Контакты** "и извлекает поле" **полное имя** ".

Common Data Service также поддерживает поля с полиморфизмом уточняющих запросов, которые могут ссылаться на записи из набора сущностей, как в этих примерах.

| Поле подстановки | Может ссылаться на |
|--------------|--------------|
| **Владельцев** | **Пользователи** или **команды** |
| **Клиент** | **Учетные записи** или **Контакты** |
| **Об** | **Учетные записи**, **Контакты**, **статьи базы знаний**и т. д. |

<!--note from editor: Change "Knowledge Articles" to "Knowledge Base articles" if that is what is being referenced.   -->

В формулах Canvas-App можно использовать ссылки на записи для работы с престановкой с помощью полиморфизма. Поскольку ссылка на запись может ссылаться на разные сущности, неизвестно, какие поля будут доступны при написании формулы. Объект *.* Нотация поля недоступна. Эти формулы должны адаптироваться к записям, которые сталкивается с приложением при его запуске.

Функция **IsReference** проверяет, ссылается ли ссылка на запись на конкретный тип сущности. Функция возвращает логическое значение TRUE или FALSE.

Функция **астипе** обрабатывает ссылку на запись как конкретный тип сущности, иногда называемой *приведением*. Результат можно использовать, как если бы он был записью сущности, и снова использовать *.* Нотация поля для доступа ко всем полям этой записи. Если ссылка не относится к конкретному типу, возникает ошибка.

Используйте эти функции, чтобы сначала проверить тип сущности записи, а затем считать ее записью этого типа, чтобы поля были доступны:

```powerapps-comma
If( IsType( First( Accounts ).Owner; Users );
    AsType( First( Accounts ).Owner; Users ).'Full Name';
    AsType( First( Accounts ).Owner; Teams ).'Team Name'
)
```

Эти функции необходимы только при обращении к полям ссылки на запись. Например, можно использовать ссылки на записи в функции [**Filter**](function-filter-lookup.md) без **типов** и **астипе**:

```powerapps-comma
Filter( Accounts; Owner = First( Users ) )
```

Аналогичным образом можно использовать ссылки на записи с функцией [**Patch**](function-patch.md) :

```powerapps-comma
Patch( Accounts; First( Accounts ); { Owner: First( Teams ) } )
```  

Если используется в контексте записи, например в [**коллекции**](../controls/control-gallery.md) или элементе управления [**формы редактирования**](../controls/control-form-detail.md) , может потребоваться использовать [глобальный оператор однозначности](operators.md#disambiguation-operator) для ссылки на тип сущности. Например, эта формула будет эффективной для коллекции, в которой отображается список контактов, в которых **название компании** является поисковым **клиентом** :

```powerapps-comma
If( IsType( ThisItem.'Company Name'; [@Accounts] );
    AsType( ThisItem.'Company Name'; [@Accounts] ).'Account Name';
    AsType( ThisItem.'Company Name'; [@Contacts] ).'Full Name'
)
```

Для обеих функций необходимо указать тип с помощью имени источника данных, подключенного к сущности. Чтобы формула работала, необходимо также добавить в приложение источник данных для всех типов, которые необходимо протестировать или привести. Например, необходимо добавить сущность **Users** в качестве источника данных, если вы хотите использовать **астипе** с уточняющим запросом **владельца** **и записями** из этой сущности. Вы можете добавлять только те источники данных, которые действительно используются в приложении. Вам не нужно добавлять все сущности, на которые может ссылаться Поиск.

Если ссылка на запись *пуста*, **то** функция IsReference возвращает значение false, а **астипе** возвращает *пустые*значения. Все поля *пустой* записи будут *пустыми*.

## <a name="syntax"></a>Синтаксис

**Астипе**( *рекордреференце*; *EntityType* )

- *Рекордреференце* — обязательный. Ссылка на запись, часто поле подстановки, которое может ссылаться на запись в любой из нескольких сущностей.
- *EntityType* — обязательный. Конкретная сущность, для которой проверяется.

**Тип**( *рекордреференце*; *EntityType* )

- *Рекордреференце* — обязательный. Ссылка на запись, часто поле подстановки, которое может ссылаться на запись в любой из нескольких сущностей.
- *EntityType* — обязательный. Конкретная сущность, в которую должна быть приведена запись.

## <a name="example"></a>Пример

[Сведения о ссылках на записи и в полиморфизме](../working-with-references.md) содержат подробные примеры.

1. Создайте пустое приложение Canvas для планшетов.

1. На вкладке **вид** выберите **Источники данных**, а затем добавьте сущности **Контакты** и **учетные записи** в качестве источников данных.
    > [!div class="mx-imgBorder"]
    > ![пустое приложение с двумя источниками данных: учетные записи и контакты](media/function-astype-istype/contacts-add-datasources.png)

1. Вставка элемента управления " **коллекция** " с **пустой вертикальной** ориентацией.

    > [!div class="mx-imgBorder"]
    > ![вставить элемент управления "Галерея" с пустой вертикальной компоновкой](media/function-astype-istype/contacts-customer-gallery.png)

1. На вкладке **Свойства** в правой части экрана задайте для свойства **элементы** коллекции значение **Контакты**.

    > [!div class="mx-imgBorder"]
    > ![задать элементы для контактов на панели «Свойства»](media/function-astype-istype/contacts-customer-datasource.png)

1. Задайте макет коллекции в виде **заголовка и подзаголовка**.

    > [!div class="mx-imgBorder"]
    > ![открыть средство выбора макета на панели «Свойства»](media/function-astype-istype/contacts-customer-layout.png)

    > [!div class="mx-imgBorder"]
    > ![задать для макета заголовок и подзаголовок](media/function-astype-istype/contacts-customer-flyout.png)

1. На панели **данных** откройте список **Title1** , а затем выберите **полное имя**.

    > [!div class="mx-imgBorder"]
    > ![](media/function-astype-istype/contacts-customer-title.png) значение заголовка

1. Выберите элемент управления метка **Subtitle1** .

    > [!div class="mx-imgBorder"]
    > значение подзаголовка ![Set](media/function-astype-istype/contacts-customer-subtitle.png)

1. Задайте для свойства **Text** объекта **Subtitle1** следующую формулу:

    ```powerapps-comma
    If( IsBlank( ThisItem.'Company Name' ); "--";
        IsType( ThisItem.'Company Name'; [@Accounts] );
            "Account: " & AsType( ThisItem.'Company Name'; [@Accounts] ).'Account Name';
        "Contact: " & AsType( ThisItem.'Company Name'; [@Contacts] ).'Full Name'
    )
    ```

    > [!div class="mx-imgBorder"]
    > После этого ![экран будет отображаться в коллекции вместе с учетными записями и контактными лицами](media/function-astype-istype/contacts-customer-complete.png)

    Подзаголовок в галерее показывает следующие значения:
    - "--", если **"название компании"** *пусто*.
    - "Account:", а затем поле " **имя учетной записи** " из сущности " **учетные записи** ", если поле " **название компании** " ссылается на учетную запись.
    - "Contact:", а затем поле " **полное имя** " из сущности " **Контакты** ", если поле " **название компании** " ссылается на контакт.

    Результаты могут отличаться от результатов в этом разделе, так как в нем используются образцы данных, которые были изменены для отображения дополнительных типов результатов.
