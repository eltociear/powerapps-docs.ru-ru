---
title: Преобразование формы InfoPath в приложение на основе холста | Документы Майкрософт
description: Начните преобразовывать форму InfoPath в Power Apps, используя сведения о распространенных сценариях и способах создания этих элементов в приложении Canvas.
author: emcoope-msft
manager: kvivek
ms.service: powerapps
ms.topic: article
ms.custom: canvas
ms.reviewer: tapanm
ms.date: 04/05/2018
ms.author: emcoope
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: 811f58243413c4de58e4cdb8868d838349248991
ms.sourcegitcommit: 6b27eae6dd8a53f224a8dc7d0aa00e334d6fed15
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/03/2019
ms.locfileid: "74732375"
---
# <a name="transform-your-infopath-form-to-power-apps"></a>Преобразование формы InfoPath в Power Apps

Вы конструируете отличные формы в InfoPath и хотите узнать, как перенести их на более надежную платформу?

## <a name="key-advantages-of-power-apps-over-infopath"></a>Ключевые преимущества приложений Power Apps в InfoPath

Как и большинство опытных пользователей InfoPath, со временем вы сформировали уникальный набор навыков для эффективного создания форм. Хотя качество форм вас устраивает, вы знаете и их ограничения: &quot;классическое&quot; оформление, далеко не идеальная работа на мобильных устройствах, неуверенность в их будущей применимости и невозможность подключиться к другим службам без написания кода.

Группа Power Apps слышала эти и многие другие проблемы. Они приложили немалые усилия, чтобы повысить удобство работы и предоставить вам возможности создания приложений на основе холста с учетом ваших деловых и технических навыков. С помощью Power Apps можно быстро создавать и развертывать правильные бизнес-решения без написания кода.

**Power Apps обеспечивает мощный в будущем**  
Power Apps — это платформа SaaS (программное обеспечение как услуга), предназначенная для быстрого создания высокодействующих приложений, которые можно развернуть в Интернете, SharePoint, Dynamics 365, Teams, Power BI или мобильном устройстве без дополнительной работы. Поскольку для развертывания достаточно передать пользователю URL-адрес опубликованного приложения, их также легко обновлять.

**Публикация приложений**  
Вы когда-нибудь пытались создать приложение, а затем опубликовать его для устройства iOS или Android? Это сложно. Если вы хотите развернуть второе приложение или обновить существующее, пользователям необходимо выполнить гораздо больше действий. Не в Power Apps. Пользователи устанавливают приложения Power Apps Mobile на своих устройствах и входят в систему. Вот и все — у них есть доступ ко всем приложениям, которые вы им предоставили. В дальнейшем при обновлении этих приложений или публикации новых приложений для этих пользователей они будут отображаться на их устройствах. Мобильные приложения без необходимости управления устройствами — это большое преимущество для вас и вашего бизнеса.

**Кстати, о мобильных устройствах**  
С помощью Power Apps можно использовать возможности мобильного устройства пользователя. У вас есть доступ к ускорению, камере, компасу, сведениям о подключении и сигналам о расположении — все это прямо из приложения. Это дает вам целый ряд преимуществ для создания эффективных приложений. Разумеется, функциональные возможности сенсорного ввода — это просто автоматический режим в Power Apps: при сборке приложения ничего не требуется.

**Готовые к работе**  
С помощью InfoPath вы обычно работаете с данными из одного источника. Но все усложняется, если вы хотите обновить другой источник (например, список SharePoint в другой коллекции сайтов) или подключиться к внешним службам. Вы не спите ночами, обдумывая код. Power Apps позволяет работать с несколькими источниками данных и подключениями к службам в одном приложении. В настоящее время [более 200 соединителей](connections-list.md#all-standard-connectors) поддерживают сочетание локальных и облачных данных, включая Microsoft Office 365 и службы Azure, такие как Power автоматизиру и Dynamics 365. Кроме того, можно подключиться к множеству сторонних служб, таких как Dropbox, Google, Salesforce, Slack и другие популярные целевые платформы.

Теперь вы можете создавать решения для масштабирования приложений в любых средах, а не только там, где хранятся исходные данные.

## <a name="power-apps-and-sharepoint-even-better-together"></a>Power Apps и SharePoint: еще лучше вместе

Power Apps — это отличное средство для улучшения качества работы с SharePoint двумя способами. вы можете настроить формы для списка SharePoint или создать автономное приложение для работы с данными SharePoint.

**Настройка формы SharePoint** — это удобно, если вы хотите настроить способ добавления, просмотра или изменения элементов в списке пользователями для повседневной работы. Когда вы нажмете кнопку **Настройка форм**, будет создано &quot;приложение форм&quot; с одним экраном, которое будет изменять режим (создание, редактирование, просмотр) в зависимости от контекста. Такие приложения управляются SharePoint; их разрешения аналогичны разрешениям списка для просмотра и редактирования.

**Создание приложения холста Power Apps из SharePoint** позволяет запускать само приложение на мобильном устройстве. Вы также можете внедрить приложение на страницу SharePoint. При нажатии этой кнопки будет создано приложение с тремя экранами (список просмотра, детали представления и создание/обновление элемента). Модель разрешений и общего доступа для этих приложений не привязана к SharePoint, а управляется из Power Apps.

Теперь, когда вы поняли разницу между двумя вариантами, следующий раздел дает вам представление об использовании каждого из них.

## <a name="sharepoint-forms"></a>Формы SharePoint

Приложения Power Apps и группы SharePoint работали вместе, чтобы создать историю настройки для использования с SharePoint. Большинству разработчиков InfoPath приходилось обеспечивать взаимодействие InfoPath и SharePoint. Сама по себе SharePoint — отличная платформа, однако формы по умолчанию не представляют из себя ничего особенного и не поддерживают настройки или бизнес-логику без InfoPath. Теперь это в прошлом.

С помощью Power Apps теперь можно настраивать формы списков в качестве собственных функций. При этом вы получаете все возможности Power Apps. На снимке экрана ниже показан пример формы Power Apps с внедренным отчетом Power BI. Все решение было создано менее чем за 15 минут.

![Интеграция с SharePoint](./media/transform-infopath/sharepoint-integration.png)

Еще одним важным компонентом Power Apps является возможность легко подключаться к другой коллекции узлов SharePoint или к другой среде из той же формы. Например, вы хотите сделать одну форму, в которой можно выводить и обновлять данные из SharePoint Online и локальной среды SharePoint одновременно? Ничего. Если установить [локальный шлюз данных](gateway-management.md), вы заработаете в течение нескольких минут и подключаете Power Apps, Power BI, автоматизируйте питание и Azure Logic Apps с локальными данными. Изменение правил брандмауэра не требуется. Вы можете перейти к следующему шагу, подключив это приложение к Power автоматизировать.

## <a name="a-standalone-sharepoint-app"></a>Автономное приложение SharePoint

Используйте этот метод, если вместо простого интерфейса обновления формы со списком вы хотите построить полнофункциональное автономное приложение, основанное на данных SharePoint. Это также самый лучший способ начать работу, поэтому вы можете начать изучать работу холста Power Apps и создавать будущие приложения из множества источников данных.

Чтобы начать, выполните эти действия.

1. Откройте форму со списком SharePoint, из которого вы хотите создать приложение.
1. В строке меню выберите **PowerApps**, а затем **Создать приложение**.
1. Укажите имя и щелкните **Сохранить**.

Power Apps создает приложение, которое можно настроить.

Для первого приложения начните с простого настраиваемого списка из нескольких полей разных типов. Таким образом, вы сможете создать прочный фундамент без лишних проблем и усилий. Не беспокойтесь; совсем скоро вы станете профессионалом и будете готовы к созданию сложных приложений. Если вам нужна помощь при создании такого первого приложения, ознакомьтесь с этой [документацией](app-from-sharepoint.md#generate-an-app-from-within-sharepoint-online) или этим [видеороликом](https://youtu.be/BnYe_7fpZRM) сообщества. В приведенных ниже примерах будут показаны общие задачи InfoPath и способы их использования в Power Apps. Все они основаны на простом приложении со списком SharePoint.

## <a name="how-do-you-do-that-with-power-apps"></a>Как это сделать с помощью Power Apps?

После того как вы ознакомились с основными понятиями, можно двигаться дальше. С помощью вашего первого приложения в вашей почтовой поясе этот раздел поможет вам применить некоторые общие концепции InfoPath в Power Apps.

**Скрыть, показать или заблокировать поле на основе значения**  
Успешные формы часто применяют эффективную бизнес-логику, например изменение состояния поля на основе значения или действия. С помощью Power Apps можно задать свойство **DisplayMode** элемента управления для **редактирования** или **представления** , чтобы указать, может ли пользователь изменять поле. Вы также можете использовать формулу **If**, чтобы настроить условия. Во-первых, выберите карту, которую требуется изменить, а затем выберите значок блокировки. Этот шаг разблокирует карту, чтобы можно было изменить значение.

![Скрыть, показать, заблокировать карточку данных](./media/transform-infopath/hide-show-lock.png)

В области справа перейдите к свойству **DisplayMode** , чтобы его можно было изменить.

![Выражения инструкции If Else](./media/transform-infopath/if-else-statement.png)

В этом примере используется формула **If**:

```If(ThisItem.Color = "Blue", DisplayMode.View, DisplayMode.Edit)```

Эта формула указывает, что, если поле **Цвет** текущего элемента имеет значение **Синий**, поле **Животное** доступно только для чтения. В противном случае поле можно редактировать.

Чтобы скрыть карту, вместо того чтобы предоставлять ее только для чтения, вставьте подобную функцию в свойство **Видимый** сразу над **DisplayMode**.

Вы также можете изменить настройки, например отображения кнопки утверждения, чтобы она отображалась только в том случае, если адрес электронной почты пользователя совпадает с адресом электронной почты утверждающего лица. (Указание: используйте **User (). Электронная почта** для доступа к адресу электронной почты текущего пользователя.) Поэтому можно сохранить адрес электронной почты утверждающего в **йоурдатакард** , а затем установить для свойства **Visible** этой формулы следующую формулу:

```If( YourDataCard.Text = User().Email, true, false )```

**Условное форматирование**  
Аналогичным образом (как и для скрытия поля выше) можно предоставлять визуальную обратную связь для пользователей. Возможно, вам требуется выделить текст красным цветом, если введенное значение выходит за пределы допустимого диапазона, или изменить текст и цвет кнопки "Отправить" после отправки пользователем файла. Вы сможете указать обе настройки с помощью функции, например **if**, в свойствах, таких как **Цвет** или **Видимый**.

Например, можно использовать функцию **If** вместе с функцией [IsMatch](functions/function-ismatch.md), чтобы менять цвет текста в поле электронной почты на красный, если пользователь указал в поле ввода адрес электронной почты в неправильном формате. Это можно сделать, задав значение **Цвет** для поля **TextInput1** (где пользователь вводит адрес электронной почты) в следующей формуле:

```If( IsMatch(TextInput1.Text, Email), Black, Red )```

**IsMatch** поддерживает множество предварительно определенных шаблонов, таких как адрес электронной почты, а также позволяет создавать свои собственные. Дополнительные сведения об условном форматировании см. в этом [видеоролике сообщества](https://powerusers.microsoft.com/t5/Video-Webinar-Gallery/PowerApps-Conditional-Formatting-and-Popups/m-p/84962).

**Реализация безопасности на основе ролей**  
Первая функция, которую мы рассмотрим, — [DataSourceInfo](functions/function-datasourceinfo.md). Набор получаемых сведений зависит от источника данных, но, как правило, вы можете использовать эту формулу, чтобы проверить, есть ли у пользователя доступ к изменению данных (замените *YourDataSource* на имя вашего источника данных):

```DataSourceInfo( YourDataSource, DataSourceInfo.EditPermission )```

Таким образом, форма или кнопка будет отображаться, только если пользователь имеет доступ для редактирования. Полный список сведений, которые можно запрашивать в функции, см. в документации по [DataSourceInfo](functions/function-datasourceinfo.md).

Если вместо этого вы хотите использовать группы Active Directory для управления доступом к кнопкам или формам в приложении, вам потребуются более глубокие знания. Для этого воспользуйтесь преимуществами гибкости приложений Power Apps и создайте собственный соединитель с помощью API Microsoft Graph. Если это кажется слишком сложным, следуйте пошаговым инструкциям в этой [записи блога](https://powerapps.microsoft.com/blog/implementing-role-based-permission/).

**Отправка сообщения электронной почты из приложения**  
Вы можете отправлять электронное сообщение из приложений Power Apps множеством способов, но проще всего использовать соединитель Office 365 Outlook. С помощью этого соединителя вы можете отправлять сообщения из приложения от своего имени. Кроме того, можно получать сообщения электронной почты и другие задачи, которые взаимодействуют с почтовым ящиком. Подробные сведения об отправке сообщений см. в [документации](connections/connection-office365-outlook.md) или этом [видеоролике](https://powerusers.microsoft.com/t5/Video-Webinar-Gallery/Send-an-email-from-PowerApps/m-p/74349) сообщества.

Вы можете отправить более сложное сообщение (например, как часть рабочего процесса утверждения SharePoint) с помощью Power автоматизировать и подключить приложение к создаваемому потоку. После подключения приложения к Power Автоматизация вы открыли всю мощь обработчика рабочих процессов, например Power Apps, очень хорошо подключается к внешним данным и службам. Дополнительные сведения о подключении Power Apps и Power автоматизиру см. в этой [документации](using-logic-flows.md).

Если вы по-прежнему нашли нужный параметр электронной почты, вы также можете использовать соединители Power Apps для тестов по электронной почте, Gmail, MailChimp, Outlook.com, SendGrid или SMTP. Возможность подключения — это преимущество Power Apps.

**Рабочие процессы**  
Трудно говорить о бизнес-приложениях и бизнес-логике без подсистемы рабочих процессов. Хорошая новость — группа Power Apps не изменяла колесо и преддаст вам еще один обработчик рабочих процессов. Вместо этого они предоставляют надежный соединитель для службы автоматизации электропитания. Вы можете автоматизировать процессы и задачи для более чем [200 различных служб](https://flow.microsoft.com/connectors/) благодаря простой в использовании подсистеме рабочих процессов. Дополнительные сведения о подключении Power Apps и Power автоматизиру см. в этой [документации](using-logic-flows.md).

**Переменные с Power Apps**  
При построении решения логично предположить, что в нем потребуется использовать переменные. Power Apps предлагает несколько типов переменных, но их следует использовать только при необходимости. Предположим, что вместо того, чтобы получать данные, сохранять их в переменной, а затем ссылаться на эту переменную, вы можете сослаться на данные напрямую. Эту модель проще понять, если сравнить ее с Excel. В Excel поле "Итог" не является переменной — это сумма значений других полей. Таким образом, если вы хотите использовать это значение в другом месте на листе, вы указываете ячейку, в которой вычисляется итог. В этой [документации](working-with-variables.md) приводится отличное объяснение всех этих возможностей. Не стоит ограничиваться одним вариантом.

Если вам все-таки необходимо использовать переменные (есть много таких ситуаций), у вас есть разные варианты. Помните, что при использовании Power Apps не нужно определять переменные. Чтобы создать переменную, просто используйте функцию для указания имени и хранимого значения. Вы можете просмотреть созданные вами переменные, выбрав **переменные** на вкладке **вид** . переменные хранятся в памяти, и их значения теряются при закрытии приложения. Можно создать следующие типы переменных:

- Глобальные переменные — первое, что приходит в голову. Используйте функцию [Set](functions/function-set.md), чтобы указать значение для глобальной переменной и сделать ее доступной в приложении:

    ```Set( YourVariable, YourValue )```

    Затем вы можете ссылаться в приложении на переменную *YourVariable* по имени.

- Переменные контекста доступны только на экране, в котором они определены. При выходе из экрана они будут сброшены. Эти переменные часто используются, например, для хранения данных, переданных из предыдущего экрана, или для отслеживания того, отправлена ли форма. Чтобы задать переменную контекста, используйте функцию [UpdateContext](functions/function-updatecontext.md), как в следующем примере:

    ```UpdateContext( { Submitted: "true" } )```

    В этом примере для переменной с именем **Submitted** устанавливается значение **true**. Вы можете добавить эту формулу в свойство **OnSelect** кнопки "Отправить", чтобы отслеживать отправку данных и преобразовывать все поля в поля только для чтения.

- Коллекции используются для хранения таблиц данных, которые можно обновлять по отдельности. Используйте [Collect](functions/function-clear-collect-clearcollect.md), чтобы, например, создать корзину покупок, в которую отправляются различные элементы SharePoint, помечаемые пользователем. Эта концепция в действии показана в этом [видеоролике](https://powerusers.microsoft.com/t5/Video-Webinar-Gallery/Learn-about-PowerApps-Collections/m-p/89180) сообщества.

**Каскадные раскрывающиеся меню**  
Каскадные раскрывающиеся меню очень полезны, поскольку можно, например, фильтровать варианты в одном раскрывающемся списке на основе значения, выбранного в предыдущем раскрывающемся списке. В Power apps они часто создаются с помощью двух источников данных в приложении. Первый источник данных — это данные, которые вы просматриваете или изменяете, а второй источник данных используется для хранения значений для создания каскадного эффекта. На рисунке показан пример второго источника данных с вариантами выбора.

![Каскадные раскрывающиеся меню](./media/transform-infopath/cascading-dropdowns.png)

В этом примере можно добавить раскрывающийся список с именем **ddselecttype** и задать следующую формулу для его свойства **Items**:

```Distinct( Impacts, Title )```

Раскрывающийся список будет показывать только поля "Затраты", "Влияние на программу" и "Расписание". Затем можно добавить второй раскрывающийся список и задать следующую формулу для его свойства **Items**:

```Filter( Impacts, ddSelectType.Selected.Value in SCategory )```

Вот так и получаются каскадные раскрывающиеся меню. Для получения дополнительных сведений ознакомьтесь с этой записью из группы Power Apps Team [SharePoint: Каскадные раскрывающиеся списки в 4 простых шагах!](https://powerusers.microsoft.com/t5/PowerApps-Community-Blog/SharePoint-Cascading-Dropdowns-in-4-Easy-Steps/ba-p/16248) или в этом [видеоролике сообщества](https://powerusers.microsoft.com/t5/Video-Webinar-Gallery/PowerApps-Cascading-Dropdown/m-p/92813). Не беспокойтесь, это можно сделать так же просто без SharePoint.

**Не создавайте одно суперприложение**  
С помощью Power Apps можно вызывать одно приложение из другого. Поэтому вместо огромной формы InfoPath, которая не разваливается только чудом, можно создать группу приложений, вызывающих друг друга, и даже передавать между ними данные. Это значительно упрощает разработку.

## <a name="next-steps"></a>Дальнейшие действия

С помощью Power Apps и сведений, приведенных в этом разделе, вы готовы к работе в мире и начали властвуй его по одному приложению за раз. По мере того как вы продолжите свое путешествие, ниже приведены полезные ссылки на справку, например ссылку на сайт сообщества Power Apps. Чем раньше вы станете участником сообщества, тем быстрее сможете развить свои навыки: вместе всегда проще, чем в одиночку.

[**Справочник по формулам**](formula-reference.md) — даже если вы просто будете просматривать стандартные формулы, вам в голову может прийти отличная идея.

[**Сообщество Power Apps**](https://powerusers.microsoft.com/t5/PowerApps-Community/ct-p/PowerApps1) — см. примеры, общайтесь с другими пользователями, спросите и ответьте на вопросы и помогите расширить сообщество Power Apps.
