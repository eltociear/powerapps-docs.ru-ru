---
title: Пользовательский визуальный элемент Power Apps для Power BI | Документация Майкрософт
description: Процедура внедрения приложения на основе холста, которое использует тот же источник данных и поддерживает те же возможности фильтрации, что и другие элементы отчетов Power BI, а также ограничения для такого приложения
author: chmoncay
manager: kvivek
ms.service: powerapps
ms.topic: conceptual
ms.custom: canvas
ms.reviewer: tapanm
ms.date: 12/02/2019
ms.author: chmoncay
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: 4db4e62bb3813b605b1ff4cdf5c2b83d969a1d3a
ms.sourcegitcommit: 861ba8e719fa16899d14e4a628f9087b47206993
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/03/2019
ms.locfileid: "74709755"
---
# <a name="power-apps-custom-visual-for-power-bi"></a>Пользовательский визуальный элемент Power Apps для Power BI

Power BI позволяет получать аналитические данные и принимать более эффективные решения, в то время как Power Apps позволяет всем создавать и использовать приложения, подключающиеся к бизнес-данным. С помощью пользовательского визуального элемента Power Apps можно передавать данные, учитывающие контекст, в приложение Canvas, которое обновляется в режиме реального времени при внесении изменений в отчет. Пользователи приложения могут получать бизнес-аналитику и выполнять действия непосредственно из отчетов и панелей мониторинга Power BI.

## <a name="using-the-power-apps-custom-visual"></a>Использование пользовательского визуального элемента Power Apps

Рассмотрим шаги, необходимые для использования пользовательского визуального элемента Power Apps в Power BI отчете.

1. Пользовательский визуальный элемент Power Apps доступен по умолчанию в служба Power BI. Если вы используете Power BI Desktop и не видите его, необходимо выполнить обновление до последней версии Power BI Desktop.

2. Добавьте визуальный элемент Power Apps в отчет и задайте связанные с ним поля данных.

    ![Выбор данных отчета](./media/powerapps-custom-visual/add-visual-set-data.png)

    Можно выбрать существующее приложение или создать новое, но отчет должен публиковаться в службе Power BI и открывается в Microsoft Edge или Google Chrome.

3.  Если вы решили создать приложение, вы можете выбрать среду, в которой оно будет создано.

    ![Новое или существующее приложение](./media/powerapps-custom-visual/create-new-or-choose-app.png)

    Если вы решили использовать существующее приложение, визуальный элемент предложит открыть приложение в Power Apps. Затем визуальный элемент настраивает необходимые компоненты в приложении, чтобы Power BI может передавать данные в Power Apps.

    При создании нового приложения Power Apps создает простое приложение с уже настроенными необходимыми компонентами.

    ![Создать приложение](./media/powerapps-custom-visual/new-app.png)

4. Теперь в Power Apps Studio можно использовать поля данных, заданные на шаге 2. Объект `PowerBIIntegration` действует как любой источник данных или коллекция, предназначенные только для чтения Power Apps. С помощью этого объекта можно заполнять любой элемент управления или соединяться с другими источниками данных и фильтровать их.

    ![Пользовательская формула](./media/powerapps-custom-visual/custom-formula.png)

    Эта формула соединяет данные Power BI с источником данных клиента: `LookUp(Customer,Customer_x0020_Name=First(PowerBIIntegration.Data).Customer_Name)`

   Отчет Power BI и экземпляр Power Apps, который был запущен, совместно используют динамическое подключение к данным. Пока они открыты, можно отфильтровать или изменить данные в отчете, чтобы увидеть обновленные данные сразу же в приложении в Power Apps Studio.

5. После завершения сборки или внесения изменений в приложение сохраните и опубликуйте приложение в Power Apps, чтобы просмотреть приложение в Power BI отчете.

6. После внесения изменений необходимо предоставить доступ к приложению Power Apps пользователям отчета, а затем сохранить отчет.

7. Теперь вы создали отчет, в котором пользователи могут выполнять действия в процессе анализа данных.

    ![Рабочий отчет](./media/powerapps-custom-visual/working-report.gif)

    Если необходимо внести изменения в приложение, откройте отчет в режиме редактирования, нажмите или коснитесь пункта **Дополнительные параметры** ( **...** ) в визуальном элементе Power Apps и выберите **изменить**.

    ![Изменение приложения](./media/powerapps-custom-visual/edit-app.png)

## <a name="limitations-of-the-power-apps-custom-visual"></a>Ограничения пользовательского визуального элемента Power Apps

К пользовательскому визуальному элементу Power Apps применяются следующие ограничения.

- Чтобы изменить поля данных, связанные с визуальным элементом, необходимо изменить приложение из службы Power BI, нажав кнопку с многоточием (...) и выбрав пункт **Изменить**. В противном случае изменения не будут распространяться на Power Apps, и приложение будет вести себя неожиданным образом.
- Пользовательский визуальный элемент Power Apps не может активировать обновление Power BI отчетов и Power BI источники данных из Power BI Desktop. При записи обратно данных из приложения в тот же источник данных, что и отчет, изменения не будут немедленно отражены в Power BI Desktop. а при следующем запланированном обновлении.
- Пользовательский визуальный элемент Power Apps не может отфильтровать данные или отправить данные обратно в отчет.
- Необходимо предоставить общий доступ к приложению Power Apps отдельно от отчета. Сведения о [совместном использовании приложений в Power Apps](share-app.md).
- Сервер отчетов Power BI и мобильное приложение для Power BI не поддерживают пользовательский визуальный элемент Power Apps.
- При использовании функции Повербиинтегратион. Refresh () необходимо использовать источник, поддерживающий [DirectQuery](https://docs.microsoft.com/power-bi/desktop-directquery-data-sources) , а подключение к данным должно быть создано с помощью метода DirectQuery.
- Power Apps в Power BI Desktop предоставляет данные для Power Apps Studio при создании приложений, но не во время редактирования. Используйте Power BI Web для предварительного просмотра данных при редактировании приложений.

> [!NOTE]
> Рекомендуется сначала опубликовать отчет в служба Power BI, а затем создать или изменить приложения.

## <a name="browser-support"></a>Поддержка браузера

В следующей таблице перечислены возможности поддержки браузера для просмотра, создания и изменения действий пользовательского визуального элемента Power Apps. Поддерживаемые браузеры и действия определяются галочкой (&check;).

|Браузер|Режиме|Создания|Изменений
|-|-|-|-
|Microsoft Edge|&check;|&check;|&check;
|Internet Explorer 11|&check;
|Google Chrome|&check;|&check;|&check;
|Safari \*|&check;
|Mozilla Firefox
|Все другие браузеры

\* в Safari, для просмотра пользовательского визуального элемента Power Apps необходимо включить межсайтовую трассировку (**настройки** > **Конфиденциальность**и снять флажок **запретить межсайтовые отслеживания**).

## <a name="accessibility-support"></a>Поддержка специальных возможностей

Чтобы перейти к визуальному элементу Power Apps с помощью клавиатуры, выполните следующие действия.

1. Выделение фокуса на Power BI отчете для требуемого визуального элемента Power Apps.
2. Используйте клавишу **Tab** на клавиатуре, пока не будет выделен визуальный элемент.
3. Используйте клавиши **Ctrl + Right** на клавиатуре, чтобы ввести визуальный элемент.
3. Используйте клавишу **Tab** на клавиатуре, пока не будет выбран нужный компонент визуального элемента.

Дополнительные сведения см. в [документации по специальным возможностям Power BI]( https://docs.microsoft.com/power-bi/desktop-accessibility) .


## <a name="next-steps"></a>Дальнейшие действия

* Пройдите простой [пошаговый учебник](embed-powerapps-powerbi.md).
* Ознакомьтесь с нашим [видео](https://aka.ms/powerappscustomvisualvideo).
