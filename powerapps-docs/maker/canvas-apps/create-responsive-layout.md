---
title: Создание макетов с откликом в приложениях Canvas | Документация Майкрософт
description: Справочные сведения о настройке свойств Height, Width, X и Y элементов управления в приложениях Canvas
author: emcoope-msft
manager: kvivek
ms.service: powerapps
ms.topic: conceptual
ms.custom: canvas
ms.reviewer: tapanm-msft
ms.date: 9/20/2019
ms.author: emcoope
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: a655790f245df4870fbbb40693aa91800bcf4b23
ms.sourcegitcommit: dd2a8a0362a8e1b64a1dac7b9f98d43da8d0bd87
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/02/2019
ms.locfileid: "74679783"
ms.PowerAppsDecimalTransform: true
---
# <a name="create-responsive-layouts-in-canvas-apps"></a>Создание макетов с откликом в приложениях Canvas

Перед созданием приложения Canvas в Power Apps необходимо указать, следует ли адаптировать приложение для телефона или планшета. Этот выбор определяет размер и форму холста, на котором будет построено приложение.

Сделав это, вы можете выбрать несколько дополнительных вариантов, выбрав **файл** > **Параметры приложения** > **Размер экрана + ориентация**. Можно выбрать книжную или альбомную ориентацию и размер экрана (только планшет). Можно также заблокировать или разблокировать пропорции и выполнить поворот устройства (или нет).

Эти варианты лежат в каждом другом выборе при проектировании макетов экрана. Если приложение выполняется на устройстве другого размера или в Интернете, весь макет масштабируется по размеру экрана, где выполняется приложение. Если приложение, предназначенное для телефона, работает в большом окне браузера, например, приложение масштабируется для компенсации и будет иметь слишком большой размер для своего пространства. Приложение не может воспользоваться преимуществами дополнительных пикселей, отображая больше элементов управления или больше содержимого.

Если вы создадите макет с откликом, элементы управления могут реагировать на различные устройства или размеры окон, что делает различные впечатления более естественными. Чтобы получить возможность быстро отреагировать на запросы, настройте некоторые параметры и напишите выражения во всем приложении. 

## <a name="disable-scale-to-fit"></a>Отключить масштабирование по размеру

Каждый экран можно настроить таким образом, чтобы его макет был адаптирован к фактическому пространству, в котором выполняется приложение.

Вы активируете скорость реагирования, отключив параметр **масштаб** приложения по размеру, который включен по умолчанию. При отключении этого параметра также отключается **Блокировка** пропорций, так как вы больше не занимаетесь разработкой для конкретной формы экрана. (Вы по-прежнему можете указать, поддерживает ли ваше приложение вращение устройств.)

![Отключить параметр "масштабировать по размеру"](media/create-responsive-layout/scale-to-fit-off.png)

Чтобы заставить приложение реагировать на запросы, необходимо выполнить дополнительные действия, но это изменение является первым шагом к максимально быстрому реагированию.

## <a name="understand-app-and-screen-dimensions"></a>Общие сведения об измерениях приложения и экрана

Чтобы макеты приложения реагировали на изменения размеров экрана, необходимо написать формулы, в которых используются свойства **Width** и **Height** экрана. Чтобы отобразить эти свойства, откройте приложение в Power Apps Studio и выберите экран. Формулы по умолчанию для этих свойств отображаются на вкладке **Дополнительно** панели справа.

**Width** (Ширина)  = `Max(App.Width; App.DesignWidth)`.

**Высота** = `Max(App.Height; App.DesignHeight)`

Эти формулы относятся к свойствам **Width**, **Height**, **десигнвидс**и **десигнхеигхт** приложения. Свойства **Width** и **Height** приложения соответствуют размерам устройства или окна браузера, в котором выполняется приложение. Если пользователь изменяет размер окна браузера (или поворачивает устройство, если вы отключили **ориентацию блокировок**), значения этих свойств изменяются динамически. Формулы в свойствах **Width** и **Height** экрана переоцениваются при изменении этих значений.

Свойства **десигнвидс** и **десигнхеигхт** берутся из измерений, указанных на панели **размер и ориентация экрана** **параметров приложения**. Например, если выбрать макет телефона в книжной ориентации, **десигнвидс** — 640, а **десигнхеигхт** — 1136.

Так как они используются в формулах для свойств **Width** и **Height** экрана, можно представить **десигнвидс** и **десигнхеигхт** как минимальные измерения, для которых вы разрабатываете приложение. Если фактическая область, доступная для приложения, меньше этих минимальных размеров, то формулы для свойств **Width** и **Height** экрана гарантируют, что их значения не будут достигать минимального размера. В этом случае пользователь должен выполнить прокрутку, чтобы просмотреть все содержимое экрана.

После установки **десигнвидс** и **десигнхеигхт**приложения (в большинстве случаев) не нужно изменять формулы по умолчанию для свойств **Width** и **Height** каждого экрана. Далее в этом разделе обсуждаются ситуации, в которых может потребоваться настроить эти формулы.

## <a name="use-formulas-for-dynamic-layout"></a>Использование формул для динамического макета

Чтобы создать быстро реагирующий проект, нужно разместить и изменить размер каждого элемента управления, используя формулы вместо абсолютных (константных) значений координат. Эти формулы выражают расположение и размер каждого элемента управления в терминах общего размера экрана или относительно других элементов управления на экране.

> [!IMPORTANT]
> После написания формул для свойств **X**, **Y**, **Width** и **Height** элемента управления формулы будут перезаписаны константными значениями при последующем перетаскивании элемента управления в редакторе холста. Если вы начинаете использовать формулы для динамического макета, не следует перетаскивать элементы управления.

В самом простом случае один элемент управления заполняет весь экран. Чтобы создать этот результат, задайте для свойств элемента управления следующие значения:

| Свойство      | Value            |
|--------|---------------|
| **X**      | `0`             |
| **&**      | `0`             |
| **Ширина**  | `Parent.Width`  |
| **Равно** | `Parent.Height` |

В этих формулах используется **родительский** оператор. Для элемента управления, помещенного непосредственно на экран, **родительский** элемент относится к экрану. С этими значениями свойств элемент управления отображается в левом верхнем углу экрана (0, 0) и имеет те же **ширину** и **высоту** , что и экран.

Далее в этом разделе вы примените эти принципы (и **родительский** оператор) для размещения элементов управления внутри других контейнеров, таких как коллекции, элементы управления группами и компоненты.

В качестве альтернативы элемент управления может заполнить только верхнюю половину экрана. Чтобы создать этот результат, задайте для свойства **Height** значение **Parent. Height** /2, а остальные формулы оставьте без изменений.

Если вам нужен второй элемент управления для заполнения нижней половины того же экрана, для построения его формул можно использовать по крайней мере два других подхода. Для простоты вы можете использовать такой подход:

| Элемент управления | Свойство | Формула           |
|-|----------|-------------------|
| **Границ** | **X**        | `0`                 |
| **Границ** | **&**        | `0`                 |
| **Границ** | **Ширина**    | `Parent.Width`      |
| **Границ** | **Равно**   | `Parent.Height / 2` |
| **Сокращение** | **X**        | `0`                 |
| **Сокращение** | **&**        | `Parent.Height / 2` |
| **Сокращение** | **Ширина**    | `Parent.Width`      |
| **Сокращение** | **Равно**   | `Parent.Height / 2` |

![Верхний и нижний элементы управления](media/create-responsive-layout/dynamic-layout.png)

Такая конфигурация приведет к желаемому результату, но вам потребуется изменить каждую формулу, если вы изменили сведения относительно размеров элементов управления. Например, можно решить, что верхний элемент управления должен занимать только третью часть экрана, при этом нижний элемент управления заполняет нижние две трети. 

Чтобы создать этот результат, необходимо обновить свойство **Height** **верхнего** элемента управления и свойства **Y** и **Height** **нижнего** элемента управления. Вместо этого рекомендуется писать формулы для **нижнего** элемента управления в терминах **верхнего** элемента управления (и самого себя), как показано в следующем примере:


| Элемент управления | Свойство | Формула           |
|-|----------|-------------------|
| **Границ** | **X**        | `0`                 |
| **Границ** | **&**        | `0`                 |
| **Границ** | **Ширина**    | `Parent.Width`      |
| **Границ** | **Равно**   | `Parent.Height / 2` |
| **Сокращение** | **X**        | `0`                       |
| **Сокращение** | **&**        | `Upper.Y + Upper.Height`  |
| **Сокращение** | **Ширина**    | `Parent.Width`            |
| **Сокращение** | **Равно**   | `Parent.Height - Lower.Y` |

![Относительный размер верхнего и нижнего элементов управления](media/create-responsive-layout/dynamic-layout2.png)

После этих формул необходимо изменить только свойство **Height** **верхнего** элемента управления, чтобы выразить другую часть высоты экрана. **Нижний** элемент управления автоматически перемещается и изменяет размер, чтобы учитывать изменение.

Эти шаблоны формул можно использовать для выражения общих связей макета между элементом управления с именем **C**, его родительским элементом или одноуровневый элемент управления с именем **D**.

| Отношение между C и его родителем | Свойство | Формула | Приведен |
|--|--|--|--|
| **C** заполнит ширину родителя с полем *N* | **X**| `N` | ![Пример заполнения с заглавной шириной в C](media/create-responsive-layout/c1.png) |
|  | **Ширина** | `Parent.Width - (N * 2)` |  |
| **C** заполняет высоту родителя с полем *N* | **&** | `N` | ![Пример заливки по высоте родителя в C](media/create-responsive-layout/c2.png) |
|  | **Равно** | `Parent.Height - (N * 2)` |  |
| **С выровняйтем** правого края родительского элемента с полем *N* | **X** | `Parent.Width - (C.Width + N)` | ![Пример с выровняйтем границы родителя](media/create-responsive-layout/c3.png) |
| **C** , с выровняйтем нижнего края родительского элемента с полем *N* | **&** | `Parent.Height - (C.Height + N)` | ![Пример с выровняйтем границы родителя](media/create-responsive-layout/c4.png) |
| **В центре в** горизонтальном направлении на родительский элемент | **X** | `(Parent.Width - C.Width) / 2` | ![Пример C в центре по горизонтали на родительский элемент](media/create-responsive-layout/c5.png) |
| В центре **с** вертикальным выравниванием по родителю | **&** | `(Parent.Height - C.Height) / 2` | ![Пример C, центрированный по вертикали на родительском элементе](media/create-responsive-layout/c6.png) |

| Отношение между C и D | Свойство | Формула | Приведен |
|--|--|--|--|
| **Горизонтально по** горизонтали **и по** ширине **d** | **X** | `D.X` | ![Пример шаблона](media/create-responsive-layout/d1.png) |
|  | **Ширина**    | `D.Width` |  |
| С **вертикальным выравниванием по** вертикали **и высотой d**  | **&** | `D.Y` | ![Пример шаблона](media/create-responsive-layout/d2.png) |
|  | **Равно** | `D.Height` |  |
| Правая граница **в C** по правому краю **D** | **X** | `D.X + D.Width - C.Width` | ![Пример шаблона](media/create-responsive-layout/d3.png) |
| Нижний край **C** по нижнему краю **D** | **&** | `D.Y + D.Height - C.Height` | ![Пример шаблона](media/create-responsive-layout/d4.png) |
| **В центре C** по горизонтали относительно **D** | **X** | `D.X + (D.Width - C.Width) / 2`  | ![Пример шаблона](media/create-responsive-layout/d5.png) |
| В центре **C** по вертикали относительно **D** | **&** | `D.Y + (D.Height - C.Height) /2` | ![Пример шаблона](media/create-responsive-layout/d6.png) |
| **С, расположенный справа** от **D** с пропуском N | **X** | `D.X + D.Width + N` | ![Пример шаблона](media/create-responsive-layout/d7.png) |
| **C** , расположенное ниже **D** с пропуском *N*             | **&** | `D.Y + D.Height + N` | ![Пример шаблона](media/create-responsive-layout/d8.png) |
| **C** заполняет пространство между **D** и правой границей родителя | **X** | `D.X + D.Width` | ![Пример шаблона](media/create-responsive-layout/d9.png) |
|  | **Ширина** | `Parent.Width - C.X` |  |
| **C** заполняет пространство между **D** и нижней границей родителя | Y | `D.Y + D.Height` | ![Пример шаблона](media/create-responsive-layout/d10.png) |

## <a name="hierarchical-layout"></a>Иерархический макет

При создании экранов, содержащих больше элементов управления, он становится более удобным (или даже необходимым) для размещения элементов управления относительно родительского элемента управления, а не относительно экрана или одноуровневого элемента управления. Организуя элементы управления в иерархическую структуру, можно упростить написание и обслуживание формул.

### <a name="galleries"></a>Коллекции

При использовании коллекции в приложении необходимо разместить элементы управления в шаблоне коллекции. Эти элементы управления можно разместить путем написания формул, использующих **родительский** оператор, который будет ссылаться на шаблон коллекции. В формулах элементов управления в шаблоне коллекции используйте свойства **Parent. темплатехеигхт** и **Parent. темплатевидс** . не используйте **родительские. Width** и **Parent. Height**, которые ссылаются на общий размер коллекции.

![Вертикальная коллекция, отображающая ширину и высоту шаблона](media/create-responsive-layout/gallery-vertical.png)

### <a name="container-control"></a>Контейнерный элемент управления

В качестве родительского элемента управления можно использовать экспериментальную функцию, **контейнерный** элемент управления. Чтобы включить эту функцию, выберите **файл** > **Параметры приложения** > **Дополнительные параметры**.

Рассмотрим пример заголовка в верхней части экрана. Обычно у вас есть заголовок с заголовком и несколько значков, с которыми пользователи могут взаимодействовать. Такой заголовок можно создать с помощью элемента управления **контейнера** , содержащего элемент управления **Label** и два элемента управления " **значок** ":

![Пример заголовка с использованием группы](media/create-responsive-layout/header-group.png)

Задайте следующие значения свойств этих элементов управления:

| Свойство | Заголовок | Меню | Выхода | Title |
|--|--|--|--|--|
| **X** | `0`  | `0` | `Parent.Width - Close.Width` | `Menu.X + Menu.Width` |
| **&** | `0` | `0` | `0` | `0` |
| **Ширина**  | `Parent.Width` | `Parent.Height` | `Parent.Height` | `Close.X - Title.X` |
| **Равно** | `64` | `Parent.Height` | `Parent.Height` | `Parent.Height` |

Для элемента управления " **заголовок** " `Parent` ссылается на экран. Для других `Parent` ссылается на элемент управления " **заголовок** ".

После написания этих формул можно изменить размер или расположение элемента управления " **заголовок** ", изменив формулы для его свойств. Размеры и положения дочерних элементов управления будут автоматически скорректированы соответствующим образом.

### <a name="components"></a>Компонента

Если вы используете другую экспериментальную функцию с именованными компонентами, вы можете создавать строительные блоки и использовать их в любом приложении. Как и в случае с **контейнерным** элементом управления, элементы управления, помещаемые в компонент, должны основывать свои формулы расположения и размера на `Parent.Width` и `Parent.Height`, которые ссылаются на размер компонента. Дополнительные сведения: [Создание компонента](create-component.md).

## <a name="adapting-layout-for-device-size-and-orientation"></a>Адаптация макета для размера и ориентации устройства

Итак, вы узнали, как использовать формулы для изменения размера каждого элемента управления в ответ на доступное пространство, сохраняя соответствие элементов управления относительно друг друга. Но вам может потребоваться внести более значительные изменения в макет в ответ на различные размеры и ориентацию устройств. Например, при повороте устройства с книжной на альбомную ориентацию может потребоваться переключиться с вертикальной компоновки на горизонтальную. На более крупном устройстве вы можете предоставить больше содержимого или изменить его, чтобы обеспечить более привлекательный макет. На устройстве меньшего размера может потребоваться разделить содержимое на несколько экранов.

### <a name="device-orientation"></a>Ориентация устройства

Формулы по умолчанию для свойств **Width** и **Height** экрана, как описано ранее в этом разделе, не обязательно приводят к хорошей работе, если пользователь поворачивает устройство. Например, приложение, предназначенное для телефона в книжной ориентации, имеет **десигнвидс** 640 и **десигнхеигхт** 1136. Одно и то же приложение на телефоне в альбомной ориентации будет иметь следующие значения свойств:

- Свойство **Width** экрана имеет значение `Max(App.Width; App.DesignWidth)`. **Ширина** приложения (1136) больше его **десигнвидс** (640), поэтому формула принимает значение 1136.
- Для свойства **Height** экрана задано значение `Max(App.Height; App.DesignHeight)`. **Высота** приложения (640) меньше его **десигнхеигхт** (1136), поэтому формула принимает значение 1136.

Если **Высота** экрана 1136 и высота устройства (в этой ориентации) 640, то пользователь должен прокручивать экран по вертикали, чтобы отобразить все содержимое, что может оказаться ненужным.

Чтобы адаптировать свойства **ширины** и **высоты** экрана к ориентации устройства, можно использовать следующие формулы:

**Width** (Ширина)  = `Max(App.Width; If(App.Width < App.Height; App.DesignWidth; App.DesignHeight))`.

**Высота** = `Max(App.Height; If(App.Width < App.Height; App.DesignHeight; App.DesignWidth))`

Эти формулы переключают значения **десигнвидс** и **десигнхеигхт** приложения в зависимости от того, меньше ли ширина устройства, чем высота (книжная ориентация) или больше, чем высота (альбомная ориентация).

После настройки формул **ширины** и **высоты** экрана также может потребоваться изменить порядок элементов управления на экране, чтобы лучше использовать доступное пространство. Например, если каждый из двух элементов управления занимает половину экрана, вы можете распределить их по вертикали в книжной ориентации, но расположить их рядом в альбомной ориентации.

Чтобы определить, ориентирован ли экран по вертикали или по горизонтали, можно использовать свойство **ориентация** экрана.

> [!NOTE]
> В альбомной ориентации **верхние** и **нижние** элементы управления отображаются как левые и правые элементы управления.

| Элемент управления | Свойство | Формула |
|--|----------|---|
| **Границ** | **X** | `0` |
| **Границ** | **&** | `0` |
| **Границ** | **Ширина** | `If(Parent.Orientation = Layout.Vertical; Parent.Width; Parent.Width / 2)` |
| **Границ** | **Равно**   | `If(Parent.Orientation = Layout.Vertical; Parent.Height / 2; Parent.Height)` |
| **Сокращение** | X | `If(Parent.Orientation = Layout.Vertical; 0; Upper.X + Upper.Width)`  |
| **Сокращение** | Y | `If(Parent.Orientation = Layout.Vertical; Upper.Y + Upper.Height; 0)` |
| **Сокращение** | **Ширина** | `Parent.Width - Lower.X` |
| **Сокращение** | **Равно** | `Parent.Height - Lower.Y` |

![выражения для адаптации книжной ориентации](media/create-responsive-layout/portrait.png)

![выражения для адаптации альбомной ориентации](media/create-responsive-layout/landscape.png)

### <a name="screen-sizes-and-breakpoints"></a>Размеры и точки останова экрана

Вы можете настроить макет на основе размера устройства. Свойство **размера** экрана классифицирует текущий размер устройства. Размер является положительным целым числом; Тип Скринсизе предоставляет именованные константы для удобства чтения. В следующей таблице перечислены константы.

| Выходит              | Value | Типовое устройство (с использованием параметров приложения по умолчанию) |
|-----------------------|-------|--------------------------------------------------|
| Скринсизе. Малый      | 1     | Факс                                            |
| Скринсизе. Средний     | 2     | Планшет, удержание по вертикали                          |
| Скринсизе. крупный      | 3     | Планшет, удержание по горизонтали                        |
| Скринсизе. ExtraLarge | 4     | Настольный компьютер                                 |

Используйте эти размеры для принятия решений о разметке приложения. Например, если вы хотите, чтобы элемент управления был скрыт на устройстве с размером телефона, но в противном случае он видим, можно задать для свойства **Visible** элемента управления следующую формулу:

`Parent.Size >= ScreenSize.Medium`

Эта формула возвращает **значение true** , если размер равен среднему или большему **значению и false** в противном случае.

Если требуется, чтобы элемент управления занимал другую часть ширины экрана на основе размера экрана, задайте для свойства **Width** элемента управления следующую формулу:

```powerapps-comma
Parent.Width *  
    Switch(Parent.Size;  
        ScreenSize.Small; 0,5;  
        ScreenSize.Medium; 0,3;  
        0,25)
```
Эта формула задает ширину элемента управления в половину от ширины экрана на маленьком экране, три десятых значения ширины экрана на среднем экране и квартал ширины экрана на всех других экранах.

## <a name="custom-breakpoints"></a>Пользовательские точки останова

Свойство **размера** экрана вычисляется путем сравнения свойства **Width** экрана со значениями в свойстве **сизебреакпоинтс** приложения. Это свойство представляет собой таблицу чисел с одним столбцом, в которой указываются точки останова по ширине, разделяющие именованные размеры экрана:

В приложении, созданном для планшета или Интернета, значение по умолчанию в свойстве **сизебреакпоинтс** приложения — **[600; 900; 1200]** . В приложении, созданном для телефонов, значение равно **[1200; 1800; 2400]** . (Значения для приложений для телефонов удваивается, так как такие приложения используют координаты, которые фактически удваивает координаты, используемые в других приложениях.)

![значения свойства App. Сизебреакпоинтс по умолчанию](media/create-responsive-layout/default-breakpoints.png)

Вы можете настроить точки останова приложения, изменив значения в свойстве **сизебреакпоинтс** приложения. Выберите **приложение** в представлении в виде дерева, выберите **сизебреакпоинтс** в списке свойств, а затем измените значения в строке формул. Можно создать столько точек останова, сколько требуется приложению, но только размеры от 1 до 4 соответствуют именованным размерам экрана. В формулах можно ссылаться на размеры, превышающие ExtraLarge, по их числовым значениям (5, 6 и т. д.).

Можно также указать меньше точек останова. Например, приложению может потребоваться только три размера (две точки останова), поэтому возможные размеры экрана будут мелкими, средними и большими.

## <a name="known-limitations"></a>Известные ограничения

Создаваемый холст не реагирует на созданные формулы изменения размера. Чтобы проверить поведение при реагировании, сохраните и опубликуйте приложение, а затем откройте его на устройствах или в окнах браузера с различными размерами и ориентациями.

При написании выражений или формул в свойствах **X**, **Y**, **Width**и **Height** элемента управления эти выражения или формулы будут перезаписаны при последующем перетаскивании элемента управления в другое расположение или изменении размера элемента управления путем перетаскивания его границы.
