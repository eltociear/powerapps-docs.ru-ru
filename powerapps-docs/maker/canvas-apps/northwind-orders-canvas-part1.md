---
title: Как создать галерею с заказа в приложение на основе холста | Документация Майкрософт
description: Как создать галерею с заказа в приложение для управления данными для Northwind Traders на основе холста
author: gregli-msft
manager: kvivek
ms.service: powerapps
ms.topic: conceptual
ms.custom: canvas
ms.reviewer: anneta
ms.date: 04/25/2019
ms.author: gregli
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: 94d6c104cb888bb13f3724231d7891d622f5377b
ms.sourcegitcommit: e85072f7a80da308c4caabe20adbf2509588ca57
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/07/2019
ms.locfileid: "66761012"
---
# <a name="create-an-order-gallery-in-a-canvas-app"></a>Как создать галерею с заказа в приложение на основе холста

Выполните пошаговые инструкции для создания коллекции заказа в приложение на основе холста для управления вымышленные данные в базе данных Northwind Traders. Этот раздел является частью серии, в которой объясняется, как создать бизнес-приложения на реляционных данных в Common Data Service. Для получения наилучших результатов изучите следующие разделы в этой последовательности:

1. Как создать галерею с order (**в этом разделе**).
1. [Создание сводки формы](northwind-orders-canvas-part2.md).
1. [Создать галерею подробно](northwind-orders-canvas-part3.md).

> [!div class="mx-imgBorder"]
> ![Определение области экрана](media/northwind-orders-canvas-part1/orders-parts.png)

## <a name="prerequisites"></a>Технические условия

- [Установка приложения и базы данных Northwind Traders](northwind-install.md).
- Прочтите [Обзор приложения на основе холста](northwind-orders-canvas-overview.md) для Northwind Traders.

## <a name="create-a-blank-app"></a>Создание пустого приложения

1. [Войдите в PowerApps](https://web.powerapps.com?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc), а затем создайте пустое планшетное приложение.

    > [!div class="mx-imgBorder"]
    > ![Приложения на основе холста из пустую плитку](media/northwind-orders-canvas-part1/start-01.png)

1. Присвоение имени приложению любые вы хотите, а затем выберите **создать**.

    > [!div class="mx-imgBorder"]
    > ![Приложения на основе холста с пустым диалоговое окно](media/northwind-orders-canvas-part1/start-02.png)

    PowerApps Studio открывается, в котором можно добавить источники данных и элементов управления в приложение:

    > [!div class="mx-imgBorder"]
    > ![PowerApps Studio](media/northwind-orders-canvas-part1/start-03.png)

1. Включить [экспериментальная функция](working-with-experimental.md) для отображение результата формулы непосредственно в строке формул.

    1. На **файл** меню, выберите **параметры приложения**, а затем выберите **Дополнительные параметры**.
    1. Прокрутите вниз список функций, а затем включите **включить строку представление результатов формул**:

        > [!div class="mx-imgBorder"]
        > ![Список экспериментальные функции](media/northwind-orders-canvas-part1/start-04.png)

1. В левом верхнем углу выберите стрелку Назад, чтобы вернуться к пустой холст.

## <a name="add-the-data"></a>Добавление данных

1. На **представление** выберите **источников данных**, а затем выберите **добавить источник данных** в **данных** области:

    > [!div class="mx-imgBorder"]
    > ![Выберите представление, источники данных, добавить источник данных](media/northwind-orders-canvas-part1/datasource-01.png)

1. Выберите **Common Data Service**.

    Если **Common Data Service** не отображается в списке подключений, выберите **новое подключение**, а затем добавьте его.

    > [!div class="mx-imgBorder"]
    > ![Список подключений](media/northwind-orders-canvas-part1/datasource-02.png)

1. В разделе **выберите сущность**, тип **заказы**выберите **заказы** флажок и выберите **Connect**:

    > [!div class="mx-imgBorder"]
    > ![Список сущностей](media/northwind-orders-canvas-part1/datasource-03.png)

    Вы добавили **заказы** источника данных в приложение:

    > [!div class="mx-imgBorder"]
    > ![Панель «данные»](media/northwind-orders-canvas-part1/datasource-04.png)

    **Заказы** сущность содержит множество полей, различных типов:

    > [!div class="mx-imgBorder"]
    > ![Список полей в сущность Orders](media/northwind-orders-canvas-part1/datasource-05.png)

    Каждое поле имеет **отображаемое имя** и **имя**, который иногда называют логическое имя. Оба имени см. в то же самое. Как правило, отображаемое имя будет использоваться при построении приложения, но иногда требуется более непонятными **имя**, как уже говорилось в процедуре.

1. В PowerApps Studio, закройте **данных** панель, выбрав значок закрыть (x) в правом верхнем углу.

## <a name="create-the-order-gallery"></a>Создание коллекции заказа

1. На **вставить** выберите **коллекции** > **пустая, вертикальная** добавление [ **коллекции** ](controls/control-gallery.md)элемент управления, который будет отображаться заказы.

    > [!div class="mx-imgBorder"]
    > ![INSERT, коллекция пустая, вертикальная](media/northwind-orders-canvas-part1/orders-01.png)

1. В строке формул, коллекции значение **элементы** следующую формулу:

    ```powerapps-dot
    Sort( Orders, 'Order Number', Descending )
    ```

    [ **Сортировки** ](functions/function-sort.md) функция упорядочивает список для отображения первого новейших порядок (имеющая наибольший номер заказа).

    > [!div class="mx-imgBorder"]
    > ![Задайте для свойства элементов коллекции.](media/northwind-orders-canvas-part1/orders-02.png)

1. В **свойства** вкладка рядом с правым краем, откройте **макета** списка:

    > [!div class="mx-imgBorder"]
    > ![Список параметров макета](media/northwind-orders-canvas-part1/orders-03.png)

1. В списке параметров выберите **заголовок и подзаголовок**:

    > [!div class="mx-imgBorder"]
    > ![Выбор макета](media/northwind-orders-canvas-part1/orders-04.png)

    Два [ **метка** ](controls/control-text-box.md) элементы управления добавляются в шаблона коллекции. По умолчанию эти элементы управления отображают два столбца **заказы** сущности, который вам предстоит изменить рядом. Шаблона коллекции реплицируются по вертикали для каждой записи в сущности.

1. Если вы закрыли **данных** области выберите **изменить** (рядом с полем **поля**) в **свойства** вкладка рядом с правым краем.

1. В **данных** области выберите **Title1** (или выберите верхнюю метку в шаблона коллекции).

1. В строке формул задайте метки **текст** свойство следующее выражение:

    ```powerapps-dot
    "Order " & ThisItem.'Order Number'
    ```

    > [!div class="mx-imgBorder"]
    > ![Задайте для свойства Text подпись названия](media/northwind-orders-canvas-part1/orders-06.png)

    Порядковый номер появляется в верхней части каждого элемента коллекции. В шаблоне коллекции **ThisItem** предоставляет доступ ко всем полям в **порядок** сущности.

1. В **данных** области выберите **Subtitle1** (или выберите нижней метки в шаблона коллекции):

    > [!div class="mx-imgBorder"]
    > ![Выберите метку подзаголовок](media/northwind-orders-canvas-part1/orders-07.png)

1. В строке формул задайте метки **текст** свойство следующее выражение:

    ```powerapps-dot
    ThisItem.Customer.Company
    ```

    > [!div class="mx-imgBorder"]
    > ![Задайте для свойства Text метки подзаголовок](media/northwind-orders-canvas-part1/orders-08.png)

    После того как вы введете следующую формулу, может отображаться ошибку красной волнистой на некоторое время. Ошибки следует сбрасывать, если выбрать объекты вне строки формул и затем вернуть курсор в строку формул. Если ошибка не устранена или вы не видите значение, выберите **представление** выберите **источников данных**и обновите **заказы** сущности, выбрав кнопку с многоточием (...) для справа от имени источника данных.

    При указании **ThisItem.Customer**, вы, используя отношение "многие к одному" между **заказы** и **клиентов** сущностей и получения записи клиента связанную с каждым заказом. Запись клиента, при извлечении данных в **компании** столбец для отображения.

    Можно показать все связи из **заказы** сущности на другие сущности, включая **клиента** сущности:

    > [!div class="mx-imgBorder"]
    > ![Список связей](media/northwind-orders-canvas-part1/orders-09.png)

1. Закройте **данных** панель, выбрав значок закрыть (x) в правом верхнем углу.

## <a name="show-each-orders-status"></a>Показать состояние каждого заказа

В этой процедуре вы добавите пространства в коллекции для метки и настроите его для отображения состояния каждого заказа другим цветом на основе данных.

1. В шаблоне галереи, уменьшите ширину первой метки **Title1**:

    > [!div class="mx-imgBorder"]
    > ![Title1 в шаблона коллекции](media/northwind-orders-canvas-part1/status-01.png)

1. Повторите предыдущий шаг, имеющие в качестве второй метки **Subtitle1**:

    > [!div class="mx-imgBorder"]
    > ![Subtitle1 в шаблона коллекции](media/northwind-orders-canvas-part1/status-02.png)

1. С помощью коллекции шаблона (или элемент управления в шаблоне) выбран, выберите **метка** на **вставить** вкладке:

    > [!div class="mx-imgBorder"]
    > ![Добавить метку](media/northwind-orders-canvas-part1/status-03.png)

1. Переместить новую метку справа от **Title1** метки:

    > [!div class="mx-imgBorder"]
    > ![Перемещение и изменение размера метки](media/northwind-orders-canvas-part1/status-04.png)

1. Задайте **текст** новые метки следующее выражение:

    ```powerapps-dot
    ThisItem.'Order Status'
    ```

    > [!div class="mx-imgBorder"]
    > ![Задайте для свойства Text](media/northwind-orders-canvas-part1/status-05.png)

    В **заказы** сущности, **состояние заказа** поле содержит значение из **состояния заказов** набор параметров. Набор параметров похоже на перечисление в других средствах программирования. Каждый набор параметров определяется в базе данных, поэтому пользователи могут указывать только те параметры, которые входят в набор. **Состояния заказов** набор параметров также глобальными, а не локально, чтобы можно было использовать в других сущностей:

    > [!div class="mx-imgBorder"]
    > ![Упорядочивает набор параметров состояния](media/northwind-orders-canvas-part1/status-06.png)

    Каждый вариант в наборе имеет имя, которое отображается, если он отображается в метке. Эти имена могут быть локализованы, и приложение распознает тот же параметр ли Английский пользователь выбирает **Apple**, французский пользователь выбирает **Pomme**, или испанский пользователь выбирает **Manzana**. По этой причине не удается создать формулу, которая использует жестко закодированный строковый вариант, как показано в этом разделе в более поздней версии.

    В формулах, они должны быть заключены **состояние заказа** с одинарных кавычек, так как он содержит пробел. Тем не менее, это имя функции, аналогичные так, как и любые другие имя в PowerApps, такие как **клиента** или **компании**, does.

1. На **Главная** вкладке, увеличение размера шрифта метки состояния в 20 точках и выровнять текст по правому краю:

    > [!div class="mx-imgBorder"]
    > ![Изменить размер шрифта и выравнивание](media/northwind-orders-canvas-part1/status-07.png)

1. В строке формул задайте **цвет** состояния метки следующую формулу:

    ```powerapps-dot
    Switch( ThisItem.'Order Status',
        'Orders Status'.Closed, Green,
        'Orders Status'.New, Black,
        'Orders Status'.Invoiced, Blue,
        'Orders Status'.Shipped, Purple
    )
    ```

    > [!div class="mx-imgBorder"]
    > ![Задайте для свойства "цвет" Метка "состояние"](media/northwind-orders-canvas-part1/status-08.png)

    PowerApps смогут создавать формулу, которая полагается на жестко заданные строковые для каждого параметра в наборе, так как такие формулы может привести к нежелательным результатам Если имена параметров локализованы. Вместо этого **коммутатора** функция определяет цветом в зависимости от любых строк отображается в метке, на основе параметров пользователя.

    С помощью этой формулы в месте значения различных состояний отображаются разными цветами, как показано в предыдущем графики.

## <a name="display-each-orders-total"></a>Отображение всего каждого заказа

1. Выберите первый элемент в коллекции, являющийся шаблона коллекции:

    > [!div class="mx-imgBorder"]
    > ![Выбрать шаблон коллекции](media/northwind-orders-canvas-part1/aggregate-01.png)

1. На **вставить** выберите **метка** добавить другую метку:

    > [!div class="mx-imgBorder"]
    > ![Добавить метку](media/northwind-orders-canvas-part1/aggregate-02.png)

1. Переместите Новая метка, таким образом, чтобы она отображалась метка "состояние":

    > [!div class="mx-imgBorder"]
    > ![Изменение размеров и перемещение новую метку](media/northwind-orders-canvas-part1/aggregate-03.png)

1. В строке формул задайте новую метку **текст** следующую формулу:

    ```powerapps-dot
    Text( Sum( ThisItem.'Order Details', Quantity * 'Unit Price' ), "[$-en-US]$ #,###.00" )
    ```

    > [!div class="mx-imgBorder"]
    > ![Формула для вычисления Общая стоимость заказа](media/northwind-orders-canvas-part1/aggregate-04.png)

    В этой формуле [ **Sum** ](functions/function-aggregates.md) функция добавляет записи в **Order Details** сущности, которые связаны с каждой записи в **порядок**сущности через отношение один ко многим. Эти элементы строки образуют каждого заказа и той же связи один ко многим будет использоваться для отображения и изменения элементов строки в правой нижней части экрана.

    Эта формула показывает синюю линию подчеркивания и [предупреждения о делегировании](delegation-overview.md) Common Data Service поддерживает делегирование сложные статистические функции (например, сумма умножения). Эту информацию можно игнорировать, поскольку нет заказ в этом примере будет содержать более 500 элементов строки. При необходимости для разных приложений, можно увеличить этот предел в **параметры приложения**.

    [ **Текст** ](functions/function-text.md) функции в этой формуле добавляет символ валюты и форматирует результат с тысячами и десятичные разделители. По мере записи, формула содержит тег языка для США Английский ( **[$-en US]** ) и символ доллара ( **$** ). Если вы удалите тег языка, он будет заменен один в соответствии с параметрами языка и в метке отобразятся соответствующие форматы для этого тега. Если оставить символ доллара, в метке отобразятся соответствующие денежной на основе параметров пользователя. Тем не менее можно задать другой символ для отображения, заменив символ доллара на тот, который вы предпочитаете.

1. На **Главная** вкладке, изменить размер шрифта последнюю метки на 20 точек и выровнять текст по правому краю:

    > [!div class="mx-imgBorder"]
    > ![Изменить размер шрифта и выравнивание метки](media/northwind-orders-canvas-part1/aggregate-05.png)

1. Перемещение коллекции до левого края экрана и уменьшить ширину коллекции так, чтобы закрыть место.

1. Увеличьте высоту галереи, так как это практически по высоте экрана, но оставить немного место в верхней панели заголовка, который вам предстоит добавить в начале следующего раздела:

    > [!div class="mx-imgBorder"]
    > ![Перемещение и изменение размера коллекции](media/northwind-orders-canvas-part1/aggregate-06.png)

## <a name="summary"></a>Сводка

Напомню, вы начали, как создать приложение на основе холста с одним экраном, добавив коллекции порядке, который содержит следующие элементы:

- Выражение для отображения номера заказа: `"Orders " & ThisItem.OrderNumber`
- Поле, в отношении многие к одному: `ThisItem.Customer.Company`
- Метка с именем параметра в наборе: `ThisItem.'Order Status'`
- Метку, которая изменяет формат, в зависимости от того, какой вариант в наборе в метке: `Switch( ThisItem.'Order Status', 'Orders Status'.Closed, Green, ...`
- Сложные агрегатной функции через отношение один ко многим: `Sum( ThisItem.'Order Details', Quantity * 'Unit Price' )`

## <a name="next-topic"></a>Следующий раздел

В следующем разделе вы добавите [ **форма редактирования** ](controls/control-form-detail.md) управления для отображения и редактирования, Сводка по любом порядке пользователь выбирает в коллекции, который вы только что создали.

> [!div class="nextstepaction"]
> [Создание сводной форме](northwind-orders-canvas-part2.md)