---
title: Вопросы и ответы | Документация Майкрософт
description: Вопросы и ответы в порталах Power Apps.
author: sbmjais
manager: shujoshi
ms.service: powerapps
ms.topic: conceptual
ms.custom: ''
ms.date: 12/03/2019
ms.author: shjais
ms.reviewer: ''
ms.openlocfilehash: 28df2292d18f38a78e913a9805ac39a33f6aaf54
ms.sourcegitcommit: 5e6d71967902c463f34a9254f988b9c10e431eb4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/05/2019
ms.locfileid: "2890744"
---
# <a name="power-apps-portals-faq"></a>Вопросы и ответы в порталах Power Apps

Мы составили список часто задаваемых вопросов и кратких ответов на них, чтобы вы могли быстро получить нужную информацию.

## <a name="general"></a>Общие сведения

### <a name="how-do-i-redirect-a-user-to-a-default-page-after-signing-in"></a>Как перенаправлять пользователей на страницу по умолчанию после входа?

Можно настроить портал для перенаправления пользователя на страницу по умолчанию после выполнения входа. Для реализации этой функциональной возможности можно включить код JavaScript в веб-шаблон домашней страницы.

Например, если требуется перенаправлять всех пользователей на страницу форумов после выполнения входа, можно включать код JavaScript в веб-шаблон домашней страницы следующим образом:

```xml
{% if user %}
//if any user logs in
<script>
  window.location.href='./forums/'
</script>
{% else %}
//Home web page code, if you don't want to display the page when the user is being redirected
{% endif %}
//Home web page code, if you want to display the page when the user is being redirected
```

Дополнительные сведения о работе с шаблонами Liquid см. в разделе [Работа с шаблонами Liquid](liquid/liquid-overview.md).

### <a name="im-getting-an-error-that-only-one-portal-can-be-created"></a>Я получаю сообщение об ошибке. только один портал можно создавать.

В настоящее время, можно создать только один портал каждого типа в среде для каждого языка. При попытке создать более одного портала, вы увидите следующее сообщение об ошибке:

> [!div class=mx-imgBorder]
> ![Ошибка создания максимального количества порталов](media/portal-max-error.png "Ошибка создания максимального количества порталов")

Для создания нескольких порталов необходимо создать новую среду используя ссылку **создать новую среду** в сообщении об ошибке. Дополнительные сведения о создании портала см. в разделе [Создание портала](create-portal.md).

### <a name="im-getting-an-error-that-i-cant-delete-my-portal"></a>Я получаю сообщение об ошибке что не удается удалить мой портал.

Если у вас недостаточно прав для удаления портала, вы увидите сообщение об ошибке:

> [!div class=mx-imgBorder]
> ![Ошибка удаления портала](media/portal-delete-error.png "Ошибка удаления портала")

Дополнительные сведения о уничтожении портала и необходимых привилегий см. раздел [Удаление портала](manage-existing-portals.md#delete).

### <a name="im-getting-an-error-that-i-cant-create-a-portal"></a>Я получаю сообщение об ошибке что не удается создать мой портал.

Если у вас недостаточно прав для создания портала в среде, вы увидите сообщение об ошибке:

> [!div class=mx-imgBorder]
> ![Ошибка создания портала](media/portal-create-error.png "Ошибка создания портала")

Дополнительные сведения о создании портала и необходимых привилегий см. раздел [Создание портала](create-portal.md).

### <a name="im-getting-the-message-your-data-isnt-quite-ready"></a>Появилось сообщение: "Данные еще не готовы".

Иногда создание базы данных может занять некоторое время, и правильный статус может не отражаться на домашней странице. В этом случае появится следующее сообщение:

> [!div class=mx-imgBorder]
> ![Данные не готовы](media/data-not-ready.png "Данные не готовы")

Если вы продолжаете получать запрос на создание базы данных или ваши данные не совсем готовы, вы можете попробовать обновить домашнюю страницу Power Apps, прежде чем выбрать плитку **Портал с нуля**.

### <a name="im-getting-an-error-that-i-dont-have-required-permissions-to-create-azure-active-directory-applications"></a>Я получаю сообщение об ошибке, что у меня нет необходимых разрешений для создания приложений Azure Active Directory.

При создании портала портал как новое приложение регистрируется в Azure Active Directory связанный с клиентом. Если у вас недостаточно прав для регистрации приложения в клиенте Azure Active Directory, вы увидите следующее сообщение об ошибке:

> [!div class=mx-imgBorder]
> ![Ошибка Azure Active Directory](media/azure-ad-error.png "Ошибка Azure Active Directory")

Чтобы создавать и регистрировать приложения в Azure Active Directory, необходимо связаться администратор клиента, чтобы включить параметр **Регистрация приложений** для клиента. Для получения информации см. [Необходимые разрешения](https://docs.microsoft.com/azure/active-directory/develop/howto-create-service-principal-portal#required-permissions).

### <a name="im-getting-an-error-that-portal-creation-is-blocked-in-this-tenant-by-global-administrator"></a>Я получаю сообщение об ошибке, что глобальный администратор заблокировал создание портала в этом клиенте

Если создание портала заблокировано в клиенте вашим глобальным администратором, вы увидите ошибку:

> [!div class=mx-imgBorder]
> ![Ошибка блокировки создания портала](media/portal-create-blocked-error.png "Ошибка блокировки создания портала")

Вы должны связаться с вашим глобальным администратором, чтобы разрешить создание порталов пользователями, не являющимися администраторами.

Если вы являетесь глобальным администратором, вы должны отключить параметр уровня клиента `disablePortalsCreationByNonAdminUsers` посредством PowerShell. Выполните следующую команду в окне PowerShell (запустите PowerShell от лица администратора).

```
Set-TenantSettings -RequestBody @{ "disablePortalsCreationByNonAdminUsers" = $false }
```

Дополнительные сведения: [Отключить создание портала в клиенте](create-portal.md#disable-portal-creation-in-a-tenant)

### <a name="im-getting-an-error-that-i-dont-have-appropriate-license-to-access-this-website"></a>Я получаю сообщение об ошибке, что у меня нет соответствующей лицензии для доступа на этот веб-сайт.

Для внутренних пользователей организации, использующих порталы для получения доступа к прошедшим аутентификацию страницам, требуется, чтобы лицензии были назначены среде, к которой подключен портал. Можно прочитать дополнительные сведения о правах пользователей для порталов для внутренних пользователей [здесь](https://docs.microsoft.com/power-platform/admin/powerapps-flow-licensing-faq#can-you-clarify-the-use-rights-to-portals-for-internal-users). Если среда не имеет назначенные лицензии, внутренние пользователи получат ошибку, как указано ниже:

> [!div class=mx-imgBorder]
> ![Ошибка входа на портал](media/portal-login-error.png "Ошибка входа на портал")

## <a name="licensing-and-provisioning"></a>Лицензирование и подготовка

### <a name="how-do-i-get-a-portal-subscription"></a>Как получить подписку на портал?

Подписку на портал можно получить одним из следующих способов:

- Одна надстройка портала предоставляется вместе с приобретением некоторых типов пользовательских лицензий в определенном количестве. Сведения доступны в руководстве по ценообразованию и лицензированию Dynamics 365. Важно отметить, что вы получаете только одну надстройку портала с пользовательскими лицензиями, даже если приобрели несколько типов или большое количество действующих лицензий.

- Дополнительные подписки на портал можно приобрести, купив подписку на надстройку "Портал". Эта подписка являются подпиской на надстройку и доступна для приобретения при наличии соответствующих лицензии Dynamics 365.

### <a name="how-do-i-change-the-audience-and-type-of-a-portal-after-it-is-provisioned"></a>Как изменить аудиторию и тип портала после его подготовки?

После того как вы подготовили портал, параметр изменения аудитории портала отключен.

Тем не менее вы можете изменить аудиторию и тип портала после его подготовки, следуя инструкциям в статье [Изменение экземпляра, аудитории или типа портала Dynamics 365](admin/change-dynamics-instance.md).

> [!NOTE]
> - Рекомендуется сбросить и подготовить портал еще раз, чтобы изменить аудиторию, тип портала, организацию и т. д. Дополнительные сведения: [Сброс портала](admin/reset-portal.md)
> - Изменение экземпляра Dynamics 365 применимо только к порталам, подготовленным с использованием более старых надстроек портала.

### <a name="how-do-i-change-the-base-url-of-a-portal-after-it-is-provisioned"></a>Как изменить базовый URL-адрес портала после его подготовки?

Вы можете изменить базовый URL-адрес портала после его подготовки, следуя инструкциям в статье [Изменение базового URL-адреса портала](admin/change-base-url.md).

### <a name="how-do-i-delete-a-portal-completely-after-it-is-provisioned"></a>Как полностью удалить портал после его подготовки?

Порталы состоят из следующих компонентов:

- **Узел веб-сайта портала**. Узел веб-узла портала — это код портала, который образует сам по себе веб-сайт.

- **Портальные решения**. Решения, которые установлены в среде Common Data Service и содержат сущности метаданных для любого портала.

Чтобы полностью удалить портал, требуется удалить узел веб-сайта портала, а также удалить решения портала из среды Common Data Service.

Чтобы сбросить узел портала, следуйте инструкциям в статье [Сброс портала](admin/reset-portal.md). Важно отметить, что сброс узла портала не влияет на конфигурирование, выполненное в среде Common Data Service.

Для удаления портальных решений потребуется удалить решения из пользовательского интерфейса обозревателя решений Dynamics 365. Порядок, в котором следует удалять портальные решения, приведен в статье [Удаление портальных решений](https://community.dynamics.com/365/b/dynamics365portalssupport/archive/2017/02/27/portal-troubleshooting-part-three-uninstalling-portal-solutions).

## <a name="common-data-service-environment-lifecycle"></a>Жизненный цикл среды Common Data Service

### <a name="we-recently-moved-our-common-data-service-environment-from-one-geolocation-or-tenant-to-another-how-do-we-handle-portals-connected-to-our-organization"></a>Мы недавно перенесли свою среду Common Data Service из одного географического положения (или клиента) в другое географическое положение (или клиент). Что делать с порталами, подключенными к нашей организации?

При переносе среды Common Data Service из одного географического положения (или клиента) в другое географическое положение (или клиент) связанные с этой организацией порталы не будут перенесены автоматически. Кроме того, поскольку ваша организация была перенесена, любой портал, связанный с этой организацией, не будет работать и будет выдавать ошибку при запуске.

Чтобы снова связать портал с соответствующими организациями:

1. Сбросьте свой существующий портальный узел из существующего географического положения, следуя инструкциям в статье [Сброс портала](admin/reset-portal.md). При этом все связанные портальные ресурсы будут удалены, и URL-адрес портала после завершения операции перестанет быть доступен.

2. После сброса существующего портала перейдите в новый клиент (или в новое географическое положение существующего клиента) и подготовьте портал, имеющийся в этом клиенте.

### <a name="after-restoring-a-common-data-service-environment-from-an-old-backup-the-portal-connected-to-the-organization-is-not-working-how-do-we-fix-it"></a>После восстановления среды Common Data Service из старой резервной копии перестал работать портал, связанный с организацией. Как это исправить?

При восстановлении среды Common Data Service из резервной копии в вашу организацию вносятся различные изменения, которые могут разорвать связь вашего портала с организацией. Чтобы устранить эту проблему:

- Если идентификатор организации после операции восстановления остался тем же, и портальные решения присутствуют:

1. Открытие [Центра администрирования портала Power Apps](admin/admin-overview.md).
2. Перейдите на вкладку **Сведения о портале**.
3. В раскрывающемся списке **Состояние портала** выберите **Выкл**.
4. Выберите **Обновить**. 
5. По завершении операции обновления выберите в раскрывающемся списке **Состояние портала** значение **Вкл.**, а затем выберите **Обновить**.

  Ваш портал будет перезапущен, и подключение к организации будет создано снова.

- Если идентификатор организации после операции восстановления другой или портальные решения удалены из вашей организации:

  - В этом случае желательно сбросить портал, следуя инструкциям в статье [Сброс портала](admin/reset-portal.md), а затем подготовить его заново.

### <a name="we-recently-changed-the-url-of-our-common-data-service-environment-and-our-portal-stopped-working-how-do-we-fix-it"></a>Мы недавно изменили URL-адрес своей среды Common Data Service, и наш портал перестал работать. Как это исправить?

При изменении URL-адреса вашей среде Common Data Service ваш портал перестанет работать, потому что он больше не может определить URL-адрес среды Common Data Service. Чтобы устранить эту проблему:

1. Открытие [Центра администрирования портала Power Apps](admin/admin-overview.md).
2. Выберите **Действия портала** > **Обновить URL-адрес Dynamics 365**.
3. Следуйте инструкциям в мастере.

Портал будет перезапущен, и снова заработает.

## <a name="debugging-and-fixing-problems"></a>Отладка и устранение проблем

### <a name="when-accessing-my-portal-i-see-a-generic-error-page-how-can-i-see-the-actual-error"></a>При доступе к своему порталу я вижу универсальную страницу ошибки. Как увидеть фактическую ошибку?

Всякий раз, когда при попытке отрисовки портала происходит ошибка сервера, для конечных пользователей отображается универсальная страница ошибки с меткой времени и идентификатором действия ошибки. Администраторы порталов могут настраивать свои порталы для получения сведений о фактической ошибке, что полезно для отладки и устранения проблем. Чтобы увидеть фактическую ошибку:

- **Отключите настраиваемую страницу ошибки на портале**: после этого настраиваемая страница ошибки отображаться не будет, и при переходе на соответствующую страницу вы сможете видеть полную трассировку стека любой возникшей ошибки. Чтобы отключить настраиваемую ошибку, следуйте инструкциям в статье [Отключение настраиваемой ошибки](admin/view-portal-error-log.md#disable-custom-error).

Это рекомендуется делать только в процессе разработки портала. После ввода портала в эксплуатацию для пользователей следует снова включить настраиваемые ошибки. Дополнительные сведения: [Просмотр журналов ошибок портала](admin/view-portal-error-log.md)

- **Включите ведение журнала диагностики**: это позволит вам получать все ошибки портала в учетной записи хранилища больших двоичных объектов Azure. Включить ведение журнала диагностики можно, следуя инструкциям в статье [Доступ к журналам ошибок портала](admin/view-portal-error-log.md#access-portal-error-logs).

После включения ведения журналов диагностики можно выполнять поиск конкретных ошибок, о которых сообщают пользователи, с помощью идентификатора действия, отображаемого на универсальной странице ошибки. Идентификатор действия заносится в журнал вместе со сведениями об ошибке, и его удобно использовать для поиска фактически возникшей проблемы.

## <a name="portal-administration-and-management"></a>Администрирование портала и управление им

### <a name="how-do-i-use-a-custom-login-provider-on-my-portal"></a>Как использовать настраиваемый поставщик входа на моем портале?

Порталы поддерживают любого настраиваемого поставщика, который предоставляет поддержку стандартных протоколов аутентификации. Мы поддерживает протоколы OpenIdConnect, SAML2 и WS-Federation для любого настраиваемого IDP. Oauth2 поддерживается только для фиксированного набора известных IDP. Дополнительные сведения о том, как настраивать конфигурацию IDP, см. в разделе [Конфигурация аутентификации на портале](configure/configure-portal-authentication.md).

### <a name="how-do-i-get-new-portal-releases-in-my-sandbox-portal-first-before-it-gets-applied-to-production"></a>Как получать новые выпуски портала в своем портале в песочнице, прежде чем применять их к рабочему экземпляру?

Любой выпуск портала производится в два этапа: раннее обновление и общая доступность. На этапе раннего обновления мы обновляем только порталы, отмеченные для раннего обновления. Для получения нового выпуска портала в среде песочницы (для разработки или тестирования) вы можете разрешить раннее обновление своего портала. О том, как разрешить раннее обновление портала, см. в статье [Обновление портала](https://docs.microsoft.com/dynamics365/customer-engagement/portals/upgrade-portal).

### <a name="how-do-i-use-a-custom-domain-name-for-my-portal"></a>Как использовать собственное доменное имя для моего портала?

Можно использовать для портала собственное доменное имя вместо стандартного доменного имени `microsoftcrmportals.com`. Дополнительные сведения: [Связывание портала с настраиваемым доменом](admin/add-custom-domain.md)

## <a name="portal-checker"></a>Средство проверки портала

### <a name="portal-does-not-load-and-displays-a-generic-error-page-server-error-in--application"></a>Портал не загружается и отображается общая страница ошибки (ошибка сервера в приложении "/") 

Эта проблема может быть вызвана различными причинами, такими как порталу не удается подключиться к базовой среде Common Data Service, среда Common Data Service не существует или ее URL-адрес изменен, если истекло время ожидания запроса в среду Common Data Service и т. п. При запуске средства проверки порталов оно попробует определить точную причину и укажет правильный способ устранения. 

Ниже приведен список наиболее частых причин и соответствующих им способов устранения:

#### <a name="url-of-the-connected-common-data-service-environment-has-changed"></a>URL-адрес связанной среды Common Data Service изменен 

Это происходит, когда URL-адрес среды Common Data Service меняется пользователем после подготовки портала для организации. Чтобы исправить эту проблему, обновите URL-адрес Dynamics 365:

1. Открытие [Центра администрирования портала Power Apps](admin/admin-overview.md).
2. Выберите **Действия портала** > **Обновить URL-адрес Dynamics 365**. После того как это действие исполнено успешно, URL-адрес среды Common Data Service будет обновлен и портал начнет работать.

#### <a name="common-data-service-environment-connected-to-your-portal-is-in-administration-mode"></a>Среда Common Data Service, подключенная к вашему порталу, находится в режиме администрирования

Эта проблема возникает, когда среда Common Data Service переведена в режим администрирования либо при переводе организации из производственного режима в режим песочницы, либо вручную администратором организации.

Если это произошло, можно отключить режим администрирования, выполнив действия, представленные [здесь](https://docs.microsoft.com/dynamics365/admin/manage-sandbox-instances#administration-mode). После отключения режима администрирования портал будет работать нормально.

#### <a name="authentication-connection-between-common-data-service-environment-and-portal-is-broken"></a>Подключение для аутентификации между средой Common Data Service и порталом не работает

Эта проблема возникает, когда подключение между организацией Dynamic 365 и порталом нарушено из-за того, что либо среда Common Data Service была восстановлена из резервной копии, либо была удалена и заново воссоздана из резервной копии. Чтобы устранить эту проблему:

1. Открытие [Центра администрирования портала Power Apps](admin/admin-overview.md).
2. На вкладке **Сведения о портале** выберите **Откл.** в списке **Состояние портала**.
3. Выберите **Обновить**.
4. Выберите **Вкл.** в списке **Состояние портала**.
5. Выберите **Обновить**. Портал перезапускается и сможет устанавливать подключение для проверки подлинности.

Однако в некоторых ситуациях, особенно если идентификатор организации изменен после операции восстановления (или если организация была подготовлена заново), этот способ устранения не будет работать. В таких ситуациях можно сбросить и заново подготовить портал для того же экземпляра. Сведения о том, как сбросить портал, см в разделе [Сброс портала](admin/reset-portal.md).

#### <a name="request-to-common-data-service-environment-has-timed-out"></a>Время запроса среды Common Data Service истекло

Эта проблема обычно является временной и может возникать, если истекло время ожидания запроса через API-интерфейс в среду Common Data Service. Эта проблема устраняется автоматически после того как запросы API-интерфейса начнут работать. Чтобы устранить эту проблему, можно также попробовать перезагрузить портал:

1. Открытие [Центра администрирования портала Power Apps](admin/admin-overview.md).
2. Выберите **Действия портала** > **Перезапустить**.

Если перезапуск портала не сработал и проблема сохраняется в течение длительного периода, обратитесь в службу поддержки Майкрософт за помощью.

#### <a name="website-binding-not-found"></a>Привязка веб-сайта не найдена

Эта проблема возникает, когда записи привязки веб-сайта для портала удаляются из основной среды Common Data Service и портал не может автоматически создавать привязку. Чтобы устранить эту проблему:

1. Откройте [Приложение управления порталом](configure/configure-portal.md).
2. Перейдите в раздел **Порталы** > **Привязки к веб-сайтам**.
3. Удалите все записи привязки веб-сайта, которые указывают на портал. Поле **Sitename** помогает определить записи привязки веб-сайта вашего портала.
4. После удаления всех записей привязки веб-сайта перезагрузите портал.

После завершения вышеуказанные действий портал перезапустится и воссоздаст запись привязки веб-сайта автоматически.

Однако есть ситуации, в которых портал не сможет повторно создать запись привязки веб-сайта автоматически, когда идентификатор GUID записи веб-сайта, доступный в экземпляре, отличается от идентификатора, созданного во время установки портала по умолчанию. В данной ситуации выполните следующие действия:

1. Удалите все записи привязки веб-сайта, относящиеся к вашему порталу.
2. Создайте запись привязки веб-сайта вручную со следующими значениями:
  - **Имя**: может быть любая строка
  - **Веб-сайт**: выберите запись веб-сайта, который должен отображаться на портале
  - **Имя сайта**: введите имя узла вашего портала, т. е. URL-адрес портала без https:// в начале. Если портал использует настраиваемое имя домена, используйте здесь имя настраиваемого домена.
  - Оставьте пустыми все другие поля.
3. После повторного создания записи привязки веб-сайта перезапустите портал из центра администрирования порталов Power Apps.

#### <a name="an-unexpected-error-has-occurred-while-trying-to-connect-to-your-common-data-service-environment"></a>При попытке подключения к вашей среде Common Data Service произошла непредвиденная ошибка

Эта ситуация может возникнуть в связи с непредвиденной проблемой. Чтобы устранить ошибку в данной ситуации можно попробовать сбросить или заново подготовить портал. Сведения о том, как сбросить портал, см в разделе [Сброс портала](admin/reset-portal.md).

Если сброс или повторная подготовка портала не устранили проблему, обращайтесь в службу поддержки Майкрософт за помощью.

### <a name="portal-is-not-displaying-updated-data-from-common-data-service-environment"></a>Портал не отображает обновленные данные из среды Common Data Service

Все данные, отображаемые на портале, отображаются из кэша портала. Этот кэш обновляется при каждом обновлении данных в среде Common Data Service. Однако этот процесс асинхронный и может занимать до 15 минут. Если вносятся изменения в метаданные сущности портала, например, веб-страницы, веб-файлы, фрагменты содержимого, параметры сайта и т. д, рекомендуется вручную очистить кэш или перезагрузить портал из центра администрирования порталов Power Apps. Сведения о том, как очистить кэш, см. в разделе [Очистка кэша на стороне сервера для портала](admin/clear-server-side-cache.md). 

Однако если вы видите устаревшие данные в течение длительного времени с сущностях метаданных, не принадлежащих порталу, могут быть разные проблемы, перечисленные ниже.

#### <a name="entities-not-enabled-for-cache-invalidation"></a>Для сущностей не включен перевод кэша в недействительное состояние

Если устаревшие данные отображаются только для некоторых сущностей, а не для всех, это может быть связано с тем, что метаданные отслеживания изменений не включены для этой конкретной сущности.

Если запустить средство проверки портала (диагностика самообслуживания), оно покажет список кода типа объекта для всех сущностей, на которые имеются ссылки на портале в списке сущностей или формах сущностей и веб-формах, для которых не включено отслеживание изменений. Просмотрите метаданные с помощью шагов, указанных в разделе [Просмотр метаданных вашей организации](https://docs.microsoft.com/dynamics365/customerengagement/on-premises/developer/browse-your-metadata)

Если у вас возникла проблема с устаревшими данными в любых из этих сущностей, можно включить отслеживание изменений с помощью пользовательского центра администрирования порталов Power Apps. Пользовательский интерфейс или API Dynamics 365. Дополнительные сведения: [Включение отслеживания изменений для сущности](https://docs.microsoft.com/dynamics365/customerengagement/on-premises/developer/use-change-tracking-synchronize-data-external-systems#enable-change-tracking-for-an-entity)

#### <a name="organization-not-enabled-for-change-tracking"></a>Для организации не включено отслеживание изменений

Независимо от включения отслеживания изменений для каждой сущности, организации целом также должны быть включены для отслеживания изменений. Организации включена для отслеживания изменений, когда отправляется запрос подготовки портала. Однако это может нарушиться, если организация восстановлена из старой базы данных или сброшена. Чтобы устранить эту проблему:

1. Открытие [Центра администрирования портала Power Apps](admin/admin-overview.md).
2. На вкладке **Сведения о портале** выберите **Откл.** в списке **Состояние портала**.
3. Выберите **Обновить**.
4. Выберите **Вкл.** в списке **Состояние портала**.
5. Выберите **Обновить**. Портал перезапускается и сможет устанавливать подключение для проверки подлинности.

### <a name="performance-best-practices"></a>Рекомендации по производительности

Проблемы производительности в порталах могут быть вызваны различными проблемами настройки. Все готовые шаблоны портала были протестированы для различных условий и конфигураций нагрузки, которые могут повлиять на производительность портала, и ниже приведен список распространенных конфигураций портала, которые могут приводить к проблемам производительности портала.

Средство проверки порталов (диагностика с самообслуживанием) также укажет на эти проблемы при проверке конфигурации портала.

#### <a name="web-page-tracking-enabled"></a>Включено отслеживание веб-страниц

Включение веб-страницы портала для отслеживания страницы может привести к проблемам производительности на портале. Эта функция устарела с выпуском версии порталов Dynamics 365 за январь 2018 г. Дополнительные сведения: [Порталы Dynamics 365: устаревшие функции](https://blogs.msdn.microsoft.com/crm/2018/03/20/portal-capabilities-for-dynamics-365-deprecated-features/)

Средство проверки портала перечислит все веб-страницы (как корневую страницу, так и страницы содержимого), для которых включено отслеживание страниц. Эти страницы должны быть отключены с помощью следующих действий:

1. Откройте [Приложение управления порталом](configure/configure-portal.md).
2. Перейдите к расширенному поиску.
3. Найдите все веб-страницы, у которых поле **Включить отслеживание (устарело)** включено (задано значение "Да").
4. Выполните пакетное редактирование страниц и задайте для этого поля значение **Нет**.

Можно также перейти на каждую страницу, указанную в результатах средства проверки портала, и задать в поле **Включить отслеживание (устарело)** значение **Нет**. Важно понимать, чтобы при использовании портального решения Dynamics 365 версии 9.x, это поле не будет отображаться в форме, и может сначала потребоваться добавить его в форму. 

#### <a name="web-file-tracking-enabled"></a>Включено отслеживание веб-файлов

Включение веб-файла портала для отслеживания страницы может привести к проблемам производительности на портале. Эта функция устарела с выпуском версии порталов Dynamics 365 за январь 2018 г. Дополнительные сведения: [Порталы Dynamics 365: устаревшие функции](https://blogs.msdn.microsoft.com/crm/2018/03/20/portal-capabilities-for-dynamics-365-deprecated-features/)

Средство проверки портала перечислит все веб-файлы, для которых включено отслеживание страниц. Эти файлы должны быть отключены с помощью следующих действий:

1. Откройте [Приложение управления порталом](configure/configure-portal.md).
2. Перейдите к расширенному поиску.
3. Найдите все веб-файлы, у которых поле **Включить отслеживание (устарело)** включено (задано значение "Да").
4. Выполните пакетное редактирование записей и задайте для этого поля значение **Нет**.

Можно также перейти на каждый файл, указанный в результатах средства проверки портала, и задать в поле **Включить отслеживание (устарело)** значение **Нет**. Важно понимать, чтобы при использовании портального решения версии 9.x, это поле не будет отображаться в форме, и может сначала потребоваться добавить его в форму. 

#### <a name="login-tracking-enabled"></a>Отслеживание входов включено

Включение отслеживания входов на портал может привести к проблемам производительности на портале. Эта функция устарела с выпуском версии порталов Dynamics 365 за январь 2018 г. Дополнительные сведения: [Порталы Dynamics 365: устаревшие функции](https://blogs.msdn.microsoft.com/crm/2018/03/20/portal-capabilities-for-dynamics-365-deprecated-features/)

Средство проверки портала проверит, включено ли отслеживание входа для портала и выведет неудачную проверку, если оно разрешено. Отслеживание входа должно быть отключено с помощью следующих действий:

1.  Откройте [Приложение управления порталом](configure/configure-portal.md).
2.  Перейдите в раздел **Порталы** > **Параметры сайта**.
3.  Найдите параметр сайта с именем `Authentication/LoginTrackingEnabled`.
4.  Измените значение этого параметра сайта на **False** или удалите параметр сайта.
5.  Перезапустите портал. 

#### <a name="header-output-cache-is-disabled"></a>Кэш вывода верхнего колонтитула отключен

Отключение кэша вывода верхнего колонтитула на вашем портале может привести к проблемам с быстродействием в ситуациях с высокой нагрузкой. Дополнительные сведения об этой функции можно найти в разделе: [Включение кэширования выходных данных верхнего и нижнего колонтитулов на портале](configure/enable-header-footer-output-caching.md)

Средство проверки портала проверит, отключен ли кэш выходных данных верхнего колонтитула для портала и выведет неудачную проверку, если он отключен. Для его включения выполните следующие действия.

1.  Откройте [Приложение управления порталом](configure/configure-portal.md).
2.  Перейдите в раздел **Порталы** > **Параметры сайта**.
3.  Найдите параметр сайта с именем `Header/OutputCache/Enabled`.
4.  Если параметр сайта доступен, измените значение параметра сайта на **True**. Если параметр сайта недоступен, создайте новый параметр сайта с этим именем и задайте для него значение **True**.
5.  Перезапустите портал. 

#### <a name="footer-output-cache-is-disabled"></a>Кэш вывода нижнего колонтитула отключен.

Отключение кэша вывода нижнего колонтитула на вашем портале может привести к проблемам с быстродействием в ситуациях с высокой нагрузкой. Дополнительные сведения об этой функции можно найти в разделе: [Включение кэширования выходных данных верхнего и нижнего колонтитулов на портале](configure/enable-header-footer-output-caching.md)

Средство проверки портала проверит, отключен ли кэш выходных данных нижнего колонтитула для портала и выведет неудачную проверку, если он отключен. Для его включения выполните следующие действия.

1.  Откройте [Приложение управления порталом](configure/configure-portal.md).
2.  Перейдите в раздел **Порталы** > **Параметры сайта**.
3.  Найдите параметр сайта с именем `Footer/OutputCache/Enabled`.
4.  Если параметр сайта доступен, измените значение параметра сайта на **True**. Если параметр сайта недоступен, создайте новый параметр сайта с этим именем и задайте для него значение **True**.
5.  Перезапустите портал. 

#### <a name="large-number-of-web-file-records"></a>Большое количество записей веб-файлов

Сущность веб-файла используется порталом для хранения любых статических файлов, которые требуется использовать на вашем портале. Основной способ использования этой сущности заключается в хранении статического содержимого веб-сайта, такого как CSS, JavaScript, графические файлы и т. п. Однако наличие большого количества таких файлов может замедлять запуск портала.

Средство проверки портала проверит данный сценарий и предоставит вам указание, если на портале имеется более 500 активных веб-файлов. Если все эти файлы представляют статическое содержимое, такое как CSS, JavaScript, графические файлы и т. д,, можно выполнить следующие действия, чтобы устранить эту проблему.

- Используйте внешний файловый сервер, такой как хранилище больших двоичных объектов Azure или CDN для хранения эти файлы, затем укажите ссылки на эти файлы на соответствующих страницах на странице или на базовом шаблоне.

- Если не удается переместить файлы за пределы сайта, убедитесь, что все эти файлы не загружаются вместе с домашней страницей. Веб-файл загружается совместно с домашней страницей, если родительская страница данного файла задана на домашнюю страницу. Во избежание этого сценария можно выполнить следующие действия:

  1. Создайте фиктивную веб-страницу без содержимого и с пустым шаблоном. Эта страница будет использоваться для создания прямого пути к вашим веб-файлам. 
  2. Для всех веб-файлов, которые не нужны на домашней странице, измените родительскую страницу на эту фиктивную веб-страницу. После этого полный путь к веб-файлу будет `Portal URL/{dummy_webpage}/{web file}`
  3. Задайте ссылку на веб-файл прямо в шаблоне страницы HTML или веб-шаблоне страницы, где нужно его использовать. При этом этот файл будет загружаться по требованию на этой странице. 

#### <a name="loading-static-resources-cssjs-asynchronously"></a>Загрузка статических ресурсов (css/js) асинхронно

При работе с реализацией портала важно понимать, что вы полностью управляете кодом HTML страницы, что означает, что стандартные рекомендации по веб-разработке обязательно должны выполняться, чтобы не снизить производительность вашей веб-странице на стороне клиента. 

Один из наиболее частых причин проблем с производительностью на веб-страницах заключается в загрузке статических ресурсов (css/js) синхронно при загрузке страницы. Синхронная загрузка большого количества файлов css/js может привести к длительному времени обработки веб-страницы на стороне клиента. 

В случае порталов каждый раз, когда веб-файл связывается непосредственно с домашней страницей, он создает зависимость в созданном коде HTML, что означает, что этот веб-файл всегда загружается вместе с домашней страницей. Если этот веб-файла является файлом css/js, он будет загружаться синхронно и может замедлить обработку на стороне клиента. 

Во избежание этого можно выполнить следующие действия: 

1. Если веб-файл не требуется на домашней странице, убедитесь, что его родительская страница не установлена в качестве домашней страницы и повторно используйте механизм, описанные выше, для загрузки его по запросу.
2. При загрузке файла JavaScript по требованию на любой странице используйте атрибут HTML `<async>` или `<defer>`, чтобы загрузить файл асинхронно.
3. При загрузке CSS-файла по требованию можно использовать атрибут HTML `<preload>` (https://www.w3.org/TR/preload/) или основный на JavaScript подход, так как предварительная загрузка все еще поддерживается не во всех браузерах.

#### <a name="entity-form-lookup-configuration"></a>Конфигурация поиска форм сущностей 

Включение поиска для преобразования для просмотра в качестве режима раскрывающегося элемента в формах сущностей или веб-формах может снизить производительность, если количество записей, отображаемых в раскрывающемся списке, превышает 200 и часто изменяется. Этот вариант должен использоваться только для статических поисков, таких как список стран и список состояний с ограниченным количеством записей.

Если этот вариант включен для поиска, в котором может быть большое количество записей, это замедлит время загрузки веб-страницы, на которой доступна форма сущности. Если эта страница используется многими пользователями и загружается много раз, это может замедлить весь веб-сайт, и ресурсы веб-сайта будут использованы для отображения этой страницы. В этих ситуациях необходимо использовать полный поиск или создать настраиваемый элемент управления HTML, который вызывает конечную точку AJAX (созданную с помощью веб-шаблонов) для желаемого внешнего вида и работы.

#### <a name="number-of-web-roles"></a>Количество веб-ролей

Веб-роли используются на порталах для управления доступом на основе ролей. Как правило, количество веб-ролей на портале ограничено, так как число различных комбинаций разрешений также будет ограничено. Если количество веб-ролей превышает 100 на вашем портале, это может вызвать проблемы с производительностью, которые могут повлиять на все страницы вашего портала.

### <a name="an-active-home-site-marker-is-not-available-for-this-portal"></a>Для этого портала недоступен активный маркер сайта "Главная страница".

Эта проблема возникает, когда маркер сайта **Главная страница** недоступен в конфигурации вашего портала. Чтобы устранить эту проблему:

1.  Откройте [Приложение управления порталом](configure/configure-portal.md).
2.  В левой области выберите **Маркеры сайта**.
3.  Создайте новый маркер сайта со следующими значениями: 
  - **Имя**: главная
  - **Веб-сайт**: выберите веб-сайт узла вашего портала.
  - **Страница**: выберите запись веб-страницы, которая задана в качестве главной страницы вашего портала.

### <a name="the-home-site-marker-is-not-pointing-to-any-webpage"></a>Маркер сайта "Главная страница" не указывает на веб-страницу.

Эта проблема возникает, когда маркер сайта **Главная страница** доступен, но не указывает на какую-либо веб-страницу. Чтобы устранить эту проблему:

1.  Откройте [Приложение управления порталом](configure/configure-portal.md).
2.  В левой области выберите **Маркеры сайта**.
3.  Найдите маркер сайта **Главная страница**.
4.  Обновите поле **Страница** для указания на активную главную страницу вашего портала.

### <a name="the-home-site-marker-is-pointing-to-a-deactivated-web-page"></a>Маркер сайта "Главная страница" указывает на деактивированную веб-страницу.

Эта проблема возникает, когда маркер сайта **Главная страница** доступен, но указывает на деактивированную какую-либо веб-страницу. Чтобы устранить эту проблему:

1.  Откройте [Приложение управления порталом](configure/configure-portal.md).
2.  В левой области выберите **Маркеры сайта**.
3.  Найдите маркер сайта **Главная страница**.
4.  Обновите поле **Страница** для указания на активную главную страницу вашего портала.

### <a name="the-home-site-marker-is-not-pointing-to-home-page-of-the-portal"></a>Маркер сайта "Главная страница" не указывает на главную страницу портала.

Эта проблема возникает, когда маркер сайта **Главная страница** доступен, но указывает на веб-страницу, которая не является главной страницей вашего портала. Чтобы устранить эту проблему:

1.  Откройте [Приложение управления порталом](configure/configure-portal.md).
2.  В левой области выберите **Маркеры сайта**.
3.  Найдите маркер сайта **Главная страница**.
4.  Обновите поле **Страница** для указания на активную главную страницу вашего портала.

### <a name="an-active-profile-site-marker-is-not-available-for-this-portal"></a>Для этого портала недоступен активный маркер сайта "Профиль".

Эта проблема возникает, когда маркер сайта **Профиль** недоступен в конфигурации вашего портала. Чтобы устранить эту проблему:

1.  Откройте [Приложение управления порталом](configure/configure-portal.md).
2.  В левой области выберите **Маркеры сайта**.
3.  Создайте новый маркер сайта со следующими значениями: 
  - **Имя**: профиль
  - **Веб-сайт**: выберите веб-сайт узла вашего портала.
  - **Страница**: выберите запись веб-страницы, которая задана в качестве страницы профиля вашего портала.

### <a name="the-profile-site-marker-is-not-pointing-to-any-webpage"></a>Маркер сайта "Профиль" не указывает на веб-страницу.

Эта проблема возникает, когда маркер сайта **Профиль** доступен, но не указывает на какую-либо веб-страницу. Чтобы устранить эту проблему:

1.  Откройте [Приложение управления порталом](configure/configure-portal.md).
2.  В левой области выберите **Маркеры сайта**.
3.  Найдите маркер сайта **Профиль**.
4.  Обновите поле **Страница** для указания на активную страницу профиля вашего портала.

### <a name="the-profile-site-marker-is-pointing-to-a-deactivated-web-page"></a>Маркер сайта "Профиль" указывает на деактивированную веб-страницу.

Эта проблема возникает, когда маркер сайта **Профиль** доступен, но указывает на деактивированную какую-либо веб-страницу. Чтобы устранить эту проблему:

1.  Откройте [Приложение управления порталом](configure/configure-portal.md).
2.  В левой области выберите **Маркеры сайта**.
3.  Найдите маркер сайта **Профиль**.
4.  Обновите поле **Страница** для указания на активную страницу профиля вашего портала.

### <a name="an-active-page-not-found-site-marker-is-not-available-for-this-portal"></a>Для этого портала недоступен активный маркер сайта "Страница не найдена".

Эта проблема возникает, когда маркер сайта **Страница не найдена** недоступен в конфигурации вашего портала. Чтобы устранить эту проблему:

1.  Откройте [Приложение управления порталом](configure/configure-portal.md).
2.  В левой области выберите **Маркеры сайта**.
3.  Создайте новый маркер сайта со следующими значениями: 
  - **Имя**: страница не найдена
  - **Веб-сайт**: выберите веб-сайт узла вашего портала.
  - **Страница**: выберите запись веб-страницы, которая задана в качестве страницы "Страница не найдена" вашего портала.

### <a name="the-page-not-found-site-marker-is-not-pointing-to-any-webpage"></a>Маркер сайта "Страница не найдена" не указывает на веб-страницу.

Эта проблема возникает, когда маркер сайта **Страница не найдена** доступен, но не указывает на какую-либо веб-страницу. Чтобы устранить эту проблему:

1.  Откройте [Приложение управления порталом](configure/configure-portal.md).
2.  В левой области выберите **Маркеры сайта**.
3.  Найдите запись маркера сайта **Страница не найдена**.
4.  Обновите поле **Страница** для указания на активную страницу "Страница не найдена" вашего портала.

### <a name="the-page-not-found-site-marker-is-pointing-to-a-deactivated-web-page"></a>Маркер сайта "Страница не найдена" указывает на деактивированную веб-страницу.

Эта проблема возникает, когда маркер сайта **Страница не найдена** доступен, но указывает на деактивированную веб-страницу. Чтобы устранить эту проблему:

1.  Откройте [Приложение управления порталом](configure/configure-portal.md).
2.  В левой области выберите **Маркеры сайта**.
3.  Найдите запись маркера сайта **Страница не найдена**.
4.  Обновите поле **Страница** для указания на активную страницу "Страница не найдена" вашего портала.

### <a name="an-active-access-denied-site-marker-is-not-available-for-this-portal"></a>Для этого портала недоступен активный маркер сайта "Отказано в доступе".

Эта проблема возникает, когда маркер сайта **Отказано в доступе** недоступен в конфигурации вашего портала. Чтобы устранить эту проблему:

1.  Откройте [Приложение управления порталом](configure/configure-portal.md).
2.  В левой области выберите **Маркеры сайта**.
3.  Создайте новый маркер сайта со следующими значениями: 
  - **Имя**: отказано в доступе
  - **Веб-сайт**: выберите веб-сайт узла вашего портала.
  - **Страница**: выберите запись веб-страницы, которая задана в качестве страницы "Отказано в доступе" вашего портала.

### <a name="the-access-denied-site-marker-is-not-pointing-to-any-webpage"></a>Маркер сайта "Отказано в доступе" не указывает на веб-страницу.

Эта проблема возникает, когда маркер сайта **Отказано в доступе** доступен, но не указывает на какую-либо веб-страницу. Чтобы устранить эту проблему:

1.  Откройте [Приложение управления порталом](configure/configure-portal.md).
2.  В левой области выберите **Маркеры сайта**.
3.  Найдите маркер сайта **Отказано в доступе**.
4.  Обновите поле **Страница** для указания на активную страницу "Отказано в доступе" вашего портала.

### <a name="the-access-denied-site-marker-is-pointing-to-a-deactivated-web-page"></a>Маркер сайта "Отказано в доступе" указывает на деактивированную веб-страницу.

Эта проблема возникает, когда маркер сайта **Отказано в доступе** доступен, но указывает на деактивированную веб-страницу (корневая страница или страница с контентом может быть деактивирована). Чтобы устранить эту проблему:

1.  Откройте [Приложение управления порталом](configure/configure-portal.md).
2.  В левой области выберите **Маркеры сайта**.
3.  Найдите маркер сайта **Отказано в доступе**.
4.  Обновите поле **Страница** для указания на активную страницу "Отказано в доступе" вашего портала.

### <a name="profile-web-form-is-not-available-for-contact-entity"></a>Веб-форма профиля недоступна для сущности контакта.

Страница профиля — это одна из общих страниц, используемых на вашем портале для всех проблем, связанных с профилем. На этой странице показана форма, которую пользователи могут использовать для обновления своего профиля. Форма, используемая на этой странице, взята из основной формы **Веб-страница профиля** в сущности контакта. Эта форма создана в вашей среде Common Data Service, когда портал подготовлен. Эта ошибка отображается, когда веб-форма **Профиль** удалена или отключена на вашем портале. Эта форма является обязательной, и удаление или отключение этой формы может привести к поломке всего сайта с отображением ошибки выполнения на портале. Это непоправимое состояние, которое требует переустановки портала в среде.

### <a name="published-state-is-not-available-for-this-website"></a>Состояние "Опубликовано" недоступно для этого веб-сайта.

Чтобы устранить эту проблему, убедитесь, что сущность состояния публикации **Опубликовано** имеется и активна.

### <a name="published-state-is-not-visible"></a>Состояние "Опубликовано" не отображается

Чтобы устранить эту проблему, убедитесь, что для сущности состояния публикации **Опубликовано** установлен флажок **isVisible**.

### <a name="list-of-entities-with-search-result-having-invalid-url"></a>Список сущностей, результаты поиска которых имеют недопустимый URL-адрес

Чтобы устранить эту ошибку, убедитесь, что у сущности имеется соответствующее разрешение безопасности.

### <a name="list-of-entities-with-cms-security-check-failed"></a>Список сущностей, которые не прошли проверку безопасности CMS 

Чтобы устранить эту ошибку, убедитесь, что у сущности имеется соответствующая страница поиска.

### <a name="web-file-is-not-active"></a>Веб-файл не активен

Чтобы устранить эту ошибку, убедитесь, что веб-файл находится в активном состоянии.

### <a name="the-partial-url-of-web-file-is-misconfigured"></a>Частичный URL-адрес веб-файла настроен неправильно

Чтобы устранить эту ошибку, убедитесь, что частичный URL-адрес является именем файла с корневой страницей "Домашняя страница".

### <a name="web-file-doesnt-have-a-file-attachment"></a>Веб-файл не имеет вложенного файла

Чтобы устранить эту ошибку, добавьте соответствующий CSS-файл в раздел примечаний веб-файла.

### <a name="file-attachment-doesnt-have-content"></a>Вложенный файл не имеет содержимого

Чтобы устранить эту ошибку, добавьте CSS-файл со всем содержимым в раздел примечаний веб-файла.

### <a name="mime-type-of-file-is-not-textcss"></a>Тип MIME файла не text/css

Чтобы устранить эту ошибку, убедитесь, что отсутствуют подключаемые модули или потоки, переопределяющие тип MIME CSS-файлов.