---
title: Перенос конфигурации порталов Dynamics 365 | Документация Майкрософт
description: 'Узнайте, как переносить конфигурации порталов Dynamics 365.'
author: sbmjais
manager: shujoshi
ms.service: powerapps
ms.topic: conceptual
ms.custom: null
ms.date: 08/30/2019
ms.author: shjais
ms.reviewer: null
---

# <a name="migrate-dynamics-365-portals-configuration"></a>Перенос конфигурации порталов Dynamics 365

[!include[cc-beta-prerelease-disclaimer](../../../includes/cc-beta-prerelease-disclaimer.md)]

Разработка портала предусматривает несколько конфигураций и настроек для достижения требуемого взаимодействия для пользователей со стороны портала.

После завершения разработки или настройки экземпляра порталов Dynamics 365 может возникнуть необходимость перенести вашу последнюю конфигурацию порталов Dynamics 365 из среды разработки в тестовую или производственную среду. Перенос данных включает в себя экспорт существующих данных конфигурации из исходного экземпляра Dynamics 365 последующий их импорт в целевой экземпляр Dynamics 365.

Чтобы экспортировать данные конфигурации понадобится использовать средство миграции конфигурации и файл схемы конфигурации, зависящий от портала. Дополнительные сведения об этом средстве см. в разделе [Управление данными конфигурации](https://docs.microsoft.com/en-us/dynamics365/customer-engagement/admin/manage-configuration-data).

> [!NOTE]
> - Рекомендуется использовать последнюю версию средства миграции конфигурации. Средство миграции конфигурации можно загрузить с сайта NuGet. Дополнительные сведения для загрузки средства: [Загрузка средств из NuGet](https://docs.microsoft.com/en-us/dynamics365/customer-engagement/developer/download-tools-nuget).
> - Минимальным версия решения порталов Dynamics 365, поддерживаемая файлами схемы для миграции конфигурации: 8.4.0.275. Однако рекомендуется использовать самую новую версию решения.

Файлы схемы доступны для следующих типов порталов:
- [портал сообщества;](https://go.microsoft.com/fwlink/p/?linkid=2019704)
- [Портал самообслуживания клиентов](https://go.microsoft.com/fwlink/p/?linkid=2019705)
- [портал партнеров.](https://go.microsoft.com/fwlink/p/?linkid=2019803)
- [Портал самообслуживания сотрудников](https://go.microsoft.com/fwlink/p/?linkid=2019802)
- [Пользовательский портал](https://go.microsoft.com/fwlink/p/?linkid=2019804)

Файлы схемы по умолчанию содержат сведения о всех сущностях портала, отношениях и определениях уникальности для каждой сущности. Дополнительные сведения: [Экспорт данных конфигурации портала](#export-portal-configuration-data)

После экспорта данных конфигурации необходимо импортировать их в целевую среду. Дополнительные сведения: [Импорт данных конфигурации портала](#import-portal-configuration-data)

> [!NOTE]
> Файлы схемы предоставляются, что сократить объем усилий, необходимых для постройки схемы с нуля. Схему можно адаптировать для данной реализации с использование стандартных способов, предоставляемых этим средством. Файлы схемы можно загружать в средство миграции конфигурации и изменять для добавления, удаления и изменение сущностей, атрибутов и т. п.

## <a name="export-portal-configuration-data"></a>Экспорт данных конфигурации портала

Можно экспортировать данные конфигурации портала из исходной системы, воспользовавшись файлами схемы конфигурации, специфичными для портала.

1.  Загрузите средство миграции конфигурации и извлеките его в требуемую папку.

2.  Загрузите файл схемы конфигурации портала с помощью ссылок, предоставленных выше для портала вашего типа.

3.  Дважды щелкните файл **DataMigrationUtility.exe** в папке `<your_folder>\Tools\ConfigurationMigration`, чтобы запустить средство миграции конфигурации, затем щелкните **Экспорт данных** на главном экране и выберите **Продолжить**.
    
    > [!div class=mx-imgBorder]
    > ![Экспорт данных конфигурации](../media/export-config-data.png "Экспорт данных конфигурации")

4.  На экране **Вход** укажите сведения для аутентификации, чтобы подключиться к экземпляру Dynamics 365, с которого нужно экспортировать данные. Если при наличии нескольких организаций в экземпляре Dynamics 365 необходимо выбрать организацию, из которой импортировать данные, установите флажок **Отображать список доступных организаций**, затем выберите **Войти**.

    > [!div class=mx-imgBorder]
    > ![Укажите сведения для аутентификации, чтобы подключиться к экземпляру Dynamics 365, из которого нужно экспортировать данные](../media/export-config-login.png "Укажите сведения для аутентификации, чтобы подключиться к экземпляру Dynamics 365, из которого нужно экспортировать данные")

5.  Если доступно несколько организаций и на предыдущем шаге установлен флажок **Отображать список доступных организаций**, на следующем экране можно выбрать организацию, к которой будет установлено подключение. Выберите организацию Dynamics 365, к которой требуется подключиться. 

    > [!NOTE]
    > Если не имеется нескольких организаций, этот экран не отображается.

6.  В пункте **Файл схемы** найдите и выберите файл схемы конфигурации, специфичный для портала, который требуется использовать для экспорта данных.

7.  В пункте **Сохранить в файл** укажите имя и расположение экспортируемого файла данных.

    > [!div class=mx-imgBorder]
    > ![Укажите файлы схемы и целевые файлы](../media/export-config-file-name.png "Укажите файлы схемы и целевые файлы")

8.  Выберите **Экспорт данных**. На экране отображается информация о ходе выполнения экспорта, а после завершения экспорта в нижней части экрана выводится расположение экспортированного файла.

    > [!div class=mx-imgBorder]
    > ![Ход выполнения экспорта данных конфигурации](../media/export-config-status.png "Ход выполнения экспорта данных конфигурации")

    > [!IMPORTANT]
    > Средство миграции конфигурации Configuration Migration Tool не поддерживает фильтрацию записей в сущности. По умолчанию все записи в выбранной сущности будут экспортированы. Поэтому если вы создали несколько записей веб-сайтов, все записи веб-сайтов будут экспортированы.

9.  Выберите **Выход**, чтобы закрыть средство.

## <a name="import-portal-configuration-data"></a>Импорт данных конфигурации портала

1.  Запустите средство миграции конфигурации и выберите **Импорт данных** на главном экране, затем выберите **Продолжить**.

    > [!div class=mx-imgBorder]
    > ![Импорт данных конфигурации](../media/import-config-data.png "Импорт данных конфигурации")

2.  На экране **Вход** укажите сведения для аутентификации, чтобы подключиться к экземпляру Dynamics 365, с которого нужно экспортировать данные. Если при наличии нескольких организаций в экземпляре Dynamics 365 необходимо выбрать организацию, из которой импортировать данные, установите флажок **Отображать список доступных организаций**, затем выберите **Войти**.

3.  Если доступно несколько организаций и на предыдущем шаге установлен флажок **Отображать список доступных организаций**, на следующем экране можно выбрать организацию, к которой будет установлено подключение. Выберите организацию Dynamics 365, к которой требуется подключиться. 

    > [!NOTE]
    > - Если не имеется нескольких организаций, этот экран не отображается.
    > - Убедитесь, что решение портала уже установлено для организации, в которую планируется импортировать конфигурации.

4.  На следующем экране будет выведено приглашение указать файл данных (ZIP-файл) для импорта. Перейдите к файлу данных, выберите его, затем выберите **Импортировать данные**. 

    > [!div class=mx-imgBorder]
    > ![Ход выполнения импорта данных конфигурации](../media/import-config-status.png "Ход выполнения импорта данных конфигурации")

5.  На следующем экране отображается статус импорта записей. Импорт данных осуществляется в несколько проходов. Сначала импортируются основные данные, в то время как зависимые данные поступают в очередь. В последующих проходах выполняется импорт зависимых данных, что позволяет обрабатывать зависимости и связи данных. Это обеспечивает прозрачный и согласованный импорт данных. 

6.  Выберите **Выход**, чтобы закрыть средство. 
