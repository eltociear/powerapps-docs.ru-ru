---
title: Перенос конфигурации портала | MicrosoftDocs
description: Узнайте, как переносить конфигурацию портала.
author: tapanm-msft
manager: kvivek
ms.service: powerapps
ms.topic: conceptual
ms.custom: ''
ms.date: 01/08/2020
ms.author: tapanm
ms.reviewer: tapanm
ms.openlocfilehash: cb0e92db15cf3f33ca89975ec3bd8750ca8ee6e2
ms.sourcegitcommit: a0d069f63d2ce9496d578f81e65cd32bec2faa4d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/23/2020
ms.locfileid: "2978516"
---
# <a name="migrate-portal-configuration"></a>Перенос конфигурации портала

Разработка портала предусматривает несколько конфигураций и настроек для достижения требуемого взаимодействия для пользователей со стороны портала.

После завершения разработки или настройки экземпляра портала может возникнуть необходимость перенести вашу последнюю конфигурацию портала из среды разработки в тестовую или рабочую среду. Миграция включает в себя экспорт существующих данных конфигурации из исходной среды Common Data Service и последующий их импорт в целевую среду Common Data Service.

Чтобы экспортировать данные конфигурации понадобится использовать средство миграции конфигурации и файл схемы конфигурации, зависящий от портала. Дополнительные сведения об этом средстве см. в разделе [Управление данными конфигурации](https://docs.microsoft.com/dynamics365/customer-engagement/admin/manage-configuration-data).

> [!NOTE]
> - Рекомендуется использовать последнюю версию средства миграции конфигурации. Средство миграции конфигурации можно загрузить с сайта NuGet. Дополнительные сведения для загрузки средства: [Загрузка средств из NuGet](https://docs.microsoft.com/dynamics365/customer-engagement/developer/download-tools-nuget).
> - Минимальная версия решения порталов, поддерживаемая файлами схемы для миграции данных конфигурации: 8.4.0.275. Однако рекомендуется использовать самую новую версию решения.

Файлы схемы доступны для следующих типов порталов:

- **Порталы, созданные в среде с Common Data Service**
    - [Настраиваемый портал (портал с нуля)](https://go.microsoft.com/fwlink/p/?linkid=2110477)

- **Порталы, созданные в среде, содержащей приложения на основе моделей в Dynamics 365**
    - [Настраиваемый портал (портал с нуля)](https://go.microsoft.com/fwlink/p/?linkid=2019804)
    - [портал сообщества;](https://go.microsoft.com/fwlink/p/?linkid=2019704)
    - [Портал самообслуживания клиентов](https://go.microsoft.com/fwlink/p/?linkid=2019705)
    - [портал партнеров.](https://go.microsoft.com/fwlink/p/?linkid=2019803)
    - [Портал самообслуживания сотрудников](https://go.microsoft.com/fwlink/p/?linkid=2019802)

Файлы схемы по умолчанию содержат сведения о всех сущностях портала, отношениях и определениях уникальности для каждой сущности. Дополнительные сведения: [Экспорт данных конфигурации портала](#export-portal-configuration-data)

После экспорта данных конфигурации необходимо импортировать их в целевую среду. Дополнительные сведения: [Импорт данных конфигурации портала](#import-portal-configuration-data)

> [!NOTE]
> В средстве миграции конфигурации для экспорта и импорта данных конфигурации используются схемы. Средство не переносит сущности или схемы сущностей. Миграция может завершиться неудачно с отсутствующими элементами, такими как сущности и поля, если данные конфигурации не соответствуют выбранной схеме.
>
> Во время экспорта убедитесь, что исходная среда содержит сущности портала, как указано в файле схемы средства миграции конфигурации. Однако вы можете изменить файлы схемы, чтобы добавить, удалить или изменить сущности, атрибуты и т. п., чтобы выполнить миграцию подмножества данных конфигурации.
>
> Во время импорта убедитесь, что среда назначения содержит тот же тип портала, который уже установлен, с любыми дополнительными настройками, такими как сущности, поля, формы или представления, импортированными отдельно в качестве решений.


## <a name="export-portal-configuration-data"></a>Экспорт данных конфигурации портала

Можно экспортировать данные конфигурации портала из исходной системы, воспользовавшись файлами схемы конфигурации, специфичными для портала.

1.  Загрузите средство миграции конфигурации и извлеките его в требуемую папку.

2.  Загрузите файл схемы конфигурации портала с помощью ссылок, предоставленных выше для портала вашего типа.

3.  Дважды щелкните файл **DataMigrationUtility.exe** в папке `<your_folder>\Tools\ConfigurationMigration`, чтобы запустить средство миграции конфигурации, затем щелкните **Экспорт данных** на главном экране и выберите **Продолжить**.
    
    > [!div class=mx-imgBorder]
    > ![Экспорт данных конфигурации](../media/export-config-data.png "Экспорт данных конфигурации")

4.  На экране **Вход** укажите сведения для аутентификации, чтобы подключиться к среде Common Data Service, из которой нужно экспортировать данные. Если при наличии нескольких организаций в среде Common Data Service, откуда будут экспортироваться данные, установите флажок **Отображать список доступных организаций**, затем выберите **Войти**.

    > [!div class=mx-imgBorder]
    > ![Укажите сведения проверки подлинности для подключения среды Common Data Service, из которой требуется экспортировать данные](../media/export-config-login.png "Укажите сведения проверки подлинности для подключения среды Common Data Service, из которой требуется экспортировать данные")

5.  Если доступно несколько организаций и на предыдущем шаге установлен флажок **Отображать список доступных организаций**, на следующем экране можно выбрать организацию, к которой будет установлено подключение. Выберите среду Common Data Service, к которой требуется подключиться. 

    > [!NOTE]
    > Если не имеется нескольких организаций, этот экран не отображается.

6.  В пункте **Файл схемы** найдите и выберите файл схемы конфигурации, специфичный для портала, который требуется использовать для экспорта данных.

7.  В пункте **Сохранить в файл** укажите имя и расположение экспортируемого файла данных.

    > [!div class=mx-imgBorder]
    > ![Укажите файлы схемы и целевые файлы](../media/export-config-file-name.png "Укажите файлы схемы и целевые файлы")

8.  Выберите **Экспорт данных**. На экране отображается информация о ходе выполнения экспорта, а после завершения экспорта в нижней части экрана выводится расположение экспортированного файла.

    > [!div class=mx-imgBorder]
    > ![Ход выполнения экспорта данных конфигурации](../media/export-config-status.png "Ход выполнения экспорта данных конфигурации")

9.  Выберите **Выход**, чтобы закрыть средство.

## <a name="import-portal-configuration-data"></a>Импорт данных конфигурации портала

1.  Запустите средство миграции конфигурации и выберите **Импорт данных** на главном экране, затем выберите **Продолжить**.

    > [!div class=mx-imgBorder]
    > ![Импорт данных конфигурации](../media/import-config-data.png "Импорт данных конфигурации")

2.  На экране **Вход** укажите сведения для аутентификации, чтобы подключиться к среде Common Data Service, из которой нужно экспортировать данные. Если при наличии нескольких организаций в среде Common Data Service, откуда будут экспортироваться данные, установите флажок **Отображать список доступных организаций**, затем выберите **Войти**.

3.  Если доступно несколько организаций и на предыдущем шаге установлен флажок **Отображать список доступных организаций**, на следующем экране можно выбрать организацию, к которой будет установлено подключение. Выберите среду Common Data Service, к которой требуется подключиться. 

    > [!NOTE]
    > - Если не имеется нескольких организаций, этот экран не отображается.
    > - Убедитесь, что решение портала уже установлено для организации, в которую планируется импортировать конфигурации.

4.  На следующем экране будет выведено приглашение указать файл данных (ZIP-файл) для импорта. Перейдите к файлу данных, выберите его, затем выберите **Импортировать данные**. 

    > [!div class=mx-imgBorder]
    > ![Ход выполнения импорта данных конфигурации](../media/import-config-status.png "Ход выполнения импорта данных конфигурации")

5.  На следующем экране отображается статус импорта записей. Импорт данных осуществляется в несколько проходов. Сначала импортируются основные данные, в то время как зависимые данные поступают в очередь. В последующих проходах выполняется импорт зависимых данных, что позволяет обрабатывать зависимости и связи данных. Это обеспечивает прозрачный и согласованный импорт данных. 

6.  Выберите **Выход**, чтобы закрыть средство. 
