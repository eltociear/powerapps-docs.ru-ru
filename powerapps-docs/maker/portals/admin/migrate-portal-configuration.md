---
title: Перенос конфигурации портала | MicrosoftDocs
description: Узнайте, как выполнить миграцию конфигурации портала.
author: sbmjais
manager: shujoshi
ms.service: powerapps
ms.topic: conceptual
ms.custom: ''
ms.date: 10/07/2019
ms.author: shjais
ms.reviewer: ''
ms.openlocfilehash: 0aa057594b500c7019a4d645c70cafcfff183608
ms.sourcegitcommit: d9cecdd5a35279d78aa1b6c9fc642e36a4e4612c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "73543052"
---
# <a name="migrate-portal-configuration"></a>Миграция конфигурации портала

Разработка на портале включает в себя несколько конфигураций и настроек для обеспечения желаемого опыта для конечных пользователей портала.

После завершения разработки или настройки экземпляра портала может потребоваться перенести последнюю конфигурацию портала с разработки на тестирование или в рабочую среду. Миграция включает экспорт существующей конфигурации из исходной среды Common Data Service, а затем импорт ее в целевую среду Common Data Service.

Чтобы экспортировать данные конфигурации, необходимо использовать средство миграции конфигурации и файл схемы конфигурации, относящийся к конкретному порталу. Дополнительные сведения об этом средстве см. в разделе [Управление данными конфигурации](https://docs.microsoft.com/dynamics365/customer-engagement/admin/manage-configuration-data).

> [!NOTE]
> - Рекомендуется использовать последнюю версию средства миграции конфигурации. Средство миграции конфигурации можно скачать с NuGet. Дополнительные сведения для загрузки средства: [Скачайте средства из NuGet](https://docs.microsoft.com/dynamics365/customer-engagement/developer/download-tools-nuget).
> - Минимальная версия решения порталов, поддерживаемая файлами схемы для миграции конфигурации, — 8.4.0.275. Однако рекомендуется использовать последнюю версию решения.

Файлы схемы доступны для следующих типов порталов:
- [Портал сообщества](https://go.microsoft.com/fwlink/p/?linkid=2019704)
- [Портал самообслуживания клиентов](https://go.microsoft.com/fwlink/p/?linkid=2019705)
- [Портал партнера](https://go.microsoft.com/fwlink/p/?linkid=2019803)
- [Портал самообслуживания сотрудников](https://go.microsoft.com/fwlink/p/?linkid=2019802)
- [Пользовательский портал](https://go.microsoft.com/fwlink/p/?linkid=2019804)

Файлы схемы по умолчанию содержат сведения о сущностях, связях и определениях уникальности на портале для каждой сущности. Дополнительные сведения: [Экспорт данных конфигурации портала](#export-portal-configuration-data)

После экспорта данных конфигурации необходимо импортировать их в целевую среду. Дополнительные сведения: [Импорт данных конфигурации портала](#import-portal-configuration-data)

> [!NOTE]
> Файлы схемы предназначены для уменьшения усилий, необходимых для создания схемы с нуля. Схему можно адаптировать под свою реализацию, используя стандартные способы, предоставляемые средством. Файлы схемы могут быть загружены в средство миграции конфигурации и изменены для добавления, удаления и изменения сущностей, атрибутов и т. д.

## <a name="export-portal-configuration-data"></a>Экспорт данных конфигурации портала

Данные конфигурации портала можно экспортировать из исходной системы с помощью файлов схемы конфигурации, связанных с порталом.

1.  Скачайте средство миграции конфигурации и извлеките его в нужную папку.

2.  Скачайте файл схемы конфигурации портала, используя ссылки, указанные выше для типа портала.

3.  Дважды щелкните файл **датамигратионутилити. exe** в папке `<your_folder>\Tools\ConfigurationMigration`, чтобы запустить средство миграции конфигурации, выберите **Экспорт данных** на главном экране, а затем нажмите кнопку **продолжить**.
    
    > [!div class=mx-imgBorder]
    > ![Экспорт данных конфигурации](../media/export-config-data.png "Экспорт данных конфигурации")

4.  На экране **входа** укажите сведения о проверке подлинности для подключения к среде Common Data Service, из которой необходимо экспортировать данные. Если в среде Common Data Service есть несколько организаций, из которых нужно экспортировать данные, установите флажок **Отображать список доступных организаций** и щелкните **имя входа**.

    > [!div class=mx-imgBorder]
    > ![Укажите сведения о проверке подлинности для подключения к среде Common Data Service, из которой необходимо экспортировать данные.](../media/export-config-login.png "Укажите сведения о проверке подлинности для подключения к среде Common Data Service, из которой необходимо экспортировать данные.")

5.  Если у вас несколько организаций и на предыдущем шаге установлен флажок **Отображать список доступных организаций** , то на следующем экране вы можете выбрать организацию, к которой вы хотите подключиться. Выберите Common Data Service среду для подключения. 

    > [!NOTE]
    > Если у вас нет нескольких организаций, этот экран не отображается.

6.  В **файле схемы**найдите и выберите файл схемы конфигурации для конкретного портала, который будет использоваться для экспорта данных.

7.  В поле **сохранить в файл данных**укажите имя и расположение экспортируемого файла данных.

    > [!div class=mx-imgBorder]
    > ![Указание файлов схемы и целевого объекта](../media/export-config-file-name.png "Указание файлов схемы и целевого объекта")

8.  Выберите **Экспорт данных**. После завершения экспорта на экране отображается состояние хода выполнения экспорта и расположение экспортированного файла в нижней части экрана.

    > [!div class=mx-imgBorder]
    > ![Ход выполнения экспорта данных конфигурации](../media/export-config-status.png "Ход выполнения экспорта данных конфигурации")

    > [!IMPORTANT]
    > Средство миграции конфигурации не поддерживает фильтрацию записей в сущности. По умолчанию будут экспортированы все записи в выбранной сущности. Поэтому, если создано несколько записей веб-сайта, будут экспортированы все записи веб-сайта.

9.  Нажмите кнопку **выход** , чтобы закрыть средство.

## <a name="import-portal-configuration-data"></a>Импорт данных конфигурации портала

1.  Запустите средство миграции конфигурации и выберите **Импорт данных** на главном экране, а затем нажмите кнопку **продолжить**.

    > [!div class=mx-imgBorder]
    > ![Импорт данных конфигурации](../media/import-config-data.png "Импорт данных конфигурации")

2.  На экране **входа** укажите сведения о проверке подлинности для подключения к среде Common Data Service, из которой необходимо экспортировать данные. Если в среде Common Data Service есть несколько организаций, из которых нужно экспортировать данные, установите флажок **Отображать список доступных организаций** и щелкните **имя входа**.

3.  Если у вас несколько организаций и на предыдущем шаге установлен флажок **Отображать список доступных организаций** , то на следующем экране вы можете выбрать организацию, к которой вы хотите подключиться. Выберите Common Data Service среду для подключения. 

    > [!NOTE]
    > - Если у вас нет нескольких организаций, этот экран не отображается.
    > - Убедитесь, что решение портала уже установлено для Организации, в которой планируется импортировать конфигурации.

4.  На следующем экране будет предложено указать файл данных (ZIP) для импорта. Перейдите к файлу данных, выберите его и нажмите кнопку **Импорт данных**. 

    > [!div class=mx-imgBorder]
    > ![Ход импорта данных конфигурации](../media/import-config-status.png "Ход импорта данных конфигурации")

5.  На следующем экране отображается состояние импорта ваших записей. Импорт данных выполняется в несколько проходов, чтобы сначала импортировать основные данные при постановке в очередь зависимых данных, а затем импортировать зависимые данные в последующих проходах для управления зависимостями или связями данных. Это обеспечивает чистый и последовательный импорт данных. 

6.  Нажмите кнопку **выход** , чтобы закрыть средство. 
