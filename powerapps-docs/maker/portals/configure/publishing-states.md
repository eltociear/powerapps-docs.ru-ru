---
title: Создание и управление состояниями публикации на порталах Power Apps | Документация Майкрософт
description: Научитесь создавать и управлять состояниями публикации на портале.
author: sbmjais
manager: shujoshi
ms.service: powerapps
ms.topic: conceptual
ms.custom: ''
ms.date: 11/22/2019
ms.author: shjais
ms.reviewer: ''
ms.openlocfilehash: 5ba33887a0b99cc3ddf1eb118ca506a9b740d015
ms.sourcegitcommit: 6b27eae6dd8a53f224a8dc7d0aa00e334d6fed15
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/03/2019
ms.locfileid: "2883934"
---
# <a name="create-and-manage-publishing-states"></a>Создание и управление состояниями публикации

Состояния публикации позволяют определять жизненный цикл содержимого на веб-сайте порталов. На базовом уровне состояние публикации можно определить, должна ли связанная сущность рассматриваться видимой или опубликованной на портале. В более сложных конфигурациях они могут определять многоэтапный процесс для проверки и публикации содержимого с ограничениями безопасности на каждом из этапов.

Состояния публикации можно использовать с [веб-страницами](web-page.md), [веб-файлами](web-files.md), [веб-ссылками](manage-web-links.md), форумами и объявлениями.

По умолчанию предусмотрены два состояния публикации: "Черновик" и "Опубликовано". Черновик определяет содержимое, которое не должно быть видимыми пользователям, не являющимся авторами содержимого, а опубликованное состояние определяет содержимое, которое должно быть видимо всем пользователям портала (кроме прочих ограничений безопасности). Можно изменить конфигурацию по умолчанию в соответствии с вашими конкретными требованиями, если нужно, — добавив новые состояния или переименовав состояния.

## <a name="manage-publishing-states"></a>Управление состояниями публикации

Состояния публикации можно создавать, изменять и удалять на порталах.

1. Откройте [Приложение управления порталом](configure-portal.md).

2. Перейдите в раздел **Порталы** > **Веб-сайты**.

3. Выберите веб-сайт для управления состояниями публикации.

4. Перейдите на вкладку **Состояния публикации**. Отобразится список доступных состояний публикации.

    > [!div class=mx-imgBorder]
    > ![Управление состояниями публикации](../media/publishing-states.png "Управление состояниями публикации")

5. Чтобы добавить новое состояние публикации, выберите **Создать группу публикации**.

6. Для редактирования существующего состояния публикации выберите имя состояния публикации.

7. В окне "Состояние публикации" введите соответствующие значения в поля.

8. Выберите **Сохранить и закрыть**.


### <a name="publishing-state-attributes"></a>Атрибуты состояния публикации

|Имя|Описание|
|-----|--------|
|Имя|Описательное имя состояния. Это поле является необходимым.|
|Веб-сайт|Веб-сайт, которому принадлежит состояние. Это поле является необходимым.|
|По умолчанию|Если установлен, назначает это состояние как состояние по умолчанию для веб-сайта. Это определит состояние по умолчанию, выбираемое при создании новых сущностей через портальную через клиентский интерфейс редактирования портала.<br>**Примечание**. Только одно состояние публикации на некотором веб-сайте должно быть помечено как состояние по умолчанию.|
|Видимый|Если установлен, определяет, что сущности, связанные с этим состоянием, будут рассматриваться видимыми (или опубликованными) на портале.<br>Хотя сущность, связанная с невидимым состоянием, не будет видна на портале, сущность, связанная с видимым состоянием, также может быть невидна из-за разрешений безопасности, дат окончания срока действия или других правил видимости.<br>Пользователям с разрешениями управления содержимым может быть предоставлена возможность использовать режим "предварительный просмотр", который позволяет этим пользователям видеть (предварительно просматривать) неопубликованное содержимое.|
|Порядок отображения|Целое значение, указывающее порядок отображения состояния в меню и раскрывающихся списках для выбора состояния публикации — в основном имеющихся в клиентском интерфейсе редактирования портала.|
|||

## <a name="publishing-state-transition-rules"></a>Правила перехода состояний публикации

Правила перехода состояний публикации обеспечивают детальный контроль над тем, какие веб-роли имеют право делать какие изменения содержимого на портале с точки зрения состояния публикации.

Чтобы быть точным, правила перехода состояний публикации управляют переходами между состояниями публикации (черновик или опубликовано). Когда пользователь пытается переключить состояние публикации элемента с одного на другой, если существует правило для перехода, то поставщик безопасности оценит эту веб-роль для выполнившего вход пользователя на наличие разрешения на выполнение этого переключения.

Если вошедший пользователь, который пытается выполнить изменение, имеет какую-либо из ролей, назначенных вами правилу, переключение будет успешным. Если пользователь не обладает разрешениями делать изменение из одного правила в другое, то клиентское редактирование не позволит ему сделать изменение. Кроме того, можно создать правило; затем при создании веб-ролей добавляйте это правила в веб-роли. Одно правило может быть связано с любым числом веб-ролей и наоборот.

1. Откройте [Приложение управления порталом](configure-portal.md).

2. Выберите **Порталы** > **Правила перехода состояния публикации**.

3. Чтобы создать новое правило, выберите **Создать**.

4. Для редактирования существующего правила выберите название правила.

5. В окне "Правила перехода состояния публикации" введите соответствующие значения в поля.

6. Выберите **Сохранить**, чтобы можно было продолжить добавлять веб-роли к нему.

    > [!div class=mx-imgBorder]
    > ![Создание правила перехода состояния публикации](../media/publishing-state-transition-rule.png "Создание правила перехода состояния публикации")

7. На вкладке **Веб-роли** выберите **Добавить существующую веб-роль**. В области **Поиск записей** найдите и добавьте соответствующие веб-роли.

8. Нажмите кнопку **Сохранить**.

## <a name="state-based-control-rules"></a>Правила управления на основе состояния

[Правила управления доступом к веб-страницам](webpage-access-control.md) можно связать с состояниями публикации, чтобы разрешить или запретить просмотр или изменение содержимого на основании ветви веб-сайта и состояния публикации содержимого в этой ветви. Чтобы добиться этого, свяжите правило управления доступом к веб-страницам с состоянием публикации. После того как оно связано с состоянием публикации, правило будет применяться к веб-страницам только тогда, когда это состояние публикации активно.

Например, допустим вы хотите, чтобы кто-то с ролью публикации содержимого мог изменять содержание страницы, но только когда эта страница находится в режиме "Черновик".  Это обеспечит, что изменения страницы не выполняются, когда страница "опубликована", и будет поддерживать процесс утверждения ожидающих изменений.

Чтобы это сделать, вы создаете правило с предоставлением разрешения на изменение и применяете его к требуемой ветви (или к начальной странице, если правило должно применяться ко всему сайту). Затем вы связываете это правило с состоянием черновика.

> [!div class=mx-imgBorder]
> ![Создание правила управления на основе состояния](../media/state-based-control-rule.png "Создание правила управления на основе состояния")

После этого вы связываете это правило с соответствующей веб-ролью, например, "Публикация содержимого". В предположении, что эта веб-роль не связана с другим разрешительным правилом (т. е., правилом, которое предоставляет право изменения независимо от состояния публикации), пользователи с веб-ролью публикации содержимого смогут изменять страницы в состоянии черновика, но не смогут изменять страницы в опубликованном состоянии.
