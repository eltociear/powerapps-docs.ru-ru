---
title: Добавление географического расположения в управляемую форму на портале | MicrosoftDocs
description: Инструкции по добавлению географического расположения в управляемую форму.
author: sbmjais
manager: shujoshi
ms.service: powerapps
ms.topic: conceptual
ms.custom: ''
ms.date: 11/04/2019
ms.author: shjais
ms.reviewer: ''
ms.openlocfilehash: a3c583658a5593d8e6c5f6c139a5c967e9581626
ms.sourcegitcommit: d9cecdd5a35279d78aa1b6c9fc642e36a4e4612c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "73553562"
---
# <a name="add-geolocation"></a>Добавить географическое расположение

Географическое *положение* — это идентификация в реальном мире географических расположений объекта. Географическое положение тесно связано с использованием систем позиционирования, но посвящено определению осмысленного расположения (например, почтового адреса), а не просто набора географических координат. Географическое положение слова также может означать координаты широты и долготы определенного местоположения.

Управляемую форму можно настроить для отображения элемента управления картой либо для отображения существующего расположения в качестве ПИН-кода на карте, либо для предоставления пользователю возможности указывать расположение.

![Данные о расположении в форме.](../media/location-data-form.png "Данные о расположении в форме")

Если поле формы или адресной строки доступно для редактирования, а это поле пустое, при загрузке страницы будет выведен запрос пользователю о необходимости совместного использования своего расположения. Если они решили предоставить общий доступ к их расположению, то на карте будет обновлено расположение, в котором они обнаружены. Пользователь может уточнить расположение ПИН-кода, перетащив его. Если пользователь решил не предоставлять доступ к своему расположению, он может вручную указать расположение в указанных полях, а служба сопоставления будет запрашивать, чтобы найти расположение, обновить широту и долготу, а также изменить положение ПИН-кода на карте.

## <a name="add-geolocation"></a>Добавить географическое расположение
Чтобы добавить функции географического расположения в управляемую форму, необходимо выполнить следующие задачи.

### <a name="form-customization"></a>Настройка формы
Измените форму сущности с помощью конструктора форм и внесите следующие изменения:

1. Создайте новый раздел и укажите соответствующую метку, например **Map**. В этом разделе будет содержаться схема.
2. Задайте для раздела имя раздела **\_Map** или имя, заканчивающееся на _\_Map_, например **contoso\_Section\_Map**. Это имя важно, поскольку обработчик форм ищет раздел с этим именем, чтобы определить, когда следует визуализировать карту. 
3. Добавьте новое или существующее поле, в котором будет храниться отформатированный адрес, и добавьте его в раздел **Map** , созданный на предыдущем шаге.
4. Создайте новый раздел и укажите соответствующую метку, например **Расположение**. В этом разделе будут содержаться поля адреса для выбранного расположения.
5. Добавьте необходимые поля адреса в раздел **Расположение** , созданный на предыдущем шаге: 
    - Строка адреса
    - Город
    - Название
    - Штат или провинция
    - Страна или регион
    - Почтовый индекс
    - Широта
    - Долгот

Итоговая форма должна выглядеть следующим образом. Для этих полей можно выбрать разные отображаемые имена. Вы также можете выбрать способ размещения этих разделов любым предпочтительным способом.

![Пользовательская форма географического расположения.](../media/custom-geolocation-form.png "Форма настраиваемого географического расположения")

### <a name="site-settings"></a>Параметры сайта
Географическое расположение с функциональностью карты в управляемых формах требует параметров конфигурации для завершения запросов с конечной точкой службы сопоставления. Для настройки службы расположения используются следующие параметры сайта.

|Имя|Value|
|---|---|
|Bingmaps и учетные данные|Уникальный ключ для проверки подлинности запросов к API Карт Bing. Посетите [www.bingmapsportal.com](https://www.bingmapsportal.com) , чтобы создать учетную запись Bing Maps и получить ключ. Обязательно.|
|Bingmaps/Рестурл|URL-адрес REST API Bing Maps. Необязательно. Если значение не указано, используется https://dev.virtualearth.net/REST/v1/Locations по умолчанию.|
| |

### <a name="field-configurations"></a>Конфигурации полей
Элементу управления картой требуется дополнительная настройка, чтобы сообщить ему о том, что такое идентификаторы различных полей расположения, чтобы они могли назначать им значения или получать из них значения. Конфигурация зависит от типа управляемой формы.

- Для форм сущностей см. раздел [Настройка географического расположения для форм сущностей](entity-forms.md#geolocation-configuration-for-entity-forms).

- Для веб-форм см. раздел [Настройка географического расположения для веб-форм](web-form-properties.md#geolocation-configuration-for-web-form).
