---
title: Добавление географического положения в управляемую форму на портале | MicrosoftDocs
description: Инструкции по добавлению географического положения в управляемую форму.
author: sbmjais
manager: shujoshi
ms.service: powerapps
ms.topic: conceptual
ms.custom: ''
ms.date: 11/04/2019
ms.author: shjais
ms.reviewer: ''
ms.openlocfilehash: a3c583658a5593d8e6c5f6c139a5c967e9581626
ms.sourcegitcommit: d9cecdd5a35279d78aa1b6c9fc642e36a4e4612c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "2760940"
---
# <a name="add-geolocation"></a>Добавление географического положения

*Географическое положение* — это идентификация реального географического положения объекта. Географическое положение тесно связано с использованием систем позиционирования, но создает больший акцент на определение значимого положения (например, улица), а не просто набора географических координат. Географическое положение также может означать координаты широты и долготы указанного положения.

Управляемую форму можно настроить для отображения элемента управления картой для отображения существующего положения в виде булавки на карте или для предоставления пользователям возможности указывать положение.

![Данные положения в форме.](../media/location-data-form.png "Данные положения в форме")

Если форма или поле "Строка адреса" являются редактируемыми и это поле пусто, то при загрузке страницы отображается запрос для пользователя с вопросом, не желает ли он указать свое положение. Если он соглашается отображать свое положение, карта будет обновлена для отображения текущего обнаруженного положения пользователя. Пользователь может уточнить положение булавки, перетаскивая ее. Если пользователь не желает указывать свое положение, он может вручную указать местоположения в предоставленных полях, и служба сопоставления получит запрос на поиск местоположения и обновление широты и долготы, а также изменение положения булавки на карте соответственно.

## <a name="add-geolocation"></a>Добавление географического положения
Для добавления функции географического положения в управляемую форму необходимо выполнить следующие задачи.

### <a name="form-customization"></a>Настройка формы
Измените форму сущности с помощью конструктора форм и внесите следующие изменения:

1. Создайте новый раздел и предоставьте соответствующий заголовок, например **Карта**. В этом разделе будет содержаться карта.
2. Задайте имя раздела **section\_map** или имя, оканчивающееся на _section\_map_, например **contoso\_section\_map**. Это имя важно, поскольку механизм форм ищет раздел с этим именем для определения того, следует ли отображать карту. 
3. Добавьте новое или существующее поле, в котором будет храниться отформатированный адрес, и добавьте его в раздел **Карта**, созданный на предыдущем шаге.
4. Создайте новый раздел и предоставьте соответствующий заголовок, например **Положение**. В этом разделе будут содержаться поля адреса для выбранного положения.
5. Добавьте необходимые поля адреса в раздел **Положение**, созданный на предыдущем шаге: 
    - Строка адреса
    - Город
    - Округ
    - Область, республика, край, округ
    - Страна или регион
    - Почтовый индекс
    - Широта
    - Долгота

Полученная форма должна выглядеть приблизительно так: Можно выбирать другие отображаемые имена для этих полей. Можно также выбрать любой предпочтительный макет этих разделов.

![Настраиваемая форма географического положения.](../media/custom-geolocation-form.png "Настраиваемая форма географического положения")

### <a name="site-settings"></a>Параметры сайта
Географическое положение с функцией карты в управляемых формах требует параметров конфигурации для выполнения запросов с конечной точкой REST службы сопоставления. Используются следующие параметры сайта для настройки службы положений.

|Полное имя|Значение|
|---|---|
|Bingmaps/credentials|Уникальный ключ для проверки подлинности запросов к API карт Bing. Для создания учетной записи карт Bing и получения ключа перейдите на веб-сайт [www.bingmapsportal.com](https://www.bingmapsportal.com). Обязательное.|
|Bingmaps/restURL|URL-адрес API REST карт Bing. Необязательно. Если значение не указано, по умолчанию используется https://dev.virtualearth.net/REST/v1/Locations.|
| |

### <a name="field-configurations"></a>Конфигурации полей
Элемент управления картой требует дополнительной конфигурации для указания того, что представляют собой идентификаторы различных полей, чтобы он мог назначать их значения или извлекать значения из них. Конфигурация зависит от типа управляемой формы.

- Формы сущности см. в разделе [Конфигурация географического положения для форм сущностей](entity-forms.md#geolocation-configuration-for-entity-forms).

- Веб-формы см. в разделе [Конфигурация географического положения для веб-форм](web-form-properties.md#geolocation-configuration-for-web-form).
