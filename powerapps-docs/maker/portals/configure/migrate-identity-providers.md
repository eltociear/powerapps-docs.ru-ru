---
title: Миграция поставщиков удостоверений в Azure AD B2C | MicrosoftDocs
description: Узнайте, как переносить поставщики удостоверений в Azure AD B2C.
author: sbmjais
manager: shujoshi
ms.service: powerapps
ms.topic: conceptual
ms.custom: ''
ms.date: 10/18/2019
ms.author: shjais
ms.reviewer: ''
ms.openlocfilehash: a57398d08e190140a3383aef29825f4c08e90363
ms.sourcegitcommit: 57b968b542fc43737330596d840d938f566e582a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/22/2019
ms.locfileid: "72978308"
---
# <a name="migrate-identity-providers-to-azure-ad-b2c"></a>Миграция поставщиков удостоверений в Azure AD B2C

Портал поддерживает настраиваемую систему безопасности, которая позволяет нашим клиентам поддерживать несколько систем проверки подлинности. Портал содержит собственные локальные учетные данные, а также Федерацию с внешними поставщиками удостоверений с помощью стандартных протоколов, таких как OIDC, SAML и WS-Federation. В дальнейшем мы рекомендуем использовать только Azure AD B2C поставщика удостоверений для проверки подлинности и нерекомендуемых других поставщиков удостоверений. 

## <a name="marking-an-identity-provider-as-deprecate"></a>Пометка поставщика удостоверений как устаревшая

На портале можно настроить отметку других поставщиков удостоверений как устаревших и разрешить пользователям переходить на Azure AD B2C поставщика удостоверений. 

Следующие параметры сайта используются для управления устаревшими поставщиками удостоверений.

| Имя  | Description  |
|--------|--------|
| Проверка подлинности/регистрация/Локаллогиндепрекатед | Значение true или false. Если задано значение true, локальная учетная запись будет помечена как устаревшая. Пользователю портала потребуется перейти на нерекомендуемую учетную запись. По умолчанию он имеет значение false. |
| Authentication/[Протокол]/[поставщик]/Депрекатед  | Значение true или false. Если задано значение true, то конкретная учетная запись будет помечена как устаревшая. Пользователю портала потребуется перейти на нерекомендуемую учетную запись. По умолчанию он имеет значение false. |
|||

Когда пользователь портала пытается войти в систему и вы пометили по крайней мере один поставщик удостоверений как устаревший, на странице отображается нерекомендуемая учетная запись. В следующем примере учетная запись Майкрософт помечается как нерекомендуемый.

![Пример нерекомендуемой учетной записи](../media/gdpr-deprecate-account.png "Пример нерекомендуемой учетной записи")

Текст на экране для устаревшего поставщика проверки подлинности можно изменить с помощью следующего фрагмента содержимого:

| Имя                                               | Тип | Value                         |
|----------------------------------------------------|------|-------------------------------|
| Учетная запись/Вход/Сигнинекстерналдепрекатедформхеадинг | Text | Вход с использованием устаревшей учетной записи |
|||

> [!NOTE]
> Нерекомендуемые поставщики удостоверений не отображаются, когда пользователь регистрирует или активирует приглашение для портала.

## <a name="migrating-a-deprecated-identity-provider-to-a-new-identity-provider"></a>Перенос устаревшего поставщика удостоверений в новый поставщик удостоверений

Если пользователь портала входит в систему с нерекомендуемым поставщиком удостоверений, на экране миграции учетных записей отображается сообщение для входа с помощью нерекомендуемого поставщика удостоверений. Когда пользователь входит в систему с нерекомендуемым поставщиком удостоверений, учетная запись пользователя связывается с новым поставщиком.

![Пример миграции учетной записи](../media/gdpr-account-migration.png "Пример миграции учетной записи")

Сообщение на экране для миграции учетных записей можно изменить с помощью следующих фрагментов содержимого:

| Имя                                         | Тип | Value                                                                                                                                                                                                                |
|----------------------------------------------|------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Учетная запись, преобразование или PageTitle                 | Text | Миграция учетных записей                                                                                                                                                                                                    |
| Учетная запись, преобразование или Пажекопи                  | ЭЛЕМЕНТОВ | Вы выполнили вход с учетной записью, которая больше не поддерживается. Чтобы продолжить работу с этим порталом, необходимо выполнить миграцию на другую учетную запись. Нажмите кнопку ниже, чтобы войти с новой или существующей поддерживаемой учетной записью. |
| Учетная запись, преобразование или Сигнинекстерналформхеадинг | Text | Войдите с помощью поддерживаемой учетной записи.                                                                                                                                                                                     |
|||

Портал позволяет связать несколько удостоверений с одной записью контакта. Если несколько поставщиков являются устаревшими, пользователь портала должен иметь согласие на эти условия несколько раз. Каждый раз, когда пользователь входит в систему с нерекомендуемым поставщиком удостоверений, процесс миграции учетных записей инициируется для каждого устаревшего поставщика, а запись контакта связывается с нерекомендуемым поставщиком после миграции учетных записей.

Например: портал поддерживает учетная запись Майкрософт (MSA), Google и Facebook в качестве поставщиков удостоверений для проверки подлинности. Если вы пометите Google и Facebook в качестве устаревших поставщиков, а в качестве поставщиков удостоверений для проверки подлинности у пользователя портала есть только Google и Facebook, пользователь получит сообщение о миграции учетной записи при попытке входа с помощью любого из этих двух поставщиков. При входе пользователя в систему с помощью MSA в запись контакта пользователя добавляется MSA. Теперь у пользователя есть только метод MSA в качестве поддерживаемого поставщика удостоверений проверки подлинности.

Когда пользователь портала выбирает нового поставщика удостоверений, и удостоверение уже связано с другой записью контакта, появляется сообщение об ошибке. Сообщение об ошибке можно настроить с помощью следующих фрагментов содержимого:

| Имя                                                     | Тип | Value                                                                                                                               |
|----------------------------------------------------------|------|-------------------------------------------------------------------------------------------------------------------------------------|
| Учетная запись/Вход/Аккаунтконверсионидентитюседеррорхеадинг | Text | Ошибка преобразования учетной записи                                                                                                            |
| Учетная запись/Вход/Аккаунтконверсионидентитюседеррортекст    | ЭЛЕМЕНТОВ | Эта учетная запись уже существует. Закройте браузер, перезапустите процесс и выберите другую учетную запись на странице миграции учетных записей. |
|||

## <a name="disabling-local-login"></a>Отключение локального входа

Можно настроить портал для отключения локального входа с помощью параметра `Authentication/Registration/LocalLoginDeprecated` сайта. Если кто-то пытается войти с использованием локальных учетных данных, появится экран миграция учетных записей с инструкциями по входу с помощью нерекомендуемого поставщика удостоверений. При миграции учетной записи локальные учетные данные пользователя отключаются.

> [!NOTE]
> Если вы помечаете локальное имя входа как нерекомендуемое, пользователь не сможет зарегистрироваться для использования новой учетной записи.

Следующее поле добавляется в запись контакта портала, чтобы указать, отключено ли локальное имя входа для пользователя.
- **Локальное имя входа отключено**: указывает, что контакт не может войти на портал с помощью локальной учетной записи. По умолчанию задано значение **нет**. Это поле имеет значение **Да** , если учетная запись пользователя перенесена на нерекомендуемый поставщик удостоверений, а локальное имя входа отключено.

    ![Локальное имя входа отключено](../media/local-login-disabled.png "Локальное имя входа отключено")
