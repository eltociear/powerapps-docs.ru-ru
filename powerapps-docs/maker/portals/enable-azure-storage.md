---
title: Включение службы хранилища Azure для порталов | MicrosoftDocs
description: Инструкции по включению службы хранилища Azure для порталов для использования большего числа возможностей хранилища файлов в Azure.
author: sbmjais
manager: shujoshi
ms.service: powerapps
ms.topic: conceptual
ms.custom: ''
ms.date: 10/07/2019
ms.author: shjais
ms.reviewer: ''
ms.openlocfilehash: 3da40cfdcb88726384218c4b1df370c301f8ac16
ms.sourcegitcommit: d9cecdd5a35279d78aa1b6c9fc642e36a4e4612c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "73542557"
---
# <a name="enable-azure-storage"></a>Включение службы хранилища Azure

Интеграция службы хранилища Azure для порталов позволяет воспользоваться преимуществами большего объема хранилища файлов в Azure, используя тот же интерфейс и предоставляя те же возможности пользователя, что и для вложений файлов по умолчанию. Эта функция поддерживается для веб-файлов, форм сущностей и веб-форм.

В качестве модели развертывания необходимо создать учетную запись хранения с помощью **Resource Manager** . [!include[More information](../../includes/proc-more-information.md)] [создать учетную запись хранения Azure](https://docs.microsoft.com/azure/storage/storage-create-storage-account#create-a-storage-account).

Когда учетная запись хранения будет запущена, порталам требуются определенные глобальные параметры, которые указывают приложению, как определить размещение учетной записи хранения. В приложении управления портала перейдите в раздел **параметры** > **создать**и добавьте новый параметр с именем **филестораже/CloudStorageAccount**.

> [!NOTE]
> Максимальный размер передаваемого файла составляет 125 МБ.

Чтобы найти значение для Филестораже/CloudStorageAccount, необходимо получить строку подключения из [!include[Azure portal](../../includes/pn-azure-portal.md)].

1. Войдите в [!include[Azure portal](../../includes/pn-azure-portal.md)].

2. Перейдите к своей учетной записи хранения.

3. Выберите **ключи доступа**.

    ![Поиск значения строки подключения из портал Azure](media/key-azure-storage.png "Поиск значения строки подключения из портал Azure")

4. На появившейся панели выберите поле **строка подключения**. Щелкните значок **копирования** рядом с полем, для которого необходимо скопировать значение, а затем вставьте это значение в новый параметр:

    ![Первичное значение строки подключения](media/primary-connection-string-azure-storage.png "Первичное значение строки подключения")

    ![Параметр портала для учетной записи облачного хранилища](media/portal-site-setting-cloud-storage-account.png "Параметр портала для учетной записи облачного хранилища")

## <a name="specify-the-storage-container"></a>Укажите контейнер хранилища

Если у вас еще нет контейнера больших двоичных объектов Azure в вашей учетной записи хранения, необходимо добавить его с помощью [!include[Azure portal](../../includes/pn-azure-portal.md)].

В [приложении управления портала](configure/configure-portal.md)перейдите в раздел **Параметры** > **создать**и добавьте новый параметр с именем **филестораже/клаудсторажеконтаинернаме**, используя имя контейнера в качестве значения.

![Параметр портала для контейнера облачного хранилища](media/portal-site-setting-cloud-storage-container.png "Параметр портала для контейнера облачного хранилища")

## <a name="add-cors-rule"></a>Добавить правило CORS

Вы должны добавить правило общего доступа к ресурсам для разных источников (CORS) в учетной записи хранения Azure, как показано ниже. в противном случае вы увидите значок обычного вложения, а не значок облака:

- **Разрешенные источники**: укажите домен. Например, contoso.crm.dynamics.com.
- **Разрешенные команды**: Get, размещение, удаление, Head, POST
- **Разрешенные заголовки**: укажите заголовки запросов, которые исходный домен может указать в запросе CORS. Например, x-MS-Meta-Data\*,\*x-MS-meta-Target. 
- **Представляемые заголовки**: укажите заголовки ответа, которые могут быть отправлены в ответ на запрос CORS и предоставленные браузером для поставщика запросов. Например, x-MS-meta-\*.
- **Максимальный возраст (в секундах)** : Укажите максимальное время, в течение которого браузер должен КЭШИРОВАТЬ запрос параметров предварительной проверки. Например, 200.
 
[поддержка [!include[More information:](../../includes/proc-more-information.md)] CORS для служб хранилища Azure](https://docs.microsoft.com/rest/api/storageservices/cross-origin-resource-sharing--cors--support-for-the-azure-storage-services)

## <a name="add-site-settings"></a>Добавить параметры сайта

Добавьте следующие параметры сайта на **порталах** > **Параметры сайта**. [!include[More information:](../../includes/proc-more-information.md)] [Управление параметрами сайта портала](configure/configure-site-settings.md#manage-portal-site-settings).

|Имя|Value|
|-----|-----|
|Файлы для файлов и CloudStorageAccount|Укажите ту же строку подключения, которая указана для параметра Филестораже/CloudStorageAccount.|
|Файлы для файлов и StorageLocation|AzureBlobStorage|
|||

Теперь можно создать дочерний файл на портале и упомянуть полное имя (вместе с контейнером) в URL-адресе Azure BLOB. С помощью этих параметров портал готов начать отправку и загрузку файлов в службу хранилища Azure и из нее. Тем не менее вы не сможете воспользоваться всеми преимуществами этой функции, пока вы не [добавите веб-ресурс, чтобы разрешить передачу вложений в службу хранилища Azure](add-web-resource.md), а также настроить для них [формы](configure-notes.md#notes-configuration-for-entity-forms) или [веб-формы](configure-notes.md#notes-configuration-for-web-forms) .

### <a name="see-also"></a>См. также

[Добавить веб-ресурс](add-web-resource.md)

[Настройка заметок](configure-notes.md)
