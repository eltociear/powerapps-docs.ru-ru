При включении компонента Dynamics 365 Mobile Offline данные Dynamics 365 Online загружаются в базу данных SQL Azure с помощью облака Azure с учетом того, для каких сущностей включена поддержка в автономном режиме. Когда пользователь подключается к облачной службе Azure из мобильного приложения с поддержкой автономного режима, данные из базы данных SQL Azure загружаются в локальную базу данных на мобильном устройстве. Передача данных между базой данных SQL Azure в облаке Azure и мобильным приложением Dynamics 365 Mobile с поддержкой автономного режима происходит через защищенное SSL-соединение. В конечном итоге данные клиентов хранятся в базе данных SQL Azure и на мобильном устройстве.  
  
 Администратор определяет, разрешено ли пользователям организации переходить в автономный режим в приложении Microsoft Dynamics 365 Mobile Offline, с помощью ролей безопасности и настройки профиля Dynamics 365 Mobile. Администраторы Dynamics 365 могут указать, какие сущности загружаются при автономной синхронизации, с помощью параметра "Фильтры синхронизации" в диалоговом окне "Параметры — Mobile Offline".  
  
 Обратите внимание, что данными, хранящимися на устройстве пользователя, управляет клиент, а не Майкрософт. Администратор имеет полный контроль над данными, которые могут быть извлечены, на уровне роли безопасности или сущности. Однако после извлечения данные будут находиться вне защищенной зоны Dynamics 365 Online.  
  
 Ниже представлен список компонентов и служб Azure, используемых с функцией мобильного автономного режима Mobile Offline.  
  
 **Примечание**. Дополнительные сведения о дополнительных предложениях служб Azure см. в разделе [Центр управления безопасностью Microsoft Azure](https://azure.microsoft.com/en-us/support/trust-center/).  
  
 **Облачные службы (веб-роль)**  
  
 В Mobile Offline используются две облачные службы — одна для подготовки, а вторая для синхронизации данных.  
  
 В службе подготовки имеется одна веб-роль, которая считывает сообщения из очереди служебной шины для различных событий, поступающих из Dynamics 365, таких как подготовка или отмена подготовки. Затем она обрабатывает эти сообщения, создавая или удаляя базы данных организации и передавая повторяющиеся рабочие элементы (сообщения) в очередь синхронизации данных служебной шины. В ходе этого процесса она считывает и записывает данные конфигурации из файла CSCFG или из API SW Dynamics 365.  
  
 Служба синхронизации данных содержит две веб-роли. Одна веб-роль обеспечивает синхронизацию схемы и данных промежуточной базы данных с метаданными и данными организации Dynamics 365, а другая веб-роль используется для запуска сервера синхронизации и обработки запросов синхронизации клиента. Первая веб-роль обрабатывает сообщения из очереди синхронизации данных служебной шины для различных организаций, а затем связывается с Dynamics 365 для получения изменений в метаданных и данных, прежде чем зафиксировать их в промежуточной базе данных. Она также выполняет настройку конфигурации сервера синхронизации для организаций, поступающих в систему и выходящих из нее, а также их клиентских моделей. Вторая веб-роль запускает сервер синхронизации (неуправляемый код) для размещения конечных точек администрирования и синхронизации. Конечная точка администрирования используется второй веб-ролью для отправки данных конфигурации. Конечная точка синхронизации используется внешними клиентами (приложением Dynamics 365 Mobile) для синхронизации данных. Как и служба подготовки, обе эти роли считывают и записывают данные конфигурации либо из файла CSCFG, либо из API SW Dynamics 365.  
  
 **Очередь**  
  
 Mobile Offline использует очереди Azure для обмена сообщениями между Dynamics 365 и Azure. Очередь используется для хранения рабочих элементов, обрабатываемых облачными службами. Каждое сообщение содержит такие сведения, как код организации, имя сущности, для которой синхронизируются данные, и строку подключения для конечной точки OData организации.  
  
 **База данных SQL**  
  
 Mobile Offline использует хранилище SQL Azure для хранения:  
  
-   данных, реплицированных из организаций Dynamics 365, и данных для выполнения клиентских запросов на синхронизацию;  
  
-   данных конфигурации, таких как строки подключения к база данных организаций.  
  
 **Хранилище**  
  
 Mobile Offline использует хранилище больших двоичных объектов Azure для хранения журналов и трассировок, создаваемых облачной службой.  
  
 **Служба Active Directory**  
  
 Mobile Offline использует службу Azure Active Directory для проверки подлинности в других службах, таких как API Dynamics 365 или SW либо API управления Azure.  
  
 **Azure DNS**  
  
 Mobile Offline использует Azure DNS для перенаправления запросов клиентов — в соответствии с названиями организаций — в правильные конечные точки облачной службы.  
  
 **Виртуальная сеть Azure**  
  
 Виртуальная сеть Azure (VNet) — это представление вашей собственной сети в облаке. Группа разработчиков Dynamics 365 может управлять параметрами вашей сети Azure и определять блоки адресов DHCP, параметры DNS, политики безопасности и маршрутизацию.  
  
 **Azure Load Balancer**  
  
 Балансировщик нагрузки Azure Load Balancer обеспечивает высокую доступность и сетевую производительность для ваших приложений. Это балансировщик нагрузки 4-го уровня (TCP, UDP), который распределяет входящий трафик между работоспособными экземплярами службы в облачных службах или на виртуальных машинах, заданных в наборе с балансировкой нагрузки. Мы используем его для равномерного распределения нагрузки по нашим конечным точкам в развертывании.