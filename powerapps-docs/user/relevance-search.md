---
title: Поиск по релевантности | Документация Майкрософт
ms.custom: ''
author: mduelae
manager: kvivek
ms.service: powerapps
ms.component: pa-user
ms.topic: conceptual
ms.date: 1/28/2020
ms.author: mduelae
ms.reviewer: ''
ms.assetid: ''
search.audienceType:
- enduser
search.app:
- PowerApps
- D365CE
ms.openlocfilehash: 3a78e555c8818144b41935715ab9f983c7d9714b
ms.sourcegitcommit: 303d5aed44f2bbb406cabeb6b9c8474d738d9114
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/01/2020
ms.locfileid: "76918791"
---
# <a name="using-relevance-search-to-search-for-records"></a>Использование поиска по релевантности для поиска записей

## <a name="what-is-relevance-search"></a>Что такое поиск по релевантности?

Поиск по релевантности предоставляет быстрые и исчерпывающие результаты для нескольких сущностей в одном списке, отсортированном по релевантности. Он использует выделенную службу поиска за пределами Common Data Service (на базе [!INCLUDE[pn_Windows_Azure](../includes/pn-windows-azure.md)]) для повышения производительности поиска.
  
Поиск по релевантности предоставляет следующие улучшения и преимущества.  
<!--note from editor: Edits to these list items are suggested, so they can be parallel throughout this section.-->  
- Повышает производительность благодаря использованию внешней технологии индексирования и поиска [!INCLUDE[pn_azure_shortest](../includes/pn-azure-shortest.md)].  
  
- Находит совпадения с любым словом в поисковом запросе в любом поле сущности, в отличие от быстрого поиска, где все слова из поискового запроса должны находиться в одном поле. 

- Находит совпадения по разным формам слова, например **поток**, **потоковая** или **потоком**.  
  
- Возвращает результаты из всех сущностей, поддерживающих поиск, в одном списке, отсортированном по релевантности, поэтому чем больше совпадение, тем выше результат в списке. Совпадение имеет более высокую релевантность, если больше слов из поискового запроса находятся рядом друг с другом. Чем меньше объем текста, где обнаруживаются слова из запроса, тем выше релевантность. Например, если поисковой запрос содержится в названии и адресе компании, это может быть лучшим совпадением, чем те же слова в длинной статье далеко друг от друга.
  
- Выделяет совпадения в списке результатов. Если поисковой запрос соответствует термину в записи, термин отображается в результатах поиска полужирным шрифтом и курсивом. 

    > [!NOTE]
    > - Некоторые слова, часто используемые в языке (например, **и** или **или**), игнорируются во время поиска, так как они не позволяют однозначно идентифицировать записи. Так как они пропускаются во время поиска, эти слова также не выделяются в результатах.
    > - Выделенные слова часто возвращаются в виде части полного значения в поле, так как выделены только соответствующие слова.  

- Включает результаты поиска для текста в документе, который хранится в Common Data Service, включая текст в примечаниях, вложениях электронной почты или встречах. Для поиска поддерживаются следующие форматы файлов: PDF, документы Microsoft Office, HTML, XML, ZIP, EML, обычный текст и JSON.  
  
- Позволяет искать в записях, к которым вам предоставлен доступ, и в собственных записях.  
  
  > [!NOTE]
  >  Иерархические модели безопасности не поддерживаются. Даже если вы видите строку в Common Data Service, так как у вас есть доступ через иерархическую безопасность, вы не увидите результаты в поиске по релевантности.  
  
- Позволяет также выполнять поиск наборов параметров и уточняющих запросов. Например, вам нужно найти учетную запись розничного магазина, в названии которого есть слово **обувной**. Если вы ищете **обувной магазин**, вы найдете результат, потому что такое совпадение есть и представляет собой набор параметров, поддерживающий поиск.

  > [!NOTE]
  > - Поиск по релевантности основан на тексте и может проверять только поля типа "одна строка текста", "несколько строк текста", "наборы параметров" или "уточняющие запросы". Поиск в полях с типом данных "число" или "дата" не поддерживается.
  
- Позволяет использовать синтаксис в поисковом запросе для получения нужных результатов. Например, введите **автомобиль серебристый двухдверный**, чтобы включить совпадения для любого слова в поисковом запросе в результатах поиска. Введите **автомобиль+серебристый +двухдверный**, чтобы найти только те совпадения, которые содержат все три слова. Введите **автомобиль|серебристый|двухдверный**, чтобы получить результаты, содержащие слова **автомобиль**, или **серебристый**, или **двухдверный**, или все три слова. Дополнительные сведения о синтаксисе, который можно использовать в поисковых запросах, см. в разделе [Простой синтаксис запросов в Когнитивном поиске Azure](https://docs.microsoft.com/rest/api/searchservice/simple-query-syntax-in-azure-search).<!--note from editor: The "More information:" pattern is good when there aren't any additional modifiers, which you have here. -->
  
  > [!NOTE]
  > Поиск по релевантности настроен таким образом, что совпадение определяется по любым (а не по всем) критериям запроса, поэтому вы можете получить неожиданные результаты. Это особенно важно, если запрос содержит логические операторы.<!--note from editor: Via style guide, it's always capital "Boolean," and it's "might" instead of "may.-->

## <a name="enable-relevance-search"></a>Включение поиска по релевантности

Поиск по релевантности по умолчанию отключен. Администратор должен включить его для организации, что позволит всем пользователям в организации использовать его. После включения поиска по релевантности может потребоваться час или более, в зависимости от размера организации, прежде чем вы сможете использовать поиск по релевантности для ваших приложений. Для отображения в системе небольших изменений в индексированных данных может потребоваться до 15 минут.

## <a name="switch-between-relevance-search-and-categorized-search"></a>Переключение между поиском по релевантности и поиском по категории

Если в вашей организации включены оба варианта поиска (поиск релевантности и поиск по категории), можно переключаться между ними.

1. Чтобы переключиться между типами поиска, на панели навигации выберите **Поиск**.

2. Слева выберите раскрывающееся меню, чтобы переключиться между вариантами **Поиск по релевантности** или **Поиск по категории**.

   > [!div class="mx-imgBorder"]
   > ![Переключение между поиском по релевантности и поиском по категории](media/switch-global-search.png "Переключение между поиском по релевантности и поиском по категории") 
    
## <a name="set-a-default-search-experience"></a>Настройка интерфейса поиска по умолчанию

Если в вашей организации включены оба варианта поиска, вы можете выбрать тип поиска по умолчанию в личных настройках.

1. В правом верхнем углу страницы нажмите **Параметры** и выберите **Параметры персонализации**.  
  
   > [!div class="mx-imgBorder"]
   > ![Параметры персонализации](media/personalization-settings.png "Параметры персонализации")  

2. На вкладке **Общие** в разделе **Выбор поиска по умолчанию** для параметра **Поиск по умолчанию** выберите вариант поиска по умолчанию. 

   > [!div class="mx-imgBorder"]
   > ![Выбор варианта поиска по умолчанию](media/default-search-experience.png "Выбор варианта поиска по умолчанию")  

## <a name="start-a-search"></a>Начать поиск 
 
1.  В верхней панели навигации выберите **Поиск**.  

    > [!div class="mx-imgBorder"]
    > ![Кнопка глобального поиска](media/global-search-button.png "Глобальный поиск") 
  
2.  Введите поисковый запрос в поле поиска, а затем выберите **Поиск**.

    > [!div class="mx-imgBorder"]
    > ![Поле поиска по релевантности](media/relevance-search-box.png "Поле поиска по релевантности")   

## <a name="filter-records-with-facets"></a>Фильтрация записей с аспектами

С помощью Common Data Service теперь можно уточнить результаты поиска, используя аспекты и фильтры. Аспекты и фильтры позволяют детализировать и исследовать результаты текущего поиска без повторного уточнения поискового запроса.

Аспекты доступны на самой левой панели. Сразу после выполнения поиска можно использовать следующие глобальные аспекты для четырех общих полей.  
  
-   Тип записи  
  
-   Владелец  
  
-   Создана  
  
-   Дата изменения  
  
### <a name="record-type-facets"></a>Аспекты типов записей

Чтобы сузить результаты поиска для конкретной сущности, выберите сущность в разделе **Тип записи**.  
 
  > [!div class="mx-imgBorder"]
  > ![Аспект типа записи для сужения результатов поиска](media/relevance-search-record-type-facet.png "Аспект типа записи для сужения результатов поиска")  
  
При фильтрации по определенному типу записей можно включить в результаты поиска действия и примечания, связанные с выбранной записью. Для этого установите флажок **Связанные примечания и действия**. Действия и примечания будут отображаться в результатах верхнего уровня.
 
  > [!div class="mx-imgBorder"]
  > ![Включение примечаний и действий, связанных с типом записи, в результаты поиска](media/relevance-search-record-type-facet-related-notes-activities.png "Включение примечаний и действий, связанных с типом записи, в результаты поиска")  
  
Результаты поиска во вложениях электронной почты или встречах отображаются в результатах поиска под родительской записью: сообщением электронной почты или встречей.  
  
При уточнении по типу записи область аспекта переключается на выбранную сущность и отображается до четырех аспектов, относящихся к сущности. Например, если выбрать сущность "Учетная запись", то в дополнение к глобальным аспектам вы увидите аспект **Основной контакт**.  
  
В диалоговом окне **Задать личные параметры** можно также выбрать другие аспекты из тех, которые предоставлены системным администратором или клиентом. Параметры пользователя переопределяют значение по умолчанию. [!INCLUDE[proc_more_information](../includes/proc-more-information.md)] [Настройка аспектов и фильтров для поиска](#BKMK_ConfigureFacets)  
  
### <a name="text-based-facets"></a>Текстовые аспекты

Все уточняющие запросы, наборы параметров и типы записей являются текстовыми аспектами. Например, текстовый аспект "Владелец" состоит из списка значений полей и их соответствующих счетчиков.  
 
  > [!div class="mx-imgBorder"]
  > ![Текстовый аспект в поиске по релевантности](media/relevance-search-text-based-facets.png "Текстовый аспект в поиске по релевантности")  
  
Фильтры в этих аспектах сортируются в порядке убывания по количеству. По умолчанию отображаются первые четыре значения аспекта. При наличии более чем четырех значений аспекта вы увидите ссылку **ПОКАЗАТЬ ЕЩЕ**. Нажмите на нее, чтобы развернуть список и увидеть до пятнадцати первых значений аспекта. Выберите каждое значение для фильтрации результатов поиска, чтобы отображались только те записи, в которых поле имеет выбранное значение. Например, если выбрать **Джим Глинн**, в результатах поиска будут показаны все записи, владелец которых Джим Глинн. При выборе значения аспекта уточняющего запроса или набора параметров результаты поиска фильтруются и включают только записи с указанным значением.  
  
### <a name="date-and-time-facets"></a>Аспекты даты и времени

Как и другие аспекты, можно использовать аспекты даты и времени для фильтрации и просмотра результатов поиска за определенный период. Чтобы выбрать диапазон значений, перетащите ползунок или выберите один из вертикальных столбцов.  
 
  > [!div class="mx-imgBorder"]
  > ![Аспекты даты и времени для поиска по релевантности](media/relevance-search-date-time-facets.png "Аспекты даты и времени для поиска по релевантности")  

<a name="BKMK_ConfigureFacets"></a>

## <a name="configure-facets-and-filters"></a>Настройка аспектов и фильтров
  
> [!NOTE]
>  Настройщик системы может установить вариант по умолчанию для всех сущностей, но можно настроить собственные аспекты и фильтры.  
  
1. В правом верхнем углу нажмите **Параметры** и выберите **Параметры персонализации**.  
  
   > [!div class="mx-imgBorder"]
   > ![Параметры персонализации](media/personalization-settings.png "Параметры персонализации")
  
2. На вкладке **Общие** в разделе **Выбор поиска по умолчанию** в поле **Аспекты и фильтры** выберите **Настройка**.  

   > [!div class="mx-imgBorder"]
   > ![Настройка аспектов и фильтров](media/configure-facets-filters.png "Настройка аспектов и фильтров")  
  
3. В диалоговом окне **Настройка аспектов и фильтров** укажите нужные аспекты для сущности. Системный администратор или настройщик может установить вариант по умолчанию для всех сущностей, но вы можете задать здесь свои параметры.  
  
   - В раскрывающемся списке **Выбор сущности** выберите сущность, для которой требуется настроить аспекты. Этот раскрывающийся список содержит только сущности, для которых включен поиск по релевантности.  
  
   - Для выбранной сущности выберите до четырех полей аспектов. По умолчанию в списке выбираются четыре первых поля, поддерживающих аспекты, в представлении **Быстрый поиск** для выбранной сущности. В любое время в качестве аспектов можно выбрать только четыре поля.  
  
   Вы можете обновить несколько сущностей за один раз. Когда вы нажимаете **ОК**, изменения для всех настроенных сущностей сохраняются. Чтобы вернуться к поведению по умолчанию для ранее настроенной сущности, выберите **По умолчанию**.  
  
   > [!NOTE]
   > - Если настройщик системы удаляет поле или делает его недоступным для поиска и вы сохранили аспект для этого поля, он больше не будет отображаться в качестве аспекта.  
   >   -   Вы увидите только те поля, которые существуют в решении по умолчанию и настроены как доступные для поиска настройщиком системы.  
