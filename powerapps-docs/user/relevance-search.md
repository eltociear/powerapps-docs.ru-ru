---
title: Поиск релевантности | MicrosoftDocs
ms.custom: ''
author: mduelae
manager: kvivek
ms.service: powerapps
ms.component: pa-user
ms.topic: conceptual
ms.date: 1/28/2020
ms.author: mduelae
ms.reviewer: ''
ms.assetid: ''
search.audienceType:
- enduser
search.app:
- PowerApps
- D365CE
ms.openlocfilehash: 25daee9c8dabdbfd39cc1995c6d1e3b28e307da3
ms.sourcegitcommit: 4d858e628c89d245317d6192801d136f3591ea52
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/29/2020
ms.locfileid: "76832651"
---
# <a name="using-relevance-search-to-search-for-records"></a>Использование поиска релевантности для поиска записей

## <a name="what-is-relevance-search"></a>Что такое Поиск релевантности?

Поиск релевантности обеспечивает быстрый и исчерпывающий результат для нескольких сущностей в одном списке, отсортированном по релевантности. Он использует выделенную службу поиска External to Common Data Service (на базе [!INCLUDE[pn_Windows_Azure](../includes/pn-windows-azure.md)]) для повышения производительности поиска. 
  
Поиск релевантности предоставляет следующие улучшения и преимущества:  
  
- Повышает производительность с помощью внешней технологии индексирования и [!INCLUDE[pn_azure_shortest](../includes/pn-azure-shortest.md)] поиска.  
  
- Находит совпадения с любым словом в поисковом выражении в любом поле сущности, по сравнению с быстрым поиском, где все слова из искомого термина должны находиться в одном поле. 

- Соответствия могут включать слова с символами прописью, такие как **поток**, **потоковая передача**или **потоковая**передача.  
  
- Возвращает результаты из всех сущностей, поддерживающих поиск, в одном списке, отсортированном по релевантности, поэтому чем выше совпадение, тем выше оно отображается в результатах. Совпадение имеет более высокую релевантность, если больше слов из искомого термина находится в близком расположении друг к другу. Чем меньше объем текста, где обнаруживаются слова поиска, тем выше релевантность. Например, если найти слова для поиска в названии и адресе компании, это может быть более точно, чем те же слова, которые встречаются в большой статье далеко друг от друга.   
  
- Выделяет совпадения в списке результатов. Если условие поиска соответствует термину в записи, термин отображается в результатах поиска полужирным шрифтом и курсивом. 

    > [!NOTE]
    > - Некоторые слова, часто используемые в языке (например **,** **или),** игнорируются во время поиска, так как они не позволяют однозначно идентифицировать записи. Так как они игнорируются во время поиска, эти слова также не выделяются в результатах.
    > - Выделенные термины часто возвращаются в виде части полного значения в поле, так как выделены только соответствующие термины.  

- Результаты поиска можно найти в документе, который хранится в Common Data Service, включая текст в примечаниях, вложениях электронной почты или встречах. Для поиска поддерживаются следующие форматы файлов: PDF, документы Microsoft Office, HTML, XML, ZIP, EML, обычный текст и JSON.  
  
- Вы можете искать записи, к которым вам предоставлен доступ, и свои собственные записи.  
  
  > [!NOTE]
  >  Иерархические модели безопасности не поддерживаются.  Даже если вы видите строку в Common Data Service так как у вас есть доступ к ней через иерархическую безопасность, вы не увидите результаты в поиске релевантности.  
  
- Можно также выполнить поиск наборов параметров и уточняющих запросов. Например, предположим, что вам нужно найти учетную запись розничного магазина с **Pharmaceuticals** в имени. При поиске **фармацевтических Retail**вы обнаружите результат, так как в поле отрасли имеется совпадение, которое является набором параметров для поиска.

  > [!NOTE]
  > - Поиск релевантности основан на тексте и может выполнять поиск только по полям типа "одна строка текста", "несколько строк текста", "наборы параметров" или "уточняющие запросы". Поиск в полях с типом данных numeric или Date не поддерживается. 
  
- Для получения нужных результатов используйте синтаксис в поисковом выражении. Например, введите **автомобиль серебристый 2-дверь** , чтобы включить совпадения для любого слова в поисковом выражении в результатах поиска. Введите **автомобиль + серебристый +2-дверь** , чтобы найти только совпадения, включающие все три слова. Введите **автомобиль&#124;Серебряный&#124;2-дверь** , чтобы получить результаты, содержащие **автомобиль** или **серебряную** или **2-дверцу**, или все три слова. Дополнительные сведения о синтаксисе, который можно использовать в поисковых запросах: [простой синтаксис запросов в службе поиска Azure](https://docs.microsoft.com/rest/api/searchservice/simple-query-syntax-in-azure-search)
  
  > [!NOTE]
  > Для поиска релевантности настроено требование соответствия любому (а не всем) критерию в запросе, что может привести к тому, что результаты будут отличаться от ожидаемых. Это особенно справедливо, если в запрос включены логические операторы.

## <a name="enable-relevance-search"></a>Включить поиск релевантности

Поиск релевантности по умолчанию отключен. Администратор должен включить его для Организации, что позволит всем пользователям в Организации использовать ее. После включения поиска релевантности может потребоваться подождать до часа или более, в зависимости от размера организации, прежде чем приступить к просмотру результатов поиска релевантности для ваших приложений. Для отображения в системе небольших изменений в индексированных данных может потребоваться до 15 минут.

## <a name="switch-between-relevance-and-categorized-search"></a>Переключение между релевантностью и поиском по категориям

Если в вашей организации включены оба варианта поиска (релевантность и поиск по категориям), то можно переключаться между ними.

1. Чтобы переключиться между типами поиска, нажмите кнопку **Поиск** на панели навигации.

2. Слева выберите раскрывающееся меню, чтобы переключиться между **поиском релевантности** или **поиском по категориям**.

   > [!div class="mx-imgBorder"]
   > ![Переключение между релевантностью и поиском по категориям](media/switch-global-search.png "Переключение между релевантностью и поиском по категориям") 
    
## <a name="set-a-default-search-experience"></a>Настройка интерфейса поиска по умолчанию

Если ваша организация включила оба варианта поиска, вы можете выбрать в личных настройках интерфейс поиска по умолчанию.

1. В правом верхнем углу страницы щелкните **Параметры** , а затем выберите **параметры персонализации**.  
  
   > [!div class="mx-imgBorder"]
   > ![Параметры персонализации](media/personalization-settings.png "Параметры персонализации")  

2. На вкладке **Общие** в разделе **Выбор службы поиска по** умолчанию для **поиска по умолчанию**выберите свой интерфейс по умолчанию. 

   > [!div class="mx-imgBorder"]
   > ![Выбор интерфейса поиска по умолчанию](media/default-search-experience.png "Выбор интерфейса поиска по умолчанию")  

## <a name="start-a-search"></a>Начать поиск 
 
1.  На верхней панели навигации нажмите кнопку **Поиск** .  

    > [!div class="mx-imgBorder"]
    > ![Кнопка глобального поиска](media/global-search-button.png "Кнопка глобального поиска") 
  
2.  Введите слова для поиска в поле поиска и нажмите кнопку **поиска** .   

    > [!div class="mx-imgBorder"]
    > ![Поле поиска релевантности](media/relevance-search-box.png "Поле поиска релевантности")   

## <a name="filter-records-with-facets"></a>Фильтрация записей с аспектами  
С помощью Common Data Service теперь можно уточнить результаты поиска, используя аспекты и фильтры. Аспекты и фильтры позволяют детализировать и исследовать результаты текущего поиска без необходимости повторного уточнения условия поиска. 

На левой панели доступны аспекты. Сразу после выполнения поиска можно использовать следующие глобальные аспекты для четырех общих полей:  
  
-   Тип записи  
  
-   ВЛАДЕЛЕЦ  
  
-   Создано  
  
-   Изменено  
  
### <a name="record-type-facets"></a>Аспекты типа записи  
Чтобы уменьшить результаты поиска для конкретной сущности, выберите сущность в разделе **тип записи** .  
 
  > [!div class="mx-imgBorder"]
  > ![Аспект типа записи для ограничения результатов поиска](media/relevance-search-record-type-facet.png "Аспект типа записи, используемый для уменьшения результатов поиска")  
  
При фильтрации по определенному типу записей можно включить в результаты поиска действия и примечания, связанные с выбранной записью. Для этого установите флажок **связанные примечания & действия** . Действия и заметки будут отображаться в результатах верхнего уровня.
 
  > [!div class="mx-imgBorder"]
  > ![Включить примечания и действия, связанные с типом записи в результатах поиска](media/relevance-search-record-type-facet-related-notes-activities.png "Включить примечания и действия, связанные с типом записи в результатах поиска")  
  
Результаты поиска, найденные во вложениях электронной почты или сущностях встреч, отображаются в результатах поиска под их родительской записью: по электронной почте или в виде встречи.  
  
При уточнении по типу записи область аспекта переключается на выбранную сущность и отображаются до четырех аспектов, относящихся к сущности. Например, если выбрать сущность учетная запись, то в дополнение к глобальным аспектам будет показан **основной аспект связи** .  
  
В диалоговом окне **задать личные параметры** можно также выбрать другие аспекты из тех, которые были доступны системному администратору или заказчику. Параметр User переопределяет значение по умолчанию. [!INCLUDE[proc_more_information](../includes/proc-more-information.md)] [настроить аспекты и фильтры для поиска](#BKMK_ConfigureFacets)  
  
### <a name="text-based-facets"></a>Текстовые аспекты  
Все уточняющие запросы, наборы параметров и типы записей являются аспектами на основе текста. Например, владелец текстового аспекта состоит из списка значений полей и их соответствующих счетчиков.  
 
  > [!div class="mx-imgBorder"]
  > ![Текстовый аспект в поиске релевантности](media/relevance-search-text-based-facets.png "Текстовый аспект в поиске релевантности")  
  
Фильтры в этих аспектах сортируются в порядке убывания по количеству. По умолчанию отображаются первые четыре значения аспекта. При наличии более четырех значений аспекта вы увидите ссылку **Показать больше** , которую можно развернуть, чтобы расширить список и увидеть до пятнадцати значений верхнего аспекта. Выберите каждое значение, чтобы отфильтровать результаты поиска, чтобы отображались только те записи, в которых поле имеет выбранное значение. Например, если выбрать **Джим Глинн**, в результатах поиска будут показаны все записи, в которых владелец — Джим Глинн. При выборе значения аспекта уточняющего запроса или набора параметров результаты поиска фильтруются, добавляя только записи с указанным значением.  
  
### <a name="date-and-time-facets"></a>Аспекты даты и времени  
Как и другие аспекты, можно использовать аспекты даты и времени для фильтрации и просмотра результатов поиска в течение определенного времени. Чтобы выбрать диапазон значений, перетащите ползунок или выберите один из вертикальных столбцов.  
 
  > [!div class="mx-imgBorder"]
  > ![Аспекты даты и времени для поиска релевантности](media/relevance-search-date-time-facets.png "Аспекты даты и времени для поиска релевантности")  

<a name="BKMK_ConfigureFacets"></a>

## <a name="configure-facets-and-filters"></a>Настройка аспектов и фильтров    
  
> [!NOTE]
>  Настройщик системы может установить интерфейс по умолчанию для всех сущностей, но можно настроить собственные аспекты и фильтры.  
  
1. В правом верхнем углу щелкните **Параметры** , а затем выберите **параметры персонализации**.  
  
   > [!div class="mx-imgBorder"]
   > ![Параметры персонализации](media/personalization-settings.png "Параметры персонализации")    
  
2. На вкладке **Общие** в разделе **Выбор службы поиска по умолчанию** для поля **аспекты и фильтры** выберите **Настройка**.  

   > [!div class="mx-imgBorder"]
   > ![Настройка аспектов и фильтров](media/configure-facets-filters.png "Настройка аспектов и фильтров")  
  
3. В диалоговом окне **Настройка аспектов и фильтров** укажите аспекты, которые вы хотите видеть для сущности. Системный администратор или настраиваемый компонент может установить интерфейс по умолчанию для всех сущностей, но вы можете задать его здесь.  
  
   - В раскрывающемся списке **выберите сущность** выберите сущность, для которой требуется настроить аспекты. Этот раскрывающийся список содержит только сущности, для которых включен Поиск релевантности.  
  
   - Для выбранной сущности выберите до четырех полей аспекта. По умолчанию в списке выбираются четыре первых поля в представлении **быстрого поиска** для выбранной сущности. В любое время в качестве аспектов можно выбрать только четыре поля.  
  
   Можно обновить несколько сущностей за один раз. При нажатии **кнопки ОК**изменения для всех настроенных сущностей сохраняются. Чтобы вернуться к поведению по умолчанию для ранее настроенной сущности, выберите **значение по умолчанию**.  
  
   > [!NOTE]
   > - Если Настройщик системы удаляет поле или делает его недоступным для поиска, и вы сохранили аспект для этого поля, он больше не будет отображаться в качестве аспекта.  
   >   -   Вы увидите только те поля, которые существуют в решении по умолчанию и настроены как доступные для поиска средством настройки системы.  
