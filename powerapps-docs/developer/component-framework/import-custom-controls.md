---
title: Импорт компонентов | Документация Майкрософт
description: В этом разделе описывается импорт компонентов кода
keywords: ''
ms.author: nabuthuk
manager: kvivek
ms.date: 06/20/2019
ms.service: powerapps
ms.suite: ''
ms.topic: article
author: Nkrb
ms.openlocfilehash: 3042202fd1790d117c2a503bd6e69eaaea15c08a
ms.sourcegitcommit: 2a3430bb1b56dbf6c444afe2b8eecd0e499db0c3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/12/2019
ms.locfileid: "72346815"
---
# <a name="package-a-code-component"></a>Упаковка компонента кода

В этом разделе описано, как импортировать компоненты кода в Common Data Service. После реализации компонентов кода с помощью интерфейса командной строки PowerApps необходимо объединить все элементы компонента кода в файл решения и импортировать файл решения в Common Data Service, чтобы можно было видеть компоненты кода в среде выполнения.

Чтобы создать и импортировать файл решения, выполните следующие действия.

1. Создайте новую папку и назовите ее **решение** (или любое имя по своему усмотрению) с помощью команды `mkdir Solutions`. Перейдите в каталог с помощью команды `cd Solutions`.

2. Создайте новый проект решений с помощью команды `pac solution init --publisher-name <enter your publisher name> --publisher-prefix <enter your publisher prefix>`. Проект решения используется для объединения компонента кода в ZIP-файл решения, который используется для импорта в Common Data Service.

   > [!NOTE]
   > Значения `publisher-name` и `publisher-prefix` должны быть уникальными для вашей среды.
 
3. После создания нового проекта решения найдите папку **решения** в папке, в которой находится созданный образец компонента. Ссылку можно добавить с помощью команды, показанной ниже. Эта ссылка информирует проект решения о том, какие компоненты кода должны быть добавлены во время сборки. В одном проекте решения можно добавить ссылки на несколько компонентов.

   ```CLI   
    pac solution add-reference --path <path to your PowerApps component framework project>
   ```

3. Чтобы создать ZIP-файл из проекта решения, перейдите в каталог проекта решения и выполните сборку проекта с помощью команды `msbuild /t:build /restore`. Эта команда использует *MSBuild* для построения проекта решения путем извлечения зависимостей *NuGet* в процессе восстановления. Используйте `/restore` только в первый раз при построении проекта решения. Для каждой сборки после этого можно выполнить команду `msbuild`.


    > [!NOTE]
    > - Если MSBuild 15,9. * отсутствует в пути, откройте Командная строка разработчика для VS 2017, чтобы выполнить команды `msbuild`.
    > - При построении решения в конфигурации *отладки* создается неуправляемый пакет решения. Пакет управляемого решения создается путем создания решения в конфигурации *выпуска* . Эти параметры можно переопределить, указав свойство `SolutionPackageType` в файле `cdsproj`.
    > - Можно задать конфигурацию MSBuild, чтобы `Release` выдать рабочую сборку. Пример: `msbuild /p:configuration=Release`
    > - Если при выполнении команды `msbuild` в решении возникает ошибка, которая говорит о *неоднозначном имени проекта* , убедитесь, что имя решения и имя проекта не совпадают.

4. Созданные файлы решения находятся в папке `\bin\debug\` после успешного завершения сборки.
5. Вручную [импортируйте решение в Common Data Service](https://docs.microsoft.com/en-us/dynamics365/customer-engagement/customize/import-update-upgrade-solution) с помощью веб-портала или ознакомьтесь с разделом [Проверка подлинности в Организации](#authenticating-to-your-organization) и [развертывании](#deploying-code-components) , чтобы импортировать с помощью команд CLI для PowerApps.

## <a name="authenticating-to-your-organization"></a>Проверка подлинности в Организации

Компоненты кода можно развернуть непосредственно из интерфейса командной строки PowerApps с помощью проверки подлинности в Common Data Service Организации, а затем принудительной отправки обновленных компонентов. Выполните следующие действия, чтобы создать профиль проверки подлинности, подключиться к Common Data Service и отправить обновленные компоненты. 
 
1. Создайте профиль проверки подлинности с помощью следующей команды: 
 
    ```CLI
    pac auth create --url <your Common Data Service org’s url> 
    ```
 
2. Если ранее был создан профиль проверки подлинности, можно просмотреть все существующие профили с помощью следующей команды: 

   ```CLI
    pac auth list 
   ```
 
3. Чтобы переключиться между ранее созданными профилями проверки подлинности, используйте следующую команду: 
   
   ```CLI
    Pac auth select --index <index of the active profile>
    ``` 

4. Чтобы получить основные сведения о организации, используйте следующую команду. Соединение будет установлено с использованием профиля проверки подлинности по умолчанию. 

    ```CLI
    pac org who 
    ```
 
5. Чтобы удалить определенный профиль проверки подлинности, используйте команду `pac auth delete --index < index of the profile >`. 
6. Если необходимо удалить все профили проверки подлинности с локального компьютера, используйте команду `pac auth clear`. Это действие необратимо, так как оно полностью удаляет `authprofile.json` файл и файл кэша токенов с локального компьютера. 

## <a name="deploying-code-components"></a>Развертывание компонентов кода 

После успешного создания профиля проверки подлинности можно начать передачу компонентов кода в экземпляр Common Data Service со всеми последними изменениями. Функция `push` ускоряет разработку циклов внутреннего разработчика, поскольку она обходит требования к версии компонентов кода и не требует создания решения (кдспрож) для импорта компонента кода. Чтобы использовать функцию `push`, выполните следующие действия.

1. Убедитесь, что создан допустимый профиль проверки подлинности.
2. Перейдите к корневому каталогу, в котором создан проект компонента кода.
3. Выполните команду `pac pcf push --publisher-prefix <your publisher prefix>`.

   > [!NOTE]
   > Префикс издателя, используемый с командой `push`, должен соответствовать префиксу издателя вашего решения, в котором будут включаться компоненты.

## <a name="how-to-remove-components-from-a-solution"></a>Удаление компонентов из решения

Если требуется удалить компонент кода из файла решения, выполните следующие действия.

1.  Измените файл `cdsproj` в каталоге проекта решения и удалите ссылки на компонент. Ниже приведен пример ссылки на компонент:

   ```XML
   <ItemGroup>
       <Projectreference Include="..\pcf_component\pcf_component.pcfproj">
         <Project>0481bd83-ffb0-4b70-b526-e0b3dd63e7ef</Project>
         <Name>pcf_component </Name>
         <Targets>Build</Targets>
         <referenceOutputAssembly>false</referenceOutputAssembly>
         <OutputItemType>Content</OutputItemType>
         <CopyToOutputDirectory>Always</CopyToOutputDirectory>
       </Projectreference>
   </ItemGroup>
   ```

2. Выполните перестроение (или очистите) с помощью следующей команды:
   
    ```CLI
    msbuild /t:rebuild
    ```

### <a name="see-also"></a>См. также

[Добавление компонентов кода в поле или сущность в приложениях, управляемых моделью](add-custom-controls-to-a-field-or-entity.md)<br/>
[Добавление компонентов в приложение Canvas](component-framework-for-canvas-apps.md#add-components-to-a-canvas-app)<br/>
[Справочник по API инфраструктуры компонентов PowerApps](reference/index.md)<br/>
[Обзор платформы компонентов PowerApps](overview.md)
