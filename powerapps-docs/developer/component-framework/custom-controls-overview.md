---
title: Что такое компоненты кода? | MicrosoftDocs
description: Используйте платформу компонентов PowerApps для создания компонентов кода, чтобы предоставить пользователям расширенные возможности для просмотра и работы с данными в формах, представлениях и панелях мониторинга.
manager: kvivek
ms.date: 09/05/2019
ms.service: powerapps
ms.topic: article
ms.assetid: 135481cd-4583-4e49-8f58-02f32a9b054a
ms.author: nabuthuk
author: Nkrb
ms.openlocfilehash: 08a2043dfb92634837c367e664306d9c100632d6
ms.sourcegitcommit: 2a3430bb1b56dbf6c444afe2b8eecd0e499db0c3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/12/2019
ms.locfileid: "72346976"
---
# <a name="what-are-code-components"></a>Что такое компоненты кода

Компоненты кода — это типы компонентов решений, которые означают, что они могут быть включены в файл решения и установлены в разных средах. Дополнительные сведения: [Упаковка и распространение расширений с помощью решений](https://docs.microsoft.com/dynamics365/customer-engagement/developer/package-distribute-extensions-use-solutions).

Вы добавляете компоненты кода, включая их в решение, а затем импортируете их в Common Data Service. После того, как компоненты находятся в Common Data Service, системные администраторы и Настройщики системы могут настраивать поля, вложенные сетки, представления и вложенные сетки панели мониторинга для использования вместо компонентов по умолчанию. Эти компоненты кода также можно добавить в приложения Canvas. 

Компоненты кода состоят из трех элементов:

1. [Явление](#manifest)
2. [Библиотека реализации компонентов](#component-implementation-library)
3. [Resources](#resources)

## <a name="manifest"></a>Явление

Манифест — это файл метаданных, определяющий компонент. Это XML-документ, описывающий следующее.

- Имя компонента.
- Тип данных, которые могут быть настроены либо полем, либо набором данных.
- Любые свойства, которые могут быть настроены в приложении при добавлении компонента.
- Список файлов ресурсов, необходимых для компонента. 
- Имя функции TypeScript в библиотеке реализации компонентов, возвращающей объект, который применяет требуемый интерфейс компонента.

Когда пользователь настраивает компонент кода, данные в файле манифеста отфильтровывают доступные компоненты, чтобы можно было настроить только допустимые компоненты для контекста. Свойства, определенные в файле манифеста для компонента, подготавливаются к просмотру как поля конфигурации, чтобы пользователь, настроив компонент, мог указать значения. Затем эти значения свойств доступны компоненту во время выполнения. Дополнительные сведения: [Справочник по схеме манифеста](manifest-schema-reference/index.md)

## <a name="component-implementation-library"></a>Библиотека реализации компонентов

Реализация библиотеки компонентов является одним из основных шагов при разработке компонентов кода с помощью платформы компонентов PowerApps. Разработчики могут реализовать библиотеку компонентов с помощью TypeScript. Каждый компонент кода должен иметь библиотеку, включающую определение функции, которая возвращает объект, реализующий методы, описанные в интерфейсе компонента кода. 

Объект реализует следующие методы:

- [init](reference/control/init.md) (обязательно)
- [упдатевиев](reference/control/updateview.md) (обязательно)
- [выходные данные](reference/control/getoutputs.md) (необязательно)
- [уничтожить](reference/control/destroy.md) (обязательно)

Эти методы управляют жизненным циклом компонента кода.

### <a name="page-load"></a>Загрузка страницы

При загрузке страницы приложению требуется объект для работы. Используя данные из файла манифеста, код получает объект, вызывая:

```js
var obj =  new <"namespace on manifest">.<"constructor on manifest">();
```

Если пространство имен и значения конструктора из манифеста `SampleNameSpace` и `LinearInputComponent` соответственно, код для создания экземпляра объекта будет следующим:

```js
var controlObj = new SampleNameSpace.LinearInputComponent();
```

Когда страница будет готова, она инициализирует компонент, вызывая метод [init](reference/control/init.md) с набором параметров.

```js
controlObj.init(context,notifyOutputChanged,state,container);
```

|Параметр|Description|
|---|---|
|локального| Содержит все сведения о настройке компонента и всех параметрах, которые могут использоваться в компоненте вместе с [API-интерфейсами инфраструктуры компонентов PowerApps](reference/index.md). Например, `context.parameters.<"property name from manifest">` можно использовать для доступа к свойству Input.|
|нотифйоутпутчанжед |Предупреждает платформу каждый раз, когда компонент кода имеет новые выходные данные, готовые для асинхронного получения.|
|С|Содержит данные компонента из предыдущей загрузки страницы в текущем сеансе, если компонент явно сохранял его ранее с помощью метода [сетконтролстате](reference/mode/setcontrolstate.md) .|
|Контейнера|Элемент HTML div, к которому разработчики и создатели приложений могут добавлять элементы HTML для пользовательского интерфейса, определяющего компонент.|

### <a name="user-changes-data"></a>Данные изменения пользователя

При загрузке страницы компонент отображает данные, пока пользователь не взаимодействует с компонентом для изменения данных. В этом случае необходимо вызвать метод, переданный в качестве параметра *нотифйоутпутчанжед* в методе [init](reference/control/init.md) . При использовании этого метода платформа затем отвечает, вызывая метод [выдачи](reference/control/getoutputs.md) . Метод [вывода](reference/control/getoutputs.md) возвращает значения, которые были внесены пользователем. Для компонента поля это, как правило, новое значение для компонента.

### <a name="app-changes-data"></a>Данные изменения приложения

Если платформа изменяет данные, она вызывает метод [упдатевиев](reference/control/updateview.md) компонента и передает новый объект контекста в качестве параметра. Этот метод следует реализовать для обновления значений, отображаемых в компоненте.

### <a name="page-close"></a>Закрыть страницу

Каждый раз, когда пользователь переходит со страницы, компонент кода теряет область, и вся память, выделенная на этой странице для объектов, удаляется. Однако некоторые методы, основанные на механизме внедрения браузера, могут оставаться и потреблять память. Как правило, это обработчики событий. Если пользователь хочет сохранить эти сведения, они должны реализовать метод [сетконтролстате](reference/mode/setcontrolstate.md) , чтобы информация была передана в следующий раз в рамках одного сеанса.

Разработчики должны реализовать метод [destroy](reference/control/destroy.md) , который вызывается при закрытии страницы, чтобы удалить любой код очистки, например обработчики событий.

## <a name="resources"></a>Ресурсы

Каждый компонент кода должен иметь файл ресурсов для создания его визуализации. В манифесте можно определить файл ресурсов. Узел ресурса в файле манифеста ссылается на ресурсы, необходимые компоненту для реализации его визуализации. Дополнительные сведения: [элемент Resources](manifest-schema-reference/resources.md)

### <a name="related-topics"></a>Связанные статьи

[Создание и построение компонента кода](create-custom-controls-using-pcf.md)
